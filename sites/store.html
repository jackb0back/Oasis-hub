<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>OASIS store</title>
  </head>
  <body>
    <h1>Oasis store</h1>
    <fieldset>
      <legend><h2>ROMS</h2></legend>
      <h3>NES roms</h3>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <iframe
        src="https://drive.google.com/embeddedfolderview?id=0B4dzhuEovDOMQzdHUlBnaUJRU2M#grid"
        style="width: 100%; height: 400px; border: 0;"
      ></iframe>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <h3>GBA roms</h3>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <iframe
        src="https://drive.google.com/embeddedfolderview?id=1pCXaEjukH0NsTsSCb1F0hNbjs8_-LMXf#grid"
        style="width: 100%; height: 400px; border: 0;"
      ></iframe>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </fieldset>
    <fieldset>
      <legend>
        <h2>HTML games</h2>
      </legend>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />

      <iframe
        src="https://drive.google.com/embeddedfolderview?id=1-M04K8h4OPti35-0PdxlVvlfNCeiELsz#grid"
        style="width: 100%; height: 400px; border: 0;"
      ></iframe>
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
    </fieldset>
    <fieldset>
      <legend>
        <h2>bookmarklets</h2>
      </legend>
      <a href="javascript:(function()%7Bdocument.body.innerHTML%20%3D%20%60%3Ciframe%0A%20%20src%3D%22https%3A%2F%2Foasis-player.netlify.app%2F%22%0A%20%20style%3D%22%0A%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20top%3A%200px%3B%0A%20%20%20%20bottom%3A%200px%3B%0A%20%20%20%20right%3A%200px%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20border%3A%20none%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20overflow%3A%20hidden%3B%0A%20%20%20%20z-index%3A%20999999%3B%0A%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20id%3D%22WebPlayerFrame%22%0A%20%20%22%3E%0A%3C%2Fiframe%3E%60%7D)()%3B">Webretro overlay</a>
      <br>
      <a href="javascript:(function()%7Bvar%20ans%20%3D%20prompt('webpage%20URL')%0A%09document.body.innerHTML%20%3D%20%60%3Ciframe%0A%20%20src%3D%22%60%2Bans%2B%60%22%0A%20%20style%3D%22%0A%20%20%20%20position%3A%20fixed%3B%0A%20%20%20%20top%3A%200px%3B%0A%20%20%20%20bottom%3A%200px%3B%0A%20%20%20%20right%3A%200px%3B%0A%20%20%20%20width%3A%20100%25%3B%0A%20%20%20%20border%3A%20none%3B%0A%20%20%20%20margin%3A%200%3B%0A%20%20%20%20padding%3A%200%3B%0A%20%20%20%20overflow%3A%20hidden%3B%0A%20%20%20%20z-index%3A%20999999%3B%0A%20%20%20%20height%3A%20100%25%3B%0A%20%20%20%20id%3D%22WebPlayerFrame%22%0A%20%20%22%3E%0A%3C%2Fiframe%3E%60%7D)()%3B">Oasis player overlay</a>
      <br>
      <a href="javascript:(function()%7B%2F%2F%20creation%20args%3A%20title%20(string)%2C%20icon(url%20string)%0A%2F%2F%20open%20args%3A%20width%2C%20height%2C%20left%2C%20top%20(all%20are%20numbers)%0Avar%20style%3Ddocument.createElement('style')%2CstyleContent%3Ddocument.createTextNode('body%7Boverflow%3Ahidden!important%3B%7D.window%7Bresize%3Aboth!important%3Boverflow%3Ahidden!important%3Bposition%3Aabsolute!important%3Bborder%3A2pxsoliddarkgrey!important%3Bmargin%3A0px!important%3Bbackground-color%3A%23DDD!important%3Bcursor%3Adefault!important%3Bmin-width%3A20px!important%3Bmin-height%3A20px!important%3Bpadding%3A0px!important%3Bz-index%3A1000!important%3B%7D.windowbar%7Bfont-family%3Asans-serif!important%3Buser-select%3Anone!important%3Bwidth%3Acalc(100%25-4px)!important%3Bpadding%3A2px!important%3Bheight%3A16px!important%3Bline-height%3A16px!important%3Bcolor%3Ablack!important%3Bbackground-color%3Alightblue!important%3Bbackground-image%3Aurl(%5C%22bar.png%5C%22)!important%3Bfont-size%3A12px!important%3Bborder-bottom%3A2pxsoliddarkgrey!important%3Boverflow%3Ahidden!important%3B%7D.windowicon%2C.windowtitle%2C.windowclose%7Bdisplay%3Ainline-block!important%3B%7D.windowicon%7Bbackground-repeat%3Ano-repeat!important%3Bbackground-position%3Acenter!important%3Bbackground-size%3Acontain!important%3Bwidth%3A16px!important%3Bheight%3A16px!important%3Bposition%3Aabsolute!important%3Btop%3A2px!important%3Bleft%3A2px!important%3B%7D.windowtitle%7Bposition%3Arelative!important%3B%7D.windowicon%2B.windowtitle%7Bleft%3A18px!important%3B%7D.windowclose%7Bposition%3Aabsolute!important%3Btop%3A2px!important%3Bright%3A2px!important%3Bwidth%3A14px!important%3Bheight%3A14px!important%3Bline-height%3A14px!important%3Btext-align%3Acenter!important%3Bbackground-color%3Atomato!important%3Bborder%3A1pxoutsetlightgray!important%3B%7D.windowclose%3Aactive%7Bborder-style%3Ainset!important%3B%7D.windowcontent%7Bwidth%3A100%25!important%3Bheight%3Acalc(100%25-22px)!important%3Boverflow%3Aauto!important%3B%7D')%3Bstyle.appendChild(styleContent)%3Bvar%20caput%3Ddocument.getElementsByTagName('head')%3Bcaput%5B0%5D.appendChild(style)%3B%0Afunction%20jswindow(args)%20%7B%0A%09%2F%2F%20specify%20options%20here%0A%09var%20borderThickness%20%3D%202%3B%0A%09var%20defaultWidth%20%3D%20250%3B%0A%09var%20defaultHeight%20%3D%20150%3B%0A%09var%20topClip%20%3D%200%3B%0A%09var%20bottomClip%20%3D%2024%3B%0A%09var%20leftClip%20%3D%2048%3B%0A%09var%20rightClip%20%3D%2024%3B%0A%09%0A%09%2F%2F%20vWindow%20instead%20of%20this%20for%20event.target%20workaround%0A%09var%20vWindow%20%3D%20this%3B%0A%09%0A%09function%20randInt(min%2C%20max)%20%7B%20return%20Math.floor(Math.random()%20*%20(max%20-%20min%20%2B%201))%20%2B%20min%3B%20%7D%0A%09function%20clipRight()%20%7B%20return%20parseInt(vWindow.outerWindow.style.width)%20%2B%20parseInt(vWindow.outerWindow.style.left)%20%2B%20(borderThickness%20*%202)%20%3E%20window.innerWidth%3B%20%7D%0A%09function%20clipBottom()%20%7B%20return%20parseInt(vWindow.outerWindow.style.height)%20%2B%20parseInt(vWindow.outerWindow.style.top)%20%2B%20(borderThickness%20*%202)%20%3E%20window.innerHeight%3B%20%7D%0A%09%0A%09this.setTitle%20%3D%20function(text)%20%7B%0A%09%09vWindow.outerWindow.bar.wname.textContent%20%3D%20text%3B%0A%09%7D%0A%09%0A%09this.setIcon%20%3D%20function(url)%20%7B%0A%09%09vWindow.outerWindow.bar.icon.style.backgroundImage%20%3D%20'url(%22'%20%2B%20url%20%2B%20'%22)'%3B%0A%09%7D%0A%09%0A%09%2F%2F%20open%20window%20with%20optional%20width%20and%20height%20(will%20otherwise%20be%20default)%20and%20distances%20from%20the%20top%20left%20(otherwise%20random)%0A%09this.open%20%3D%20function(args)%20%7B%0A%09%09vWindow.outerWindow.style.width%20%3D%20(args%20%26%26%20args.width%20%3F%20args.width%20%2B%20%22px%22%20%3A%20defaultWidth%20%2B%20%22px%22)%3B%0A%09%09vWindow.outerWindow.style.height%20%3D%20(args%20%26%26%20args.height%20%3F%20args.height%20%2B%20%22px%22%20%3A%20defaultHeight%20%2B%20%22px%22)%3B%0A%09%09vWindow.outerWindow.style.left%20%3D%20(args%20%26%26%20args.left%20%3F%20args.left%20%2B%20%22px%22%20%3A%20randInt(0%2C%20window.innerWidth%20-%20parseInt(vWindow.outerWindow.style.width))%20%2B%20%22px%22)%3B%0A%09%09vWindow.outerWindow.style.top%20%3D%20(args%20%26%26%20args.top%20%3F%20args.top%20%2B%20%22px%22%20%3A%20randInt(0%2C%20window.innerHeight%20-%20parseInt(vWindow.outerWindow.style.height))%20%2B%20%22px%22)%3B%0A%09%09vWindow.outerWindow.style.maxWidth%20%3D%20(window.innerWidth%20-%20(parseInt(vWindow.outerWindow.style.left)%20%2B%20(borderThickness%20*%202)))%20%2B%20%22px%22%3B%0A%09%09vWindow.outerWindow.style.maxHeight%20%3D%20(window.innerHeight%20-%20(parseInt(vWindow.outerWindow.style.top)%20%2B%20(borderThickness%20*%202)))%20%2B%20%22px%22%3B%0A%09%09document.body.appendChild(vWindow.outerWindow)%3B%0A%09%7D%0A%09%0A%09this.onclose%20%3D%20function()%20%7B%7D%0A%09%0A%09this.close%20%3D%20function()%20%7B%0A%09%09vWindow.outerWindow.remove()%3B%0A%09%09vWindow.onclose()%3B%0A%09%7D%0A%09%0A%09%2F%2F%20start%20constructor%20creation%0A%09%2F%2F%20make%20nodes%0A%09vWindow.outerWindow%20%3D%20document.createElement(%22div%22)%3B%0A%09vWindow.outerWindow.classList.add(%22window%22)%3B%0A%09%0A%09vWindow.outerWindow.bar%20%3D%20document.createElement(%22div%22)%3B%0A%09vWindow.outerWindow.bar.classList.add(%22windowbar%22)%3B%0A%09%0A%09if%20(args%20%26%26%20args.icon)%20%7B%0A%09%09vWindow.outerWindow.bar.icon%20%3D%20document.createElement(%22span%22)%3B%0A%09%09vWindow.outerWindow.bar.icon.classList.add(%22windowicon%22)%3B%0A%09%09vWindow.outerWindow.bar.icon.style.backgroundImage%20%3D%20'url(%22'%20%2B%20args.icon%20%2B%20'%22)'%3B%0A%09%09vWindow.outerWindow.bar.appendChild(vWindow.outerWindow.bar.icon)%3B%0A%09%7D%0A%09%0A%09vWindow.outerWindow.bar.wname%20%3D%20document.createElement(%22span%22)%3B%0A%09vWindow.outerWindow.bar.wname.appendChild(document.createTextNode(args%20%26%26%20args.title%20%3F%20args.title%20%3A%20%22%22))%3B%0A%09vWindow.outerWindow.bar.wname.classList.add(%22windowtitle%22)%3B%0A%09%0A%09vWindow.outerWindow.bar.close%20%3D%20document.createElement(%22span%22)%3B%0A%09vWindow.outerWindow.bar.close.appendChild(document.createTextNode(String.fromCharCode(10006)))%3B%0A%09vWindow.outerWindow.bar.close.classList.add(%22windowclose%22)%3B%0A%09vWindow.outerWindow.bar.close.title%20%3D%20%22Close%22%3B%0A%09vWindow.outerWindow.bar.close.onclick%20%3D%20vWindow.close%3B%0A%09%0A%09vWindow.innerWindow%20%3D%20document.createElement(%22div%22)%3B%0A%09vWindow.innerWindow.classList.add(%22windowcontent%22)%3B%0A%09%0A%09%2F%2F%20icon%20already%20appended%20if%20specified%0A%09vWindow.outerWindow.bar.appendChild(vWindow.outerWindow.bar.wname)%3B%0A%09vWindow.outerWindow.bar.appendChild(vWindow.outerWindow.bar.close)%3B%0A%09vWindow.outerWindow.appendChild(vWindow.outerWindow.bar)%3B%0A%09vWindow.outerWindow.appendChild(vWindow.innerWindow)%3B%0A%09%0A%09%2F%2F%20move%20window%20to%20front%0A%09vWindow.outerWindow.addEventListener(%22mousedown%22%2C%20function(e)%20%7B%0A%09%09var%20allwindows%20%3D%20Array.from(document.querySelectorAll(%22div.window%22))%3B%0A%09%09if%20((allwindows.indexOf(vWindow.outerWindow)%20!%3D%20(allwindows.length%20-%201))%20%26%26%20e.target%20!%3D%20vWindow.outerWindow.bar.close)%20document.body.appendChild(vWindow.outerWindow)%3B%0A%09%7D%2C%20false)%3B%0A%09%0A%09%2F%2F%20move%20window%20around%0A%09var%20oldcursorX%2C%20oldcursorY%3B%0A%09vWindow.outerWindow.bar.addEventListener(%22mousedown%22%2C%20function(e)%20%7B%0A%09%09if%20((e.target%20!%3D%20vWindow.outerWindow.bar.close)%20%26%26%20(e.button%20%3D%3D%200))%20%7B%0A%09%09%09e.preventDefault()%3B%0A%09%09%09oldcursorX%20%3D%20e.clientX%3B%0A%09%09%09oldcursorY%20%3D%20e.clientY%3B%0A%09%09%09document.addEventListener(%22mousemove%22%2C%20windowDrag%2C%20false)%3B%0A%09%09%09document.addEventListener(%22mouseup%22%2C%20windowDragEnd%2C%20false)%3B%0A%09%09%7D%0A%09%7D%2C%20false)%3B%0A%09%0A%09function%20windowDrag(e)%20%7B%0A%09%09e.preventDefault()%3B%0A%09%09vWindow.outerWindow.style.left%20%3D%20(vWindow.outerWindow.offsetLeft%20-%20(oldcursorX%20-%20e.clientX))%20%2B%20%22px%22%3B%0A%09%09oldcursorX%20%3D%20e.clientX%3B%0A%09%09vWindow.outerWindow.style.top%20%3D%20(vWindow.outerWindow.offsetTop%20-%20(oldcursorY%20-%20e.clientY))%20%2B%20%22px%22%3B%0A%09%09oldcursorY%20%3D%20e.clientY%3B%0A%09%7D%0A%09%0A%09%2F%2F%20pop%20window%20back%20into%20view%20area%2C%20and%20set%20max%20dimensions%20if%20it's%20not%20clipping%20into%20bottom%20right%0A%09function%20windowDragEnd()%20%7B%0A%09%09document.removeEventListener(%22mousemove%22%2C%20windowDrag)%3B%0A%09%09document.removeEventListener(%22mouseup%22%2C%20windowDragEnd)%3B%0A%09%09vWindow.outerWindow.style.left%20%3D%20Math.min(Math.max(vWindow.outerWindow.offsetLeft%2C%200%20-%20parseInt(vWindow.outerWindow.style.width)%20%2B%20leftClip)%2C%20window.innerWidth%20-%20rightClip)%20%2B%20%22px%22%3B%0A%09%09vWindow.outerWindow.style.top%20%3D%20Math.min(Math.max(vWindow.outerWindow.offsetTop%2C%20topClip)%2C%20window.innerHeight%20-%20bottomClip)%20%2B%20%22px%22%3B%0A%09%09if%20(!clipRight())%20vWindow.outerWindow.style.maxWidth%20%3D%20(window.innerWidth%20-%20(parseInt(vWindow.outerWindow.style.left)%20%2B%20(borderThickness%20*%202)))%20%2B%20%22px%22%3B%0A%09%09if%20(!clipBottom())%20vWindow.outerWindow.style.maxHeight%20%3D%20(window.innerHeight%20-%20(parseInt(vWindow.outerWindow.style.top)%20%2B%20(borderThickness%20*%202)))%20%2B%20%22px%22%3B%0A%09%7D%0A%09%2F%2F%20end%20constructor%20creation%0A%7D%0A%0A%0A%0A%0A%0A%0A%0Avar%20eg%20%3D%20new%20jswindow(%7Btitle%3A%20%22OASIS%20browser%22%2C%20icon%3A%20%22%22%7D)%3B%0A%09%09%09%09eg.innerWindow.innerHTML%20%3D%20%60%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Cbutton%20onclick%3D%22document.getElementById('FRAME').src%20%3D%20prompt('url')%22%3Echange%20url%3C%2Fbutton%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3Ciframe%20id%3D%22FRAME%22%20width%3D%22100%25%22%20resize%3D%22both%22%20height%3D%22600px%22%20src%3D%22https%3A%2F%2Foasis-player.netlify.app%2F%22%3E%3C%2Fiframe%3E%60%3B%0A%09%09%09%09eg.open(%7Bwidth%3A%20700%2C%20height%3A%20600%7D)%3B%7D)()%3B">OASIS browser </a>
      <br>
      <a
        href="javascript:(function()%7Bjavascript%3A(()%3D%3E%7Bvar%20r%3Ddocument.querySelector(%22.StudentLayout%22)%2Ct%3DObject.keys(r).find(e%3D%3Ee.startsWith(%22__reactFiber%22))%2Cn%3Dr%5Bt%5D.memoizedProps.children%5B2%5D.props.children.props.prompt._root.nodes.find(e%3D%3Ee.entry%26%26e.entry%5B0%5D%3D%3D%22word%22).entry%5B1%5D%3BArray.from(document.querySelectorAll(%22div%22)).find(e%3D%3Ee.innerHTML%3D%3Dn).click()%3B%7D)()%3B%7D)()%3B"
        >Quizzlet live auto</a
      >
      <br />
      <a
        href="javascript:(function()%7Bjavascript%3A(()%3D%3E%7Bvar%20c%3Dt%3D%3Enew%20Promise(i%3D%3EsetTimeout(i%2Ct))%2Cl%3Dt%3D%3Et.replace(%2F(%26(%5Ba-z0-9%5D%20%7C%23%5B0-9%5D%7B1%2C6%7D%7C%23x%5B0-9a-f%5D%7B1%2C6%7D)%3B)%20%2Fgi%2C%22%20%22).replace(%2F%3C%5B%5E%3E%5D*%3E%2Fg%2C%22%20%22).replace(%2F%20%7B2%2C%7D%2Fg%2C%22%20%22)%3B(async()%3D%3E%7Blet%20t%3Dawait%20fetch(window.location.href.toString().replace(%22%2Fgravity%22%2C%22%22)).then(e%3D%3Ee.text())%2Ci%3D%5B%5D%3Bfor(let%5Be%2Ca%5Dof%20Object.entries(JSON.parse(t.substring(t.indexOf('(function()%7Bwindow.Quizlet%5B%22setPageData%22%5D%20%3D%20')%2044%2Ct.indexOf('%3B%20QLoad(%22Quizlet.setPageData%22)%3B%7D).call(this)'))).termIdToTermsMap))%7Blet%20n%3Da%3Bi.push(%7Bterm%3An.word.replace(%2F%5Cr%3F%5Cn%7C%5Cr%2Fg%2C%22%20%22)%2Cdefinition%3An.definition.replace(%2F%5Cr%3F%5Cn%7C%5Cr%2Fg%2C%22%20%22)%7D)%7Dlet%20o%3D%22%22%3Bfor(%3B%3B)%7Btry%7Bif(document.querySelector(%22.GravityTerm-text%20%3E%20span%22))%7Blet%20e%3Dl(document.querySelector(%22.GravityTerm-text%20%3E%20span%22).innerHTML)%3Bconsole.log(e)%3Blet%20a%3Ddocument.querySelector(%22.GravityTypingPrompt-input%22)%3Bif(e!%3D%3Do%7C%7Ca.value%3D%3D%3D%22%22)%7Bo%3De%3Blet%20n%3Di.map(r%3D%3E%7Bif(r.term%3D%3De)return%20r.definition%3Bif(r.definition%3D%3De)return%20r.term%7D).filter(r%3D%3Er!%3D%3Dvoid%200)%2Cs%3Dn%5Bn.length-1%5D%3Ba.value%3Ds%7D%7D%7Dcatch%7B%7Dawait%20c(100)%7D%7D)()%3B%7D)()%3B%7D)()%3B"
        >Quizzlet gravity auto</a
      >
      <br />
      <a
        href="javascript:(function()%7Bjavascript%3A(()%3D%3E%7Bvar%20s%3Di%3D%3Enew%20Promise(o%3D%3EsetTimeout(o%2Ci))%3B(async()%3D%3E%7Blet%20i%3Dawait%20fetch(window.location.href.toString().replace(%22%2Fmatch%22%2C%22%22)).then(l%3D%3El.text())%2Co%3D%5B%5D%3Bfor(let%5Bl%2Ce%5Dof%20Object.entries(JSON.parse(i.substring(i.indexOf('(function()%7Bwindow.Quizlet%5B%22setPageData%22%5D%20%3D%20')%2044%2Ci.indexOf('%3B%20QLoad(%22Quizlet.setPageData%22)%3B%7D).call(this)'))).termIdToTermsMap))%7Blet%20t%3De%3Bo.push(%7Bterm%3At.word%2Cdefinition%3At.definition%7D)%7Dfor(%3Bdocument.querySelector(%22.MatchModeQuestionGridBoard%22)%3D%3Dnull%26%26document.querySelector(%22.MatchModeQuestionScatterBoard%22)%3D%3Dnull%3B)await%20s(100)%3Blet%20c%3D0%3Bswitch(document.querySelector(%22.MatchModeQuestionScatterBoard%22)%26%26(c%3D1)%2Cc)%7Bcase%200%3A%7Blet%20l%3Ddocument.querySelectorAll(%22.MatchModeQuestionGridBoard-tile%22)%2Ce%3D%5B%5D%3Bfor(let%20t%20of%20Array.from(l))e.push(%7Belement%3At%2Ctext%3At.querySelector(%22.MatchModeQuestionGridTile-text%22).getAttribute(%22aria-label%22)%7D)%3Bfor(let%20t%20of%20e)%7Blet%20a%3Do.map(r%3D%3E%7Bif(r.term%3D%3Dt.text)return%7Bmatch%3Ar.definition%7D%3Bif(r.definition%3D%3Dt.text)return%7Bmatch%3Ar.term%7D%7D).filter(r%3D%3Er!%3D%3Dvoid%200)%5B0%5D%2Cm%3De.filter(r%3D%3Er.text%3D%3Da.match)%2Cn%3Dm%5Bm.length-1%5D%3Bfor(t.element.style.border%3D%222px%20solid%20lime%22%2Cn.element.style.border%3D%222px%20solid%20lime%22%3Bt.element.children.length%3E0%3B)await%20s(100)%3Bt.element.style.border%3D%22none%22%2Cn.element.style.border%3D%22none%22%7Dbreak%7Dcase%201%3A%7Blet%20l%3D%5B%5D%3Bfor(let%20e%20of%20Array.from(document.querySelectorAll(%22.MatchModeQuestionScatterTile%22)))l.push(%7Belement%3Ae%2Ctext%3Ae.querySelector(%22.TermText%22).getAttribute(%22aria-label%22)%7D)%3Bfor(let%20e%20of%20l)%7Blet%20t%3Do.map(n%3D%3E%7Bif(n.term%3D%3De.text)return%7Bmatch%3An.definition%7D%3Bif(n.definition%3D%3De.text)return%7Bmatch%3An.term%7D%7D).filter(n%3D%3En!%3D%3Dvoid%200)%5B0%5D%2Ca%3Dl.filter(n%3D%3En.text%3D%3Dt.match)%2Cm%3Da%5Ba.length-1%5D%3Bfor(e.element.style.border%3D%222px%20solid%20lime%22%2Cm.element.style.border%3D%222px%20solid%20lime%22%3B!e.element.className.includes(%22is-correct%22)%3B)await%20s(100)%7Dbreak%7D%7D%7D)()%3B%7D)()%3B%7D)()%3B"
        >Quizzlet match auto</a
      >
      <br />
      <a
        href="javascript:(function()%7Bjavascript%3A(()%3D%3E%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(document.location.host%20!%3D%20'www.blooket.com')%20return%20alert('Drag%20me%20to%20your%20bookmark%20bar%20and%20click%20me%20when%20you%5C're%20in%20a%20game')%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20onmessage%20%3D%20(m)%3D%3Eeval(m.data)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20open('https%3A%2F%2Fgbasil.dev%2Fblooket%3Fxenonaut%3Dcool%2527)%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D)()%3B%7D)()%3B"
        >Blooket hacks</a
      >
      <br />
      <a
        href="javascript:(function()%7B%2F*%20I%20add%20random%20characters%20at%20the%20end%20of%20the%20ID%20so%20that%20it%20does%20not%20clash%20with%20any%20other%20ID's%20on%20the%20page%20*%2F%0A%0Aconst%20ID%20%3D%0A%20%20%22--picture-in-picture-toolbar-8743fsfjkl9274g9832fkjdslfjksl7498247389%22%3B%20%2F*%20Helper%20functions%20*%2F%0Aconst%20get%20%3D%20(selector%2C%20el%20%3D%20document)%20%3D%3E%20el.querySelector(selector)%3B%0Aconst%20getAll%20%3D%20(selector%2C%20el%20%3D%20document)%20%3D%3E%0A%20%20Array.from(el.querySelectorAll(selector))%3B%0A%2F*%20Remove%20our%20toolbar%20if%20it%20exists%20*%2F%20let%20_toolbar%20%3D%20get(%60%23%24%7BID%7D%60)%3B%0Aif%20(_toolbar)%20%7B%0A%20%20_toolbar.parent.removeChild(_toolbar)%3B%0A%7D%0A%2F*%20create%20the%20toolbar%20*%2F%20const%20toolbar%20%3D%20document.createElement(%0A%20%20%22div%22%0A)%3B%20%2F*%20Set%20the%20toolbar's%20ID%2C%20so%20we%20can%20remove%20it%20later%20*%2F%0Atoolbar.id%20%3D%20ID%3B%20%2F*%20Use%20shadow-dom%20as%20outlined%20here%3A%20https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fweb-components%2Fshadowdom%20*%2F%0A%2F*%20Inside%20shadow%20dom%20we%20don't%20have%20to%20worry%20about%20conflicting%20styles.%20*%2F%20const%20shadowroot%20%3D%20toolbar.attachShadow(%0A%20%20%7B%20mode%3A%20%22open%22%20%7D%0A)%3B%0Ashadowroot.innerHTML%20%3D%20%60%3Cdiv%20id%3D%22container%22%3E%20%0A%3Cstyle%3E%0Abody%20%7B%0A%20%20font-family%3A%20'Lato'%2C%20sans-serif%3B%0A%7D%0A%0A.overlay%20%7B%0A%20%20height%3A%20100%25%3B%0A%20%20width%3A%200%3B%0A%20%20position%3A%20fixed%3B%0A%20%20z-index%3A%201%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20background-color%3A%20rgb(0%2C0%2C0)%3B%0A%20%20background-color%3A%20rgba(0%2C0%2C0%2C%200.5)%3B%0A%20%20overflow-x%3A%20hidden%3B%0A%20%20transition%3A%200.5s%3B%0A%7D%0A%0A.overlay-content%20%7B%0A%20%20position%3A%20relative%3B%0A%20%20top%3A%2025%25%3B%0A%20%20width%3A%20100%25%3B%0A%20%20text-align%3A%20center%3B%0A%20%20margin-top%3A%2030px%3B%0A%7D%0A%0A.overlay%20a%20%7B%0A%20%20padding%3A%208px%3B%0A%20%20text-decoration%3A%20none%3B%0A%20%20font-size%3A%2036px%3B%0A%20%20color%3A%20black%3B%0A%20%20display%3A%20block%3B%0A%20%20transition%3A%200.3s%3B%0A%7D%0A%0A.overlay%20a%3Ahover%2C%20.overlay%20a%3Afocus%20%7B%0A%20%20color%3A%20black%3B%0A%7D%0A%0A.overlay%20.closebtn%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%2020px%3B%0A%20%20right%3A%2045px%3B%0A%20%20font-size%3A%2060px%3B%0A%20%20transform%3A%20rotate(-90deg)%3B%0A%7D%0A%0A%40media%20screen%20and%20(max-height%3A%20450px)%20%7B%0A%20%20.overlay%20a%20%7Bfont-size%3A%2020px%7D%0A%20%20.overlay%20.closebtn%20%7B%0A%20%20font-size%3A%2040px%3B%0A%20%20top%3A%2015px%3B%0A%20%20right%3A%2035px%3B%0A%20%20%7D%0A%7D%0A%0A%0A.menu%20%7B%0Aposition%3A%20fixed%3B%0Abottom%3A%200%3B%0A%0A%7D%0A%0A.app%20%7B%0A%20%20%20%20text-align%3A%20center%3B%0Abackground-color%3A%20white%3B%0Afont-size%3A%2015px%3B%0A%20%20min-height%3A%2045px%3B%0A%20%20min-width%3A%2045px%3B%0A%20%20margin%3A%2010px%3B%0A%0A%20%20padding%3A%205px%3B%0A%20%20border-radius%3A%20100px%3B%0A%7D%0A%0A%0A%23openNav%20%7B%0A%20%20%20%20transform%3A%20rotate(90deg)%3B%0A%7D%0A%3C%2Fstyle%3E%0A%0A%0A%3Cdiv%20id%3D%22Player%22%20class%3D%22overlay%22%3E%0A%20%20%3Ca%20href%3D%22javascript%3Avoid(0)%22%20background-color%3D%22black%22%20class%3D%22closebtn%22%20id%3D%22closePlayer%22%20onclick%3D%22closeNav()%22%3E%26times%3B%3C%2Fa%3E%0A%20%20%3Cdiv%20class%3D%22overlay-content%22%3E%3Ch1%3EPlayer1%3C%2Fh1%3E%0A%20%20URL%3A%3Cinput%20id%3D%22URL%22%20type%3D%22text%22%3E%3C%2Finput%3E%3Cbutton%20id%3D%22GO%22%3EGO%3C%2Fbutton%3E%0A%20%20%20%3Ciframe%20id%3D%22frame%22%20src%3D%22%22%20width%3D%22100%25%22%20height%3D%22700px%3B%22%3E%0A%0A%20%20%20%3C%2Fiframe%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%20%0A%3Cdiv%20id%3D%22Player2%22%20class%3D%22overlay%22%3E%0A%3Ca%20href%3D%22javascript%3Avoid(0)%22%20background-color%3D%22black%22%20class%3D%22closebtn%22%20id%3D%22closePlayer2%22%20onclick%3D%22closeNav()%22%3E%26times%3B%3C%2Fa%3E%0A%3Cdiv%20class%3D%22overlay-content%22%3E%3Ch1%3EPlayer2%3C%2Fh1%3E%0AURL%3A%3Cinput%20id%3D%22URL2%22%20type%3D%22text%22%3E%3C%2Finput%3E%3Cbutton%20id%3D%22GO2%22%3EGO%3C%2Fbutton%3E%0A%20%3Ciframe%20id%3D%22frame2%22%20src%3D%22%22%20width%3D%22100%25%22%20height%3D%22700px%3B%22%3E%0A%0A%20%3C%2Fiframe%3E%0A%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%20%0A%3Cdiv%20id%3D%22Player3%22%20class%3D%22overlay%22%3E%0A%3Ca%20href%3D%22javascript%3Avoid(0)%22%20background-color%3D%22black%22%20class%3D%22closebtn%22%20id%3D%22closePlayer3%22%20onclick%3D%22closeNav()%22%3E%26times%3B%3C%2Fa%3E%0A%3Cdiv%20class%3D%22overlay-content%22%3E%3Ch1%3EPlayer3%3C%2Fh1%3E%0AURL%3A%3Cinput%20id%3D%22URL3%22%20type%3D%22text%22%3E%3C%2Finput%3E%3Cbutton%20id%3D%22GO3%22%3EGO%3C%2Fbutton%3E%0A%20%3Ciframe%20id%3D%22frame3%22%20src%3D%22%22%20width%3D%22100%25%22%20height%3D%22700px%3B%22%3E%0A%0A%20%3C%2Fiframe%3E%0A%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%0A%3Cdiv%20id%3D%22myNav%22%20class%3D%22overlay%22%3E%0A%20%3Ca%20href%3D%22%22%3Eget%20more%20apps%3C%2Fa%3E%0A%20%0A%20%20%20%3Cimg%20src%3Dhttp%3A%2F%2Fcdn.onlinewebfonts.com%2Fsvg%2Fimg_69492.png%20class%3D%22closebtn%22%20id%3D%22closeNav%22%20%20width%3D%2235px%22%3E%0A%0A%20%20%3Cdiv%20class%3D%22overlay-content%22%3E%0A%20%20open%20as%20a%20window%3F%0A%20%3Cselect%20name%3D%22window%22%20id%3D%22Win%22%3E%0A%20%20%20%3Coption%20value%3D%220%22%3Efalse%3C%2Foption%3E%20%0A%20%20%20%3Coption%20value%3D%221%22%3Etrue%3C%2Foption%3E%0A%20%20%20%20%0A%20%20%3C%2Fselect%3E%0A%20%20%3Cselect%20name%3D%22tab%22%20id%3D%22tab%22%3E%0A%20%20%20%3Coption%20value%3D%22%22%3E1%3C%2Foption%3E%20%0A%20%20%20%3Coption%20value%3D%222%22%3E2%3C%2Foption%3E%0A%20%20%20%3Coption%20value%3D%223%22%3E3%3C%2Foption%3E%0A%20%20%20%20%0A%20%20%3C%2Fselect%3E%0A%20%20%20%0A%20%20%3Cbr%3E%0A%20%20%3Cbr%3E%0A%20%20%0A%3Cbutton%20class%3D%22app%22%20id%3D%22openPlayer%22%3E%0AWebplayer%0A%3C%2Fbutton%3E%0A%3Cbutton%20class%3D%22app%22%20id%3D%22GBA%22%3E%0AGBA-jack%0A%3C%2Fbutton%3E%0A%3Cbutton%20class%3D%22app%22%20id%3D%22VSCODE%22%3E%0Avscode%0A%3C%2Fbutton%3E%0A%3Cbutton%20class%3D%22app%22%20id%3D%22OASIS%22%3E%0AOASIS%0A%3C%2Fbutton%3E%0A%20%20%3Cdiv%20id%3D%22Apps%22%3E%20%0A%3C%2Fdiv%3E%0A%3Cbr%3E%0A%3Cbr%3E%0A%3Cbr%3E%0A%3Cdiv%20id%3D%22bookmarks%22%3E%3C%2Fdiv%3E%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%0A%3Cdiv%20class%3D%22menu%22%3E%0A%0A%0A%3C%2Fdiv%3E%0A%3Cbutton%20aria-label%3D%22close%22%20id%3D%22close%22%3E%20%20%20%20x%20%20%3C%2Fbutton%3E%0A%0A%0A%0A%3Cdiv%20id%3D%22Start%22%3E%0A%3Cimg%20src%3Dhttp%3A%2F%2Fcdn.onlinewebfonts.com%2Fsvg%2Fimg_69492.png%20id%3D%22openNav%22%20onclick%3D%22openNav()%22%20width%3D%2235px%22%3E%0A%0A%3Cbutton%20id%3D%22P1%22%3E1%3C%2Fbutton%3E%0A%3Cbutton%20id%3D%22P2%22%3E2%3C%2Fbutton%3E%0A%3Cbutton%20id%3D%22P3%22%3E3%3C%2Fbutton%3E%0A%3Cbutton%20id%3D%22toggleV%22%3Edown%3C%2Fbutton%3E%0A%3C%2Fdiv%3E%0A%3Cstyle%3E%0A%23Start%20%7B%0Aposition%3A%20fixed%3B%0Abackground-color%3A%20grey%3B%0Awidth%3A%20100%25%3B%0Abottom%3A0%3B%0Aleft%3A%200%3B%0Az-index%3A%209999999999%3B%0A%7D%0A%23toggleV%20%7B%0A%20%20position%3A%20fixed%3B%0A%20%20right%3A%200%3B%0A%7D%0A%23show%20%7B%0A%20%20position%3A%20fixed%3B%0A%20%20bottom%3A%200%3B%0A%20%20right%3A%200%3B%0A%20%20z-index%3A%20999999999%3B%0A%7D%0A%3C%2Fstyle%3E%0A%0A%3Cbutton%20id%3D%22show%22%3Eshow%3C%2Fbutton%3E%0A%20%20%3C%2Fdiv%3E%20%20%0A%20%20%0A%20%20%60%3B%0A%0Ashadowroot.getElementById(%22close%22).style.display%20%3D%20%22none%22%3B%0A%0A%0Avar%20Bookmarks%20%3D%20%5B%5D%0A%0A%0Ashadowroot.getElementById('show').style.visibility%20%3D%20%22hidden%22%0Afunction%20HideBar()%20%7B%0Ashadowroot.getElementById('Start').style.visibility%20%3D%20%22hidden%22%3B%0Ashadowroot.getElementById('show').style.visibility%20%3D%20%22visible%22%0A%7D%0Afunction%20ShowBar()%20%7B%0Ashadowroot.getElementById('Start').style.visibility%20%3D%20%22visible%22%3B%0A%0Ashadowroot.getElementById('show').style.visibility%20%3D%20%22hidden%22%0A%7D%0A%0Aget(%22%23close%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20const%20toolbar%20%3D%20get(%60%23%24%7BID%7D%60)%3B%0A%20%20if%20(toolbar)%20%7B%0A%20%20%20%20toolbar.parentNode.removeChild(toolbar)%3B%0A%20%20%7D%0A%7D)%3B%0A%0Aget(%22%23openNav%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20openNav()%0A%7D)%3B%0A%0A%0A%0Aget(%22%23toggleV%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20HideBar()%0A%7D)%3B%0A%0Aget(%22%23show%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0AShowBar()%0A%7D)%3B%0A%0A%0A%0A%0Aget(%22%23P1%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20shadowroot.getElementById(%22Player%22).style.width%20%3D%20%22100%25%22%3B%0A%7D)%3B%0Aget(%22%23P2%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20shadowroot.getElementById(%22Player2%22).style.width%20%3D%20%22100%25%22%3B%0A%7D)%3B%0Aget(%22%23P3%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20shadowroot.getElementById(%22Player3%22).style.width%20%3D%20%22100%25%22%3B%0A%7D)%3B%0Aget(%22%23closeNav%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20closeNav()%0A%7D)%3B%0Aget(%22%23openPlayer%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20openPlayer()%0A%20closeNav()%0A%7D)%3B%0Aget(%22%23closePlayer%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20closePlayer()%0A%7D)%3B%0A%0A%0A%20get(%22%23closePlayer2%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20shadowroot.getElementById(%22Player2%22).style.width%20%3D%20%220%25%22%3B%0A%20%7D)%3B%0A%20%0A%20get(%22%23closePlayer3%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20shadowroot.getElementById(%22Player3%22).style.width%20%3D%20%220%25%22%3B%0A%20%7D)%3B%0A%20%0A%0Aget(%22%23GO%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0Ashadowroot.getElementById('frame').src%20%3D%20shadowroot.getElementById('URL').value%0A%7D)%3B%0A%0A%0Aget(%22%23GO2%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20shadowroot.getElementById('frame2').src%20%3D%20shadowroot.getElementById('URL2').value%0A%20%20%7D)%3B%0A%20%20get(%22%23GO3%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20shadowroot.getElementById('frame3').src%20%3D%20shadowroot.getElementById('URL3').value%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%0A%0Avar%20Win%20%3D%20%220%22%3B%0Avar%20Tab%20%3D%20%22%22%3B%0Aget(%22%23Win%22%2C%20shadowroot).addEventListener(%22change%22%2C%20()%20%3D%3E%20%7B%0AWin%3D%20shadowroot.getElementById('Win').value%0A%7D)%3B%0Aget(%22%23tab%22%2C%20shadowroot).addEventListener(%22change%22%2C%20()%20%3D%3E%20%7B%0A%20Tab%20%3D%20shadowroot.getElementById('tab').value%0A%20%20%7D)%3B%0A%20%20%0A%0Aget(%22%23GBA%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0APlay('https%3A%2F%2Fgba-jack.netlify.app%2F'%2C'frame'%2BTab)%0A%7D)%3B%0A%0Aget(%22%23VSCODE%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20Play('https%3A%2F%2Fvscode.dev%2F'%2C'frame'%2BTab)%0A%20%20%7D)%3B%0A%0A%20%20get(%22%23OASIS%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20%20var%20ans%20%3D%20prompt(%22Enter%20your%20OASIS%20url%22)%3B%0A%20%20%20%20Play(ans%2C'frame'%2BTab)%0A%20%20%20%20%7D)%3B%0A%20%20%0A%0A%0Afunction%20Play(url%2Cframe)%20%7B%0A%20%20%20%20if%20(Win%20%3D%3D%20%220%22)%20%7B%0A%20%20%20%20shadowroot.getElementById(frame).src%20%3D%20url%0A%20%20%20%20closeNav()%0A%20%20%20%20openPlayer()%0A%20%20%20%20%7Delse%20%7B%0A%20%20%20%20%20%20%20%20%20window.open(%0A%20%20%20%20%20%20%20%20%20url%2C%0A%20%20%20%20%20%20%20%20%20%20%22_blank%22%2C%0A%20%20%20%20%20%20%20%20%20%20%22toolbar%3Dyes%2Cscrollbars%3Dyes%2Cresizable%3Dyes%2Ctop%3D500%2Cleft%3D500%2Cwidth%3D1000%2Cheight%3D500%22%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20openNav()%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20toggle%20%3D%20true%3B%0A%20%20%20%20closePlayer()%0A%20%20shadowroot.getElementById(%22myNav%22).style.width%20%3D%20%22100%25%22%3B%0A%7D%0A%0Afunction%20closeNav()%20%7B%0A%20%20%20%20%20toggle%20%3D%20false%3B%0A%20%20shadowroot.getElementById(%22myNav%22).style.width%20%3D%20%220%25%22%3B%0A%7D%0A%0Afunction%20openPlayer()%20%7B%0Atoggle2%20%3D%20true%3B%0A%20%20shadowroot.getElementById(%22Player%22%2BTab).style.width%20%3D%20%22100%25%22%3B%0A%7D%0A%0Afunction%20closePlayer()%20%7B%0A%20%20%20%20toggle2%20%3D%20false%3B%0A%20%20shadowroot.getElementById(%22Player%22%2BTab).style.width%20%3D%20%220%25%22%3B%0A%7D%0A%0A%0A%0Avar%20toggle%20%3D%20false%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20%20%20if%20(event.key%20%3D%3D%3D%20'Alt')%20%7B%0A%20%20%20%20%20if%20(toggle%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20openNav()%0A%0A%20%20%20%20%20%7Delse%20%7B%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20closeNav()%0A%20%20%20%20%20%0A%20%20%20%20%20%7D%20%0A%20%20%20%20%7D%0A%7D)%3B%0A%0A%0Avar%20toggle2%20%3D%20false%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20%20%20if%20(event.key%20%3D%3D%3D%20'Ctrl')%20%7B%0A%20%20%20%20%20if%20(toggle2%20%3D%3D%20false)%20%7B%0A%20%20%20%20%20%20openPlayer()%0A%0A%20%20%20%20%20%7Delse%20%7B%0A%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20closePlayer()%0A%20%20%20%20%20%0A%20%20%20%20%20%7D%20%0A%20%20%20%20%7D%0A%7D)%3B%0Afunction%20Load(src)%20%7B%0A%09var%20jsCode%20%3D%20document.createElement('script')%3B%20%0A%09jsCode.setAttribute('src'%2C%20src)%3B%20%20%20%20%20%20%09%09%09%0A%20%20document.body.appendChild(jsCode)%3B%20%0A%0A%7D%0A%0A%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20if%20(event.key%20%3D%3D%3D%20'~')%20%7B%0Avar%20ans%20%3D%20prompt(%22load%20external%20js%20src%22)%3B%0ALoad(ans)%0A%20%20%7D%0A%7D)%3B%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20if%20(event.key%20%3D%3D%3D%20'!')%20%7B%0A%0A%20%20%7D%0A%7D)%3B%0A%0Adocument.body.appendChild(toolbar)%3B%7D)()%3B"
        >Oasis player v4.2</a
      >
      <br />
      <a
        href="javascript:(function()%7B%2F*%20I%20add%20random%20characters%20at%20the%20end%20of%20the%20ID%20so%20that%20it%20does%20not%20clash%20with%20any%20other%20ID's%20on%20the%20page%20*%2F%0A%0Aconst%20ID%20%3D%0A%20%20%22--picture-in-picture-toolbar-8743fsfjkl9274g9832fkjdslfjksl7498247389%22%3B%20%2F*%20Helper%20functions%20*%2F%0Aconst%20get%20%3D%20(selector%2C%20el%20%3D%20document)%20%3D%3E%20el.querySelector(selector)%3B%0Aconst%20getAll%20%3D%20(selector%2C%20el%20%3D%20document)%20%3D%3E%0A%20%20Array.from(el.querySelectorAll(selector))%3B%0A%2F*%20Remove%20our%20toolbar%20if%20it%20exists%20*%2F%20let%20_toolbar%20%3D%20get(%60%23%24%7BID%7D%60)%3B%0Aif%20(_toolbar)%20%7B%0A%20%20_toolbar.parent.removeChild(_toolbar)%3B%0A%7D%0A%2F*%20create%20the%20toolbar%20*%2F%20const%20toolbar%20%3D%20document.createElement(%0A%20%20%22div%22%0A)%3B%20%2F*%20Set%20the%20toolbar's%20ID%2C%20so%20we%20can%20remove%20it%20later%20*%2F%0Atoolbar.id%20%3D%20ID%3B%20%2F*%20Use%20shadow-dom%20as%20outlined%20here%3A%20https%3A%2F%2Fdevelopers.google.com%2Fweb%2Ffundamentals%2Fweb-components%2Fshadowdom%20*%2F%0A%2F*%20Inside%20shadow%20dom%20we%20don't%20have%20to%20worry%20about%20conflicting%20styles.%20*%2F%20const%20shadowroot%20%3D%20toolbar.attachShadow(%0A%20%20%7B%20mode%3A%20%22open%22%20%7D%0A)%3B%0Ashadowroot.innerHTML%20%3D%20%60%3Cdiv%20id%3D%22container%22%3E%20%0A%3Cstyle%3E%0Abody%20%7B%0A%20%20font-family%3A%20'Lato'%2C%20sans-serif%3B%0A%7D%0A%0A.overlay%20%7B%0A%20%20height%3A%20100%25%3B%0A%20%20width%3A%200%3B%0A%20%20position%3A%20fixed%3B%0A%20%20z-index%3A%201%3B%0A%20%20top%3A%200%3B%0A%20%20left%3A%200%3B%0A%20%20background-color%3A%20rgb(0%2C0%2C0)%3B%0A%20%20background-color%3A%20rgba(0%2C0%2C0%2C%200.9)%3B%0A%20%20overflow-x%3A%20hidden%3B%0A%20%20transition%3A%200.5s%3B%0A%7D%0A%0A.overlay-content%20%7B%0A%20%20position%3A%20relative%3B%0A%20%20top%3A%2025%25%3B%0A%20%20width%3A%20100%25%3B%0A%20%20text-align%3A%20center%3B%0A%20%20margin-top%3A%2030px%3B%0A%7D%0A%0A.overlay%20a%20%7B%0A%20%20padding%3A%208px%3B%0A%20%20text-decoration%3A%20none%3B%0A%20%20font-size%3A%2036px%3B%0A%20%20color%3A%20%23818181%3B%0A%20%20display%3A%20block%3B%0A%20%20transition%3A%200.3s%3B%0A%7D%0A%0A.overlay%20a%3Ahover%2C%20.overlay%20a%3Afocus%20%7B%0A%20%20color%3A%20%23f1f1f1%3B%0A%7D%0A%0A.overlay%20.closebtn%20%7B%0A%20%20position%3A%20absolute%3B%0A%20%20top%3A%2020px%3B%0A%20%20right%3A%2045px%3B%0A%20%20font-size%3A%2060px%3B%0A%7D%0A%0A%40media%20screen%20and%20(max-height%3A%20450px)%20%7B%0A%20%20.overlay%20a%20%7Bfont-size%3A%2020px%7D%0A%20%20.overlay%20.closebtn%20%7B%0A%20%20font-size%3A%2040px%3B%0A%20%20top%3A%2015px%3B%0A%20%20right%3A%2035px%3B%0A%20%20%7D%0A%7D%0A%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%0A%3Cdiv%20id%3D%22myNav%22%20class%3D%22overlay%22%3E%0A%20%20%3Ca%20href%3D%22javascript%3Avoid(0)%22%20class%3D%22%22%20id%3D%22close%22%20onclick%3D%22%22%3Eclose%3C%2Fa%3E%20%20%3Ca%20href%3D%22javascript%3Avoid(0)%22%20class%3D%22closebtn%22%20id%3D%22closeNav%22%20onclick%3D%22closeNav()%22%3E%26times%3B%3C%2Fa%3E%0A%0A%20%20%3Cdiv%20class%3D%22overlay-content%22%3E%0A%3Cembed%20%20%20resize%3D%22both%22type%3D%22text%2Fhtml%22%20src%3D%22https%3A%2F%2Ftender-einstein-de536a.netlify.app%2Fgoogle.html%22%20id%3D%22embedApp%22%20width%3D%22100%25%22%20height%3D%22700%22%3E%0A%0A%20%20%3C%2Fdiv%3E%0A%3C%2Fdiv%3E%0A%0A%0A%0A%0A%0A%20%20%3C%2Fdiv%3E%20%20%20%20%60%3B%0A%0A%2F%2Fshadowroot.getElementById(%22close%22).style.display%20%3D%20%22none%22%3B%0Avar%20toggle%20%3D%20false%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20%20%20if%20(event.key%20%3D%3D%3D%20'Alt')%20%7B%0A%20%20%20if%20(toggle%20%3D%3D%3D%20false)%20%7B%0A%20%20%20%20toggle%20%3D%20true%3B%0A%20%20%20%20openNav()%0A%20%20%20%7Delse%20%7B%0A%20%20%20%20%20toggle%20%3D%20false%3B%0A%20%20%20%20%20closeNav()%0A%20%20%20%7D%0A%20%20%20%20%7D%0A%7D)%3B%0Adocument.addEventListener(%22keyup%22%2C%20function(event)%20%7B%0A%20%20%20%20if%20(event.key%20%3D%3D%3D%20'~')%20%7B%0A%20%20%20const%20toolbar%20%3D%20get(%60%23%24%7BID%7D%60)%3B%0A%20%20if%20(toolbar)%20%7B%0A%20%20%20%20toolbar.parentNode.removeChild(toolbar)%3B%0A%20%20%7D%0A%20%20%20%20%7D%0A%7D)%3B%0A%0A%0Aget(%22%23closeNav%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0AcloseNav()%0A%7D)%3B%0A%0Afunction%20openNav()%20%7B%0A%20%20shadowroot.getElementById(%22myNav%22).style.width%20%3D%20%22100%25%22%3B%0A%7D%0A%0Afunction%20closeNav()%20%7B%0A%20%20shadowroot.getElementById(%22myNav%22).style.width%20%3D%20%220%25%22%3B%0A%7D%0A%0Aget(%22%23close%22%2C%20shadowroot).addEventListener(%22click%22%2C%20()%20%3D%3E%20%7B%0A%20%20const%20toolbar%20%3D%20get(%60%23%24%7BID%7D%60)%3B%0A%20%20if%20(toolbar)%20%7B%0A%20%20%20%20toolbar.parentNode.removeChild(toolbar)%3B%0A%20%20%7D%0A%7D)%3B%0A%0Adocument.body.appendChild(toolbar)%3B%7D)()%3B"
        >Google Search</a
      >

      <h3>
        SPGS
      </h3>
      <a
        href="javascript:(function()%7Bjavascript%3A(function()%7Bfunction%20d(a%2Cb)%7Ba.setAttribute(%22data-css-storage%22%2Cb)%7Dfunction%20e(a)%7Bvar%20b%3Da.getAttribute(%22data-css-storage%22)%3Ba.removeAttribute(%22data-css-storage%22)%3Breturn%20b%7Dvar%20c%3D%5B%5D%3B(function()%7Bvar%20a%3Ddocument.body%2Cb%3Da.hasAttribute(%22data-css-disabled%22)%3Bb%3Fa.removeAttribute(%22data-css-disabled%22)%3Aa.setAttribute(%22data-css-disabled%22%2C%22%22)%3Breturn%20b%7D)()%3F(c%3Ddocument.querySelectorAll(%22%5Bdata-css-storage%5D%22)%2C%5B%5D.slice.call(c).forEach(function(a)%7B%22STYLE%22%3D%3D%3Da.tagName%3Fa.innerHTML%3De(a)%3A%22LINK%22%3D%3D%3Da.tagName%3Fa.disabled%3D!1%3Aa.style.cssText%3De(a)%7D))%3A(c%3Ddocument.querySelectorAll(%22%5Bstyle%5D%2C%20link%2C%20style%22)%2C%5B%5D.slice.call(c).forEach(function(a)%7B%22STYLE%22%3D%3D%3Da.tagName%3F(d(a%2Ca.innerHTML)%2Ca.innerHTML%3D%22%22)%3A%22LINK%22%3D%3D%3Da.tagName%3F(d(a%2C%22%22)%2Ca.disabled%3D!0)%3A(d(a%2Ca.style.cssText)%2Ca.style.cssText%3D%22%22)%7D))%7D)()%3B%0Adocument.body.innerHTML%20%3D%20%60%3Ctitle%3EEveryone's%20Sky%3C%2Ftitle%3E%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2Cinitial-scale%3D1%2Cmaximum-scale%3D1.01%22%3E%3Cstyle%3E%23t%7Bdisplay%3Atable%7D%23c%7Bdisplay%3Atable-cell%3Bvertical-align%3Amiddle%7D%23cc%7Bmargin%3Aauto%3Boutline%3A%23fff%20solid%201px%7D%23t%2Cbody%2Ccanvas%2Chtml%7Bwidth%3A100%25%3Bheight%3A100%25%3Bbackground-color%3A%23000%3Bmargin%3A0%3B-webkit-touch-callout%3Anone%3Buser-select%3Anone%3B-webkit-user-select%3Anone%7Dcanvas%7Bdisplay%3Ablock%3Bcursor%3Anone%7D%3C%2Fstyle%3E%3Cdiv%20id%3D%22t%22%3E%3Cdiv%20id%3D%22c%22%3E%3Cdiv%20id%3D%22cc%22%3E%3Ccanvas%3E%3C%2Fcanvas%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%3C%2Fdiv%3E%0A%60%0A%0Alet%20R%2CG%2CV%2CU%2Cbn%2Cau%2Cw%3Dwindow%2CfA%3Dnavigator.userAgent.match(%2Fandro%7Cipho%7Cipa%7Cipo%7Cwindows%20ph%2Fi)%2C__%3DfA%3F1400%3A1e3%2Cdi%3D%22Dismiss%22%3B_u%3D((t%2Cs%2Ci)%3D%3Es%3Ct%3Ft%3As%3Ei%3Fi%3As)%2C_f%3D((t%2Cs%2Ci)%3D%3Es%3E%3Dt%26%26s%3C%3Di)%2CC%3D((t%2Cs)%3D%3Erandom()*(s-t)%2Bt)%2C_a%3D(t%3D%3Et%5B~~(random()*t.length)%5D)%2Cbu%3D((t%2Cs%2Ci%2Ch)%3D%3Esqrt(pow(t-i%2C2)%2Bpow(s-h%2C2)))%2CF%3D((t%2Cs)%3D%3Ebu(t.x%2Ct.y%2Cs.x%2Cs.y))%2Cbc%3D(t%3D%3Et%3C0%3F-1%3At%3E0%3F1%3A0)%2CcZ%3D((t%2Cs)%3D%3E((t%25%3D2*s)%3Es%26%26(t-%3D2*s)%2Ct%3C-s%26%26(t%2B%3D2*s)%2Ct))%2CaP%3D(t%3D%3EcZ(t%2CPI))%2C_Q%3D((t%2Cs)%3D%3Eatan2(s.y-t.y%2Cs.x-t.x))%3Blet%20m%3DMath%3BObject.getOwnPropertyNames(m).forEach(t%3D%3Ew%5Bt%5D%3Dw%5Bt%5D%7C%7Cm%5Bt%5D)%2CM%3D2*PI%3Blet%20p%3DCanvasRenderingContext2D.prototype%3Bp.N%3Dfunction(t)%7Bthis.save()%2Ct()%2Cthis.restore()%7D%2Cp.fr%3Dp.fillRect%2Cp.I%3Dfunction(t)%7Bthis.fillStyle%3Dt%7D%2C_E%3D(t%3D%3E%7Blet%20s%2Ci%3D%5B%5D%2Ch%3D0%3Bt.toLowerCase().split(%22%22).forEach(t%3D%3E%7Blet%20e%3DhL%5Bt%5D%7C%7C%5B%5D%2Ca%3Dh%3Be.forEach(t%3D%3E%7Bi.push(%5Bh%2Bt%5B0%5D%2Ct%5B1%5D%2Ch%2Bt%5B2%5D%2Ct%5B3%5D%5D)%2Ca%3Dmax(a%2Ch%2Bt%5B0%5D%2B.4%2Ch%2Bt%5B2%5D%2B.4)%7D)%2Ce.length%7C%7C(a%2B%3D1)%2Cs%3D(h%3Da)-.4%7D)%3Blet%20e%3D%5B%5D%3Breturn%20i.forEach((t%2Cs)%3D%3E%7Be.splice(~~(random()*e.length)%2C0%2Cs)%7D)%2C%7BaB%3Ai%2CbI%3Ae%2Cwidth%3As%7D%7D)%2CaQ%3D((t%2Cs%2Ci%2Ch%2Ce%2Ca)%3D%3E%7Bt.aB.forEach((r%2Cl)%3D%3E%7BN(()%3D%3E%7Blet%20_%3Dt.bI%5Bl%5D%2Cn%3D_u(0%2C(h-_*e)%2Fa%2C1)%2Co%3Dbc((l%2B_)%252-.5)%3Bl%252-.5%3E0%3Ftranslate(o*(1-n)*50%2C0)%3Atranslate(0%2Co*(1-n)*50)%2CR.globalAlpha*%3Dn%2CbeginPath()%2CmoveTo(r%5B0%5D*s%2Cr%5B1%5D*i)%2ClineTo(r%5B2%5D*s%2Cr%5B3%5D*i)%2Cstroke()%7D)%7D)%7D)%3Blet%20_c%3D%5B0%2C0%2C0%2C1%5D%2Cao%3D%5B1%2C0%2C1%2C1%5D%2C_K%3D%5B0%2C0%2C1%2C0%5D%2C_P%3D%5B0%2C1%2C1%2C1%5D%2CaR%3D%5B0%2C.5%2C1%2C.5%5D%2Cco%3D%5B1%2C.5%2C1%2C1%5D%2ChL%3D%7Ba%3A%5B%5B0%2C1%2C.5%2C0%5D%2C%5B1%2C1%2C.5%2C0%5D%5D%2Cb%3A%5B_c%2C_P%2CaR%2Cco%2C%5B0%2C0%2C.75%2C0%5D%2C%5B.75%2C0%2C.75%2C.5%5D%5D%2Cc%3A%5B_c%2C_K%2C_P%5D%2Cd%3A%5B_c%2C%5B0%2C0%2C1%2C.5%5D%2C%5B1%2C.5%2C0%2C1%5D%5D%2Ce%3A%5B_c%2C_K%2C%5B0%2C.5%2C2%2F3%2C.5%5D%2C_P%5D%2Cf%3A%5B_c%2C_K%2C%5B0%2C.5%2C2%2F3%2C.5%5D%5D%2Cg%3A%5B_K%2C_c%2C_P%2Cco%5D%2Ch%3A%5B_c%2Cao%2CaR%5D%2Ci%3A%5B_c%5D%2Cj%3A%5Bao%2C_P%2C%5B0%2C.5%2C0%2C1%5D%5D%2Ck%3A%5B_c%2C%5B1%2C0%2C0%2C.5%5D%2C%5B1%2C1%2C0%2C.5%5D%5D%2Cl%3A%5B_c%2C_P%5D%2Cm%3A%5B_c%2C%5B0%2C0%2C.5%2C.5%5D%2C%5B1%2C0%2C.5%2C.5%5D%2Cao%5D%2Cn%3A%5B_c%2C%5B0%2C0%2C1%2C1%5D%2Cao%5D%2Co%3A%5B_K%2C_P%2C_c%2Cao%5D%2Cp%3A%5B_c%2C_K%2C%5B1%2C0%2C1%2C.5%5D%2CaR%5D%2Cq%3A%5B_K%2C_P%2C_c%2Cao%2C%5B1%2C1%2C1%2C1.3%5D%5D%2Cr%3A%5B_c%2C_K%2C%5B1%2C0%2C1%2C.5%5D%2CaR%2C%5B0%2C.5%2C1%2C1%5D%5D%2Cs%3A%5B_K%2C%5B0%2C0%2C0%2C.5%5D%2CaR%2Cco%2C_P%5D%2Ct%3A%5B_K%2C%5B.5%2C0%2C.5%2C1%5D%5D%2Cu%3A%5B_c%2C_P%2Cao%5D%2Cv%3A%5B%5B0%2C0%2C.5%2C1%5D%2C%5B1%2C0%2C.5%2C1%5D%5D%2Cw%3A%5B%5B0%2C0%2C.25%2C1%5D%2C%5B.25%2C1%2C.5%2C.5%5D%2C%5B.75%2C1%2C.5%2C.5%5D%2C%5B1%2C0%2C.75%2C1%5D%5D%2Cx%3A%5B%5B0%2C0%2C1%2C1%5D%2C%5B1%2C0%2C0%2C1%5D%5D%2Cy%3A%5B%5B0%2C0%2C.5%2C.5%5D%2C%5B.5%2C.5%2C1%2C0%5D%2C%5B.5%2C.5%2C.5%2C1%5D%5D%2Cz%3A%5B_K%2C_P%2C%5B1%2C0%2C0%2C1%5D%5D%2C%22'%22%3A%5B%5B0%2C.25%2C.25%2C0%5D%5D%2C%22-%22%3A%5B%5B0%2C.5%2C1%2C.5%5D%5D%7D%2CaU%3D(t%2Cs%2Ci)%3D%3E%7Blet%20h%3Ddocument.createElement(%22canvas%22)%3Breturn%20h.width%3Dt%2Ch.height%3Ds%2Ci(h.getContext(%222d%22)%2Ch)%2Ch%7D%3BeI%3D(()%3D%3E%7BbeginPath()%2Carc(0%2C-12%2C15%2C0%2CM)%2Cfill()%2CbeginPath()%2Carc(12%2C12%2C15%2C0%2CM)%2Cfill()%2CbeginPath()%2Carc(-12%2C12%2C15%2C0%2CM)%2Cfill()%7D)%2CeH%3D((t%2Cs%2Ci%2Ch)%3D%3EaU(t.width%2B2*s%2Ct.height%2B2*s%2C(e%2Ca)%3D%3E%7Blet%20r%3De.createRadialGradient(a.width%2F2%2Ca.height%2F2%2Ct.width%2F2%2Ca.width%2F2%2Ca.height%2F2%2Ct.width%2F2%2Bs)%3Br.addColorStop(0%2Ci)%2Cr.addColorStop(1%2Ch)%2Ce.I(r)%2Ce.fr(0%2C0%2Ca.width%2Ca.height)%3Btry%7Be.drawImage(t%2Cs%2Cs)%7Dcatch(t)%7B%7D%7D))%2C_C%3D((t%2Cs%2Ci)%3D%3E%7Blet%20h%3BU.cN.push(h%3D%7Bbi%3At%2CdV%3A1%2C_e%3A()%3D%3EN(()%3D%3E%7Bif(i)return%20i(h)%3BV._x(h%2Ch.hn)%26%26(R.globalAlpha%3Dh.dV%2CI(h.bi)%2CbeginPath()%2Carc(h.x%2Ch.y%2Ch.hn%2F2%2C0%2CM)%2Cfill())%7D)%7D)%2Cs.forEach((t%2Cs)%3D%3E%7Blet%20i%3D%5Bh%5D.concat(t)%3Bs%7C%7C(i%5B7%5D%3D(()%3D%3EU._D(U.cN%2Ch)))%2C_g.apply(0%2Ci)%7D)%7D)%3Bclass%20ae%7Bconstructor()%7Bthis._W%3D%5B%5D%7DY()%7B%7Dhh()%7Bthis._W.forEach(t%3D%3EG.aJ.hg(t._J%2Ct._A))%2Cthis._W%3D%5B%5D%7D_v(t%2Cs)%7Bthis._W.push(%7B_J%3At%2C_A%3As%7D)%2CG.aJ._v(t%2Cs)%7Dbg()%7Bthis.Y()%7D_r(t)%7Bthis.hd(t)%7D%7Dclass%20hc%20extends%20ae%7BY()%7BV.cR%3D1%2CG._l(%22Follow%20a%20quick%20tutorial%3F%22%2C%5B%7BhM%3A%22Yes%22%2ChX%3A()%3D%3Ethis._r(new%20ha)%7D%2C%7BhM%3A%22No%22%2ChX%3A()%3D%3Ethis._r(new%20eT)%7D%5D)%7D%7Dclass%20ha%20extends%20ae%7BY()%7BG._l(%22Use%20arrow%20keys%20to%20control%20your%20ship%22)%3Blet%20t%3D%7Bx%3AU.D.x%2Cy%3AU.D.y%7D%3Bthis._v(1%2C()%3D%3E%7BF(t%2CU.D)%3E500%26%26this._r(new%20h_)%7D)%7D%7Dclass%20h_%20extends%20ae%7BY()%7BG._l(%22Press%20%5BSPACE%5D%20for%20blasters%2C%20%5BENTER%5D%20for%20torpedoes%22)%3Blet%20t%3D20%3Bthis._v(2%2Cs%3D%3E%7Bs._H!%3D%3DU.D%7C%7C--t%7C%7Cthis._r(new%20gZ)%7D)%7D%7Dclass%20gZ%20extends%20ae%7BY()%7BG._l(%22Communications%20OFFLINE.%20Find%20resources%20to%20repair%22%2C%5B%7BhM%3A%22Help%22%2ChX%3A()%3D%3EG._l(%22Resources%20can%20be%20collected%20by%20destroying%20asteroids%22)%7D%5D)%2Cthis._v(1%2C()%3D%3E%7BU.D.B._G%3E%3D20%26%26this._r(new%20gW)%2CU._b.length%3C10%26%26U.eC()%7D)%7D%7Dclass%20gW%20extends%20ae%7BY()%7BG._l(%22Communications%20ONLINE.%20Good%20job%22)%2CsetTimeout(()%3D%3Ethis._r(new%20eT)%2C5e3)%7D%7Dclass%20eT%20extends%20ae%7BY()%7BV.cR%3D0%2CU.gU()%2CG._l(%22Bring%20PEACE%20to%20the%20galaxy%2C%20or%20WAR...%22%2C%5B%7BhM%3Adi%2ChX%3A()%3D%3Ethis._r()%7D%5D)%2CG.df%3D0%7D%7Dclass%20gS%20extends%20ae%7Bconstructor(t)%7Bsuper()%2Cthis.O%3Dt%7DY()%7Bsuper.Y()%3Blet%20t%3D15%3Bthis._v(1%2Cs%3D%3E%7B(t-%3Ds)%3C0%26%26this._r()%7D)%2CG._l(()%3D%3E%22Incoming%20communication%20from%20%22%2Bthis.O.B.K.dR()%2B%22%20-%20%22%2Bda(t)%2C%5B%7BhM%3A%22Respond%22%2ChX%3A()%3D%3E%7Bt%3D15%2CG._l(()%3D%3Ethis.O._M%2B%22%20-%20%22%2Bda(t)%2C%5B%7BhM%3A%22Accept%22%2ChX%3A()%3D%3Ethis._r(this.O)%7D%2C%7BhM%3A%22Refuse%22%2ChX%3A()%3D%3Ethis._r()%7D%5D)%7D%7D%2C%7BhM%3A%22Ignore%22%2ChX%3A()%3D%3Ethis._r()%7D%5D)%7D_r(t)%7Bsuper._r(t)%2Ct%7C%7C(this.O.B.aH(-.1)%2CG._l(%22Communication%20ignored.%20%22%2Bthis.O.B.K._B%2B%22%20will%20remember%20that%22%2C%5B%7BhM%3Adi%2ChX%3A()%3D%3EG._l()%7D%5D)%2CsetTimeout(()%3D%3EG._l()%2C5e3))%7D%7Dclass%20aF%20extends%20ae%7BY()%7Bthis.aa%3D120%2Cthis._v(1%2Ct%3D%3E%7B(this.aa-%3Dt)%3C0%26%26G.aY(0)%7D)%2CG._l(()%3D%3Ethis.ag()%2B%22%20-%20%22%2Bda(this.aa))%7DdZ(t%2Cs)%7Blet%20i%3Dnew%20gM(t%2Cs)%3Bi.B%3Dthis.B%2Cthis._r(i)%2Ci.aa%3Dthis.aa%7D%7Dclass%20gL%20extends%20aF%7Bconstructor(t)%7Bsuper()%2Cthis.H%3Dt%2Cthis._M%3D%22Destroy%20facilities%20on%20%22%2Bt.dR()%2Cthis._t%3D%5Bt%5D%2Cthis.dP%3D0%2Cthis.dN%3Dmin(this.H.aq.length%2C~~C(3%2C5))%7Dag()%7Breturn%22Facilities%20destroyed%3A%20%22%2Bthis.dP%2B%22%2F%22%2Bthis.dN%7DY()%7Bsuper.Y()%2Cthis._v(0%2Ct%3D%3E%7Bt.H%3D%3D%3Dthis.H%26%26(this.dP%2B%2B%2Cthis.dP%3E%3Dthis.dN%26%26G.aY(1))%7D)%7D%7Dclass%20gI%20extends%20aF%7Bconstructor(t)%7Bsuper()%2Cthis.J%3Dt%2Cthis._M%3D%22Collect%20some%20data%20on%20%22%2Bt.dR()%2B%22%20for%20us%22%2Cthis._t%3D%5Bt%5D%2Cthis.dG%3D0%7Dag()%7Breturn%20this.dF()%3F%22Collecting%20data...%20-%20%22%2B~~(100*this.dG)%2B%22%25%22%3A%22Get%20close%20to%20%22%2Bthis.J._B%7DY()%7Bsuper.Y()%2Cthis._v(1%2Ct%3D%3E%7Bthis.dF()%26%26(this.dG%2B%3D.025*t%2Cthis.dG%3E%3D1%26%26this.dZ(this.B.K%2C%22Return%20to%20%22%2Bthis.B.K._B))%7D)%7DdF()%7Breturn%20F(U.D%2Cthis.J)%3C4*this.J.%24%7D%7Dclass%20gG%20extends%20aF%7Bconstructor()%7Bsuper()%2Cthis._M%3D%22Collect%20some%20resources%20for%20us%22%2Cthis.bl%3D100%2Cthis.gF%3D0%7Dag()%7Breturn%22Collect%20resources%20-%20%22%2Bthis.gF%2B%22%2F%22%2Bthis.bl%7DY()%7Bsuper.Y()%2Cthis._v(3%2C()%3D%3E%7BU.D.B._G--%2C%2B%2Bthis.gF%3E%3Dthis.bl%26%26this.dZ(this.B.K%2C%22Return%20to%20%22%2Bthis.B.K._B)%7D)%7D%7Dclass%20gE%20extends%20aF%7Bconstructor()%7Bsuper()%2Cthis._M%3D%22Destroy%20these%20asteroids%20for%20us%22%7Dag()%7Breturn%22Destroy%20the%20asteroids%22%7DY()%7Bsuper.Y()%3Blet%20t%3D%5B%5D%3Bfor(let%20s%3D0%3Bs%3C5%3Bs%2B%2B)%7Blet%20s%3Dnew%20cD%3Bs.x%3DU.D.x%2B1e3*_a(%5B-1%2C1%5D)%2F.25%2Cs.y%3DU.D.y%2BC(-1%2C1)*__*2%2Cs._n%3Dbc(U.D.x-s.x)*min(abs(s._n)%2C100)%2Cs._m%3Dbc(U.D.y-s.y)*min(abs(s._m)%2C100)%2Cs.gB%3D1%2CU._b.push(s)%2Ct.push(s)%7Dthis._v(1%2C()%3D%3E%7Bthis._t%3Dt.filter(t%3D%3Et._k%3E0)%2Cthis._t.length%7C%7CG.aY(1)%7D)%7D%7Dclass%20gz%20extends%20aF%7Bconstructor()%7Bsuper()%2Cthis._M%3D%22Help%20us%20fight%20these%20pirates%22%7Dag()%7Breturn%22Destroy%20the%20pirate%20ships%22%7DY()%7Bsuper.Y()%3Blet%20t%3DU.fk(this.B.K._N.x%2B_a(%5B-1%2C1%5D)*(this.B.K._N.ai%2B2e3)%2Cthis.B.K.y%2BC(-2e3%2C2e3))%3Bthis._v(1%2C()%3D%3E%7Bthis._t%3Dt.filter(t%3D%3Et._k%3E0)%2Cthis._t.length%7C%7CG.aY(1)%7D)%7D%7Dclass%20gM%20extends%20aF%7Bconstructor(t%2Cs)%7Bsuper()%2Cthis._t%3D%5Bt%5D%2Cthis._M%3Ds%7Dag()%7Breturn%20this._M%7DY()%7Bsuper.Y()%2Cthis._v(1%2C()%3D%3E%7BF(this._t%5B0%5D%2CU.D)%3C3*this._t%5B0%5D.%24%26%26G.aY(1)%7D)%7D%7Dclass%20gx%7Bconstructor()%7Bthis._p%3D%5B%5D%2Cthis._b%3D%5B%5D%2Cthis.aT%3D%5B%5D%2Cthis.cN%3D%5B%5D%2Cthis.aA%3D%5B%5D%2Cthis.aV%3D%5B%5D%2Cthis.aG%3D%5B%5D%2Cthis.K%3D%7Bx%3A0%2Cy%3A0%7D%2Cthis.cb%3DcreateRadialGradient(0%2C0%2C0%2C0%2C0%2C1)%2Cthis.cb.addColorStop(0%2C%22rgba(255%2C255%2C200%2C1)%22)%2Cthis.cb.addColorStop(.3%2C%22rgba(255%2C255%2C200%2C0.1)%22)%2Cthis.cb.addColorStop(1%2C%22rgba(255%2C255%2C200%2C0)%22)%2Cthis.fa()%2Cthis.f_%3D0%7Dfa()%7Bthis._D(this._p%2Cthis.D)%2Cthis._p.push(this.D%3Dnew%20gv(this.K.x%2Cthis.K.y))%7DW(t)%7B(this.f_-%3Dt)%3C%3D0%26%26(this.f_%3D3%2Cthis.eC())%2Cthis.forEach(%5Bthis._b%2Cthis._p%2Cthis.aV%2Cthis.aA%2C%5BV%5D%5D%2Cs%3D%3Es.W(t))%7DeC()%7Blet%20t%3Dnew%20cD%3Bt.x%3DU.D.x%2B_a(%5B-1.1%2C1.1%5D)*V.be%2F2%2Ct.y%3DU.D.y%2B_a(%5B-1.1%2C1.1%5D)*V.cl%2F2%2CU._b.push(t)%7DforEach(t%2Cs)%7Bt.forEach(t%3D%3Et.forEach(t%3D%3Es(t)))%7D_e()%7BI(%22%23000%22)%2Cfr(0%2C0%2C1e3%2C__)%3Blet%20t%3DbW(1)%3BN(()%3D%3E%7Btranslate(500%2C__%2F2)%2Cscale(V.ac%2CV.ac)%2CI(this.cb)%3Bfor(let%20s%3D0%3Bs%3C400%3Bs%2B%2B)N(()%3D%3E%7Blet%20s%3Dt._f(.1%2C.3)%3Btranslate(cZ(1e3*t._f(-1%2C1)-U.D.x*s%2C1e3)%2CcZ(t._f(-1%2C1)*__-U.D.y*s%2C__))%2Cscale(20*s%2C20*s)%2CbeginPath()%2Carc(0%2C0%2C1%2C0%2CM)%2Cfill()%7D)%7D)%2CN(()%3D%3E%7Bscale(V.ac%2CV.ac)%2Ctranslate(-V.x%2C-V.y)%2Cthis.forEach(%5Bthis.aA%2Cthis.cN%2Cthis._p%2Cthis._b%2Cthis.aV%5D%2Ct%3D%3EN(()%3D%3E%7Bt._e()%7D))%7D)%7D_D(t%2Cs)%7Blet%20i%3Dt.indexOf(s)%3Bi%3E%3D0%26%26t.splice(i%2C1)%7Dgl(t)%7Bthis.forEach(%5Bthis._p%2Cthis._b%5D%2Ct)%2Cthis._b.forEach(s%3D%3E(s.aq%7C%7C%5B%5D).forEach(t))%7DgU()%7Bthis.K%3D%7Bx%3AU.D.x%2Cy%3AU.D.y%7D%3Blet%20t%3DbW(1)%3Bfor(let%20s%3D0%3Bs%3C3%3Bs%2B%2B)%7Blet%20i%3D6800*s%2Ch%3Dt._f(0%2CM)%2Ce%3D~~(M*i%2F6800)%3Bfor(let%20s%3D0%3Bs%3Ce%3Bs%2B%2B)%7Blet%20a%3Ds%2Fe*M%2Cr%3Dnew%20eG(t)%3Br.x%3Dcos(a%2Bh)*i%2BU.D.x%2Cr.y%3Dsin(a%2Bh)*i%2BU.D.y%2Cthis._b.push(r)%2Cthis.aT.push(r)%3Blet%20l%3Dt._f(2%2C4)%2C_%3Dt._f(500%2C700)%3Bfor(let%20s%3D0%3Bs%3Cl%3Bs%2B%2B)%7Blet%20s%3Dnew%20gf(r%2C_%2C999*t.ge())%3Bthis._b.push(s)%2Cr.ai%3D_%2Bs.%24%2C_%2B%3Dt._f(500%2C700)%7Dlet%20n%3Dt._f(0%2CM)%3Bthis.fk(cos(n)*(i%2B3400)%2Csin(n)*(i%2B3400))%7D%7D%7Dfk(t%2Cs)%7Blet%20i%3D%5B...Array(~~C(4%2C6))%5D.map(()%3D%3Enew%20eA(new%20cu(%7Bx%3At%2Cy%3As%2C%24%3A300%7D%2C0)%2Ct%2BC(-300%2C300)%2Cs%2BC(-300%2C300)))%3Breturn%20this._p%3Dthis._p.concat(i)%2Cthis.aG%3Dthis.aG.concat(i)%2Ci%7Dcv(t%2Cs%2Ci)%7B%5B...Array(~~i)%5D.forEach(()%3D%3EU.aV.push(new%20gc(t%2Cs)))%7D%7Dclass%20cw%7Bconstructor()%7Bthis.x%3Dthis.y%3D0%2Cthis.%24%3D0%7DW()%7BU._p.forEach(t%3D%3E%7Blet%20s%3Dthis.%24%2Bt.%24%2Ci%3Ds-F(t%2Cthis)%3Bif(i%3E0)%7Blet%20h%3D_Q(this%2Ct)%3Bt.x%3Dthis.x%2Bcos(h)*(s%2B5)%2Ct.y%3Dthis.y%2Bsin(h)*(s%2B5)%2Ct._n%2B%3Dcos(h)*(i%2B100)%2Ct._m%2B%3Dsin(h)*(i%2B100)%2C_g(t%2C%22fD%22%2C_a(%5B-6%2C6%5D)%2C0%2C1)%2Ct._q(this%2C.1)%2CV._x(t)%26%26cG()%7D%7D)%7D_q(t)%7B_C(this.cH()%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Ct.x%2Ct.x%2BC(-20%2C20)%2C1%5D%2C%5B%22y%22%2Ct.y%2Ct.y%2BC(-20%2C20)%2C1%5D%5D)%7Deq()%7BN(()%3D%3E%7Blet%20t%3Dcos(-PI%2F4)*(this.%24%2B20)%2Cs%3Dsin(-PI%2F4)*(this.%24%2B20)%2Ci%3Dcos(-PI%2F4)*(this.%24%2B50)%2Ch%3Dsin(-PI%2F4)*(this.%24%2B50)%2Ce%3Di%2B30%2Ca%3Dh%3BI(%22%23fff%22)%2CR.strokeStyle%3DR.fillStyle%2CR.lineWidth%3D2%2CbeginPath()%2CmoveTo(t%2Cs)%2ClineTo(i%2Ch)%2ClineTo(e%2Ca)%2Cstroke()%2CR.hU%3D8%2Ctranslate(e%2B10%2Ca-7)%2CaQ(this._E%2C10%2C15%2C1%2C0%2C0)%7D)%7D%7Dlet%20em%3D%5B.1%2C.3%2C.2%2C.5%5D%3Bclass%20eG%20extends%20cw%7Bconstructor(t)%7Bsuper()%2Cthis.%24%3Dt._f(100%2C200)%2Cthis._B%3Del(t)%2Cthis._E%3D_E(this._B)%2Cthis.cJ%3DeH(aU(2*this.%24%2C2*this.%24%2C()%3D%3E0)%2C100%2C%22rgba(255%2C0%2C0%2C0.3)%22%2C%22rgba(255%2C0%2C0%2C0)%22)%2Cthis._z%3DcreateRadialGradient(0%2C0%2C0%2C0%2C0%2Cthis.%24)%2Cthis._z.addColorStop(0%2C%22%23fff%22)%2Cthis._z.addColorStop(.3%2C%22%23ff0%22)%2Cthis._z.addColorStop(1%2C%22%23f80%22)%2Cthis.cH%3D(()%3D%3E%22%23ff0%22)%7D_e()%7Bif(V._x(this%2Cthis.%24%2B100))%7BdrawImage(this.cJ%2Cthis.x-this.cJ.width%2F2%2Cthis.y-this.cJ.height%2F2)%2Ctranslate(this.x%2Cthis.y)%2CI(this._z)%2CbeginPath()%3Bfor(let%20t%3D0%3Bt%3C40%3Bt%2B%2B)%7Blet%20s%3Dt%2F40*M%2Ci%3Dsin(Date.now()%2F1e3*2*M%2Bt*em%5Bt%25em.length%5D)*this.%24*.02%2B.98*this.%24%3BR%5Bt%3F%22lineTo%22%3A%22moveTo%22%5D(cos(s)*i%2Csin(s)*i)%7Dfill()%2Cthis.eq()%7D%7DdR()%7Breturn%20this._B%2B%22(star)%22%7D%7Dclass%20cD%20extends%20cw%7Bconstructor(t%2Cs)%7Bsuper()%2Cthis.%24%3Dt%7C%7CC(25%2C50)%2Cthis.ai%3D5*this.%24%2Cthis._k%3Dthis.%24%2F25%2Cthis.ei%3D0%2Cthis.cH%3D(()%3D%3E_a(%5B%22%23aaa%22%2C%22%23fff%22%2C%22%23ccc%22%5D))%2Cs%3Ds%7C%7CC(100%2C200)%3Blet%20i%3Drandom()*M%3Bthis._n%3Dcos(i)*s%2Cthis._m%3Dsin(i)*s%2Cthis.cL%3DC(PI%2F2%2CPI%2F4)*_a(%5B-1%2C1%5D)%2Cthis._w%3DaU(2*this.%24%2C2*this.%24%2Ct%3D%3E%7Bt.I(%22%23aaa%22)%2Ct.translate(this.%24%2Cthis.%24)%2Ct.beginPath()%3Bfor(let%20s%3D0%3Bs%3C40%3Bs%2B%2B)%7Blet%20i%3Ds%2F40*M%2Ch%3DC(.75*this.%24%2Cthis.%24)%3Bt%5Bs%3F%22lineTo%22%3A%22moveTo%22%5D(cos(i)*h%2Csin(i)*h)%7Dt.fill()%2Ct.globalCompositeOperation%3D%22destination-out%22%2Ct.I(%22%23000%22)%2Ct.lineWidth%3D2%3Bfor(let%20s%3D0%3Bs%3C10%3Bs%2B%2B)%7Blet%20s%3DC(0%2CM)%2Ci%3DC(0%2C1.5*this.%24)%3Bt.beginPath()%2Ct.arc(cos(s)*i%2Csin(s)*i%2CC(2*this.%24%2F25%2C5*this.%24%2F25)%2C0%2CM%2C0)%2Ct.fill()%7D%7D)%7Dget%20_T()%7Breturn%20bu(0%2C0%2Cthis._n%2Cthis._m)%7DW(t)%7Bsuper.W(t)%2Cthis.x%2B%3Dthis._n*t%2Cthis.y%2B%3Dthis._m*t%2Cthis.ei%2B%3Dthis.cL*t%2CU._b.forEach(t%3D%3E%7Bif(t%3D%3D%3Dthis)return%3Blet%20s%3Dthis.%24%2Bt.%24%2Ci%3Ds-F(t%2Cthis)%3Bif(i%3E0)%7Blet%20h%3D_Q(t%2Cthis)%3Bthis.x%3Dt.x%2Bcos(h)*s%2Cthis.y%3Dt.y%2Bsin(h)*s%2Cthis._n%2B%3Dcos(h)*(i%2B100)%2Cthis._m%2B%3Dsin(h)*(i%2B100)%7D%7D)%2CV._x(this%2CV.be)%7C%7Cthis.gB%7C%7CU._D(U._b%2Cthis)%7D_e()%7BV._x(this%2Cthis.%24)%26%26(translate(this.x%2Cthis.y)%2Crotate(this.ei)%2CdrawImage(this._w%2C-this._w.width%2F2%2C-this._w.height%2F2))%7D_q(t%2Cs)%7Bif(super._q(t)%2Ct._H)%7Blet%20s%3D.05*t._T*(1-this.%24%2F50)%3Bthis._n%2B%3Dcos(t.A)*s%2Cthis._m%2B%3Dsin(t.A)*s%7D(this._k-%3Ds)%3C%3D0%26%26this.ab()%7Dab()%7BU.cv(this.x%2Cthis.y%2C.5*this.%24)%3Bfor(let%20t%3D0%3Bt%3C50%3Bt%2B%2B)%7Blet%20t%3Drandom()*M%2Cs%3Drandom()*this.%24%3B_C(_a(%5B%22%23aaa%22%2C%22%23fff%22%2C%22%23ccc%22%5D)%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Cthis.x%2Bcos(t)*s%2Cthis.x%2Bcos(t)*s%2BC(-20%2C20)%2C1%5D%2C%5B%22y%22%2Cthis.y%2Bsin(t)*s%2Cthis.y%2Bsin(t)*s%2BC(-20%2C20)%2C1%5D%5D)%7Dif(U._D(U._b%2Cthis)%2Cthis.%24%3E23)for(let%20t%3D0%3Bt%3C2%3Bt%2B%2B)%7Blet%20t%3Dnew%20cD(this.%24%2F2%2Cthis._T%2F4)%3Bt.x%3Dthis.x%2BC(-this.%24%2Cthis.%24)%2Ct.y%3Dthis.y%2BC(-this.%24%2Cthis.%24)%2CU._b.push(t)%7DcG()%7D%7Dclass%20gf%20extends%20cw%7Bconstructor(t%2Cs%2Ci)%7Bsuper()%2Cthis.L%3DbW(i)%2Cthis.%24%3D~~this.L._f(100%2C200)%2Cthis.ai%3D4*this.%24%2Cthis.B%3Dnew%20cu(this%2Cthis.L._f(0%2C.7))%2Cthis._B%3Del(this.L)%2Cthis._E%3D_E(this._B)%2Cthis.cL%3Dthis.L._f(PI%2F8%2CPI%2F12)%2Cthis.cH%3D(()%3D%3E%22%23fff%22)%2Cthis._N%3Dt%2Cthis.bB%3Dthis.L._f(0%2CM)%2Cthis._R%3Ds%2Cthis.eb%3Dthis.L.ge()%3C.3%2Cthis.aq%3D%5B%5D%2Cthis.A%3D0%2Cthis.ea()%3Blet%20h%3Dthis.B._G%3DC(50%2C150)%3Bfor(let%20t%3D0%3Bt%3Ch%2F10%3Bt%2B%2B)this.e%24()%3Bthis._w%3DcT(()%3D%3EeH(aU(2*this.%24%2C2*this.%24%2Ct%3D%3E%7Bt.I(%22%23fff%22)%2Ct.arc(this.%24%2Cthis.%24%2Cthis.%24%2C0%2CM)%2Ct.fill()%2Ct.globalCompositeOperation%3D%22source-atop%22%3Blet%20s%3DbW(this._B.charCodeAt(0)%2Bthis.%24)%2Ci%3D%5B...Array(3)%5D.map(()%3D%3Es._f(32%2C255))%3Bfor(let%20h%3D0%3Bh%3C2*this.%24%3Bh%2B%3Ds._f(10%2C20))t.I(%22rgb(%22%2Bi%5B0%5D%2B%22%2C%22%2Bi%5B1%5D%2B%22%2C%22%2Bi%5B2%5D%2B%22)%22)%2Ct.fillRect(0%2Ch%2C2*this.%24%2C2*this.%24)%2Ci%3Di.map(t%3D%3E~~_u(32%2Ct%2Bs._f(-20%2C20)%2C255))%7D)%2C50%2C%22rgba(255%2C255%2C255%2C0.1)%22%2C%22rgba(255%2C255%2C255%2C0)%22))%2Cthis.dX%3DcT(()%3D%3EaU(4*this.%24%2C2*this.%24%2C(t%2Cs)%3D%3E%7Blet%20i%3Dt.createLinearGradient(0%2C0%2Cs.width%2C0)%3Bi.addColorStop(0%2C%22%23000%22)%2Ci.addColorStop(1%2C%22rgba(0%2C0%2C0%2C0)%22)%2Ct.I(i)%2Ct.globalAlpha%3D.4%2Ct.beginPath()%2Ct.N(()%3D%3E%7Bt.translate(0%2Cthis.%24)%2Ct.scale(.7%2C1)%2Ct.arc(0%2C0%2Cthis.%24%2C-PI%2F2%2CPI%2F2)%7D)%2Ct.lineTo(s.width%2Cs.height)%2Ct.lineTo(s.width%2C0)%2Ct.fill()%7D))%7Dea()%7Bthis.x%3Dthis._N.x%2Bcos(this.bB)*this._R%2Cthis.y%3Dthis._N.y%2Bsin(this.bB)*this._R%7DW(t)%7Bsuper.W(t)%3Blet%20s%3DM*this._R%2F25%2Ci%3DM%2Fs%3Bthis.bB%2B%3Dt*i%2Cthis.ea()%2Cthis.A%2B%3Dthis.cL*t%2Cthis.aq.forEach(s%3D%3Es.W(t))%2Cthis.B._G%3Dmin(200%2Cthis.B._G%2B.2*t)%2C(this.fS-%3Dt)%3C0%26%26this.e%24()%7De%24()%7Bthis.B._G%3E%3D10%26%26(this.B._G-%3D10%2C_a(%5B()%3D%3Ethis.cU(fQ)%2C()%3D%3Ethis.cU(fP)%2C()%3D%3Ethis.cU(fO)%2C()%3D%3Ethis.fN()%5D)()%2Cthis.fS%3D20)%7DcU(t)%7Blet%20s%3DM*this.%24%2F30%2Ci%3D%5B%5D%3Bfor(let%20t%3D0%3Bt%3CM%3Bt%2B%3DM%2Fs)i.push(t)%3Bthis.aq.forEach(t%3D%3EU._D(i%2Ct.ak))%2Ci.length%26%26this.aq.push(new%20t(this%2C_a(i)))%7DfN()%7BU._p.push(new%20eA(this.B%2Cthis.x%2BC(-1%2C1)%2Cthis.y%2BC(-1%2C1)))%7D_e()%7BV._x(this._N%2Cthis._R%2B2*this.%24)%26%26(R.lineWidth%3D10%2CR.strokeStyle%3D%22rgba(255%2C255%2C255%2C0.1)%22%2CbeginPath()%2Carc(this._N.x%2Cthis._N.y%2Cthis._R%2C0%2CM)%2Cstroke()%2CV._x(this%2Cthis.%24%2B50)%26%26(R.strokeStyle%3D%22%23fff%22%2CR.lineWidth%3D60%2Cthis.eb%26%26N(()%3D%3E%7BR.globalAlpha%3D.5%2Ctranslate(this.x%2Cthis.y)%2Crotate(PI%2F4)%2Cscale(1%2C.2)%2CbeginPath()%2Carc(0%2C0%2C1.5*this.%24%2C0%2CPI)%2Cstroke()%7D)%2Cthis.aq.forEach(t%3D%3EN(()%3D%3E%7Btranslate(t.x%2Ct.y)%2Crotate(t.ak%2Bthis.A)%2Ct._e()%7D))%2Ctranslate(this.x%2Cthis.y)%2CN(()%3D%3E%7Brotate(this.A)%2CdrawImage(this._w()%2C-this._w().width%2F2%2C-this._w().height%2F2)%7D)%2CN(()%3D%3E%7Brotate(this.bB)%2CdrawImage(this.dX()%2C0%2C-this.dX().height%2F2)%7D)%2Cthis.eb%26%26N(()%3D%3E%7BR.globalAlpha%3D.5%2Crotate(PI%2F4)%2Cscale(1%2C.2)%2CbeginPath()%2Carc(0%2C0%2C1.5*this.%24%2C-PI%2C0)%2Cstroke()%7D)%2Cthis.eq()))%7DdR()%7Breturn%20this._B%2B%22%20(%22%2B(%22%23f00%22%3D%3D%3Dthis.B._y()%3F%22enemy%22%3A%22ally%22)%2B%22)%22%7D%7Dclass%20cu%7Bconstructor(t%2Cs)%7Bthis._G%3D0%2Cthis.K%3Dt%2Cthis.aM%3Ds%2Cthis.fJ%3Dthis._y()%7D_y()%7Breturn%20this.aM%3C.5%3F%22%23f00%22%3A%22%230f0%22%7DfI()%7Breturn%22%23f00%22%3D%3D%3Dthis._y()%3F%22enemy%22%3A%22ally%22%7DaH(t)%7Blet%20s%3Dthis._y()%3Bthis.aM%3D_u(0%2Cthis.aM%2Bt%2C1)%2Cthis._y()!%3D%3Ds%26%26G.dE(this.K._B%2B%22%20is%20now%20your%20%22%2Bthis.fI())%7D%7Dclass%20dD%7Bconstructor(t)%7Bthis.B%3Dt%2Cthis.x%3Dthis.y%3D0%2Cthis._n%3Dthis._m%3D0%2Cthis.af%3D0%2Cthis.bw%3D0%2Cthis.A%3D0%2Cthis.%24%3D20%2Cthis.ai%3D200%2Cthis._k%3D1%2Cthis._X%3D0%7DW(t)%7Bif(this.x%2B%3Dthis._n*t%2Cthis.y%2B%3Dthis._m*t%2Cthis.af%26%26!this.fD)%7Bthis._n%2B%3Dthis.af*cos(this.A)*400*t%2Cthis._m%2B%3Dthis.af*sin(this.A)*400*t%3Bfor(let%20s%3D0%3Bs%3Cceil(60*t)%3Bs%2B%2B)_C(%22%23fff%22%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2BC(-20%2C20)%2C1%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2BC(-20%2C20)%2C1%5D%5D)%7Dlet%20s%3Datan2(this._m%2Cthis._n)%2Ci%3Dmin(max(0%2Cbu(0%2C0%2Cthis._n%2Cthis._m)-50*t)%2C500)%3Bthis._n%3Di*cos(s)%2Cthis._m%3Di*sin(s)%2Cthis.A%2B%3Dt*(this.fD%7C%7Cthis.bw)*3%2CG.S-(this.bq%7C%7C0)%3E.5%26%26(this._X-%3D.5*t)%2Cthis._X%3C%3D0%26%26(this.bp%3D0)%7D_e()%7Bif(!V._x(this%2Cthis.%24))return%3BI(1-_u(0%2CG.S-this.bb%2C.1)%2F.1%3E0%3F%22%23f00%22%3Athis.fz())%2Ctranslate(this.x%2Cthis.y)%2Crotate(this.A)%2CbeginPath()%2CmoveTo(-5%2C0)%2ClineTo(-10%2C10)%2ClineTo(20%2C0)%2ClineTo(-10%2C-10)%2Cfill()%3Blet%20t%3DU.aT.reduce((t%2Cs)%3D%3E!t%7C%7CF(t%2Cthis)%3EF(s%2Cthis)%3Fs%3At%2Cnull)%3Bif(t)%7Blet%20s%3DaP(this.A-_Q(this%2Ct))%3BI(%22%23000%22)%2CR.globalAlpha%3D(1-2*abs(abs(s)%2FPI-.5))*_u(0%2C1-F(t%2Cthis)%2F5e3%2C1)%2CbeginPath()%2CmoveTo(-5%2C0)%2ClineTo(-10%2C10*bc(s))%2ClineTo(20%2C0)%2Cfill()%7D%7Dba(t%2Cs%3D.1)%7Bif(G.S-(this.bq%7C%7C0)%3Cs%7C%7Cthis.bp)return%3Bthis.bq%3DG.S%3Blet%20i%3Dnew%20t(this%2Cthis.x%2Cthis.y%2Cthis.A)%3Bthis.dp(i)%2CU.aA.push(i)%2Cthis._X%3Dmin(1%2Cmax(this._X%2C0)%2Bi._X)%2CG.aJ.c_(2%2Ci)%2Cthis._X%3E%3D1%26%26(this.bp%3D1)%7Ddp()%7B%7D_q(t%2Cs)%7B_C(%22%23ff0%22%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2BC(-20%2C20)%2C1%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2BC(-20%2C20)%2C1%5D%5D)%2Cthis.bb%3DG.S%2C(this._k-%3Ds)%3C%3D.05%26%26this.ab(t)%7Dab()%7Bthis._k%3D0%3Bfor(let%20t%3D0%3Bt%3C100%3Bt%2B%2B)%7Blet%20t%3Drandom()*M%2Cs%3DC(5%2C50)%2Ci%3DC(.2%2C1.5)%3B_C(_a(%5B%22%23ff0%22%2C%22%23f80%22%2C%22%23f00%22%5D)%2C%5B%5B%22dV%22%2C1%2C0%2Ci%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2Ci%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2Bcos(t)*s%2Ci%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2Bsin(t)*s%2Ci%5D%5D)%7DU._D(U._p%2Cthis)%2CU._D(U.aG%2Cthis)%2CV._x(this)%26%26cG()%2CU.cv(this.x%2Cthis.y%2C10)%7D%7Dclass%20gv%20extends%20dD%7Bconstructor(t%2Cs)%7Bsuper(new%20cu%2Ct%2Cs)%2Cthis.A%3D-PI%2F8%2Cthis.dj%3D0%2Cthis.aj%3D1%2Cthis.bo%3D0%7DW(t)%7Bthis.bo%2B%3Dt%2Cthis.af%3Dw.Z%5B38%5D%3F1%3Aw.Z%5B40%5D%3F-.25%3A0%2Cthis.bw%3Dw.Z%5B37%5D%3F-1%3Aw.Z%5B39%5D%3F1%3A0%2Cw.Z%5B32%5D%26%26this.ba(dr)%2Cw.Z%5B13%5D%26%26this.bo%3E1%26%26this.ba(ds%2C.5)%3Blet%20s%3Dthis.aX()%3Bs%26%26this._q(s%2C.15*t)%2CG.S-this.dt%3E5%26%26(this.aj%2B%3D.05*t)%2Cthis.aj%3Dmin(this._k%2Cthis.aj)%2C(this.dj-%3Dt)%3C0%26%26this.fB()%2Csuper.W(t)%2Cthis.af%3Fthis.a%24%7C%7C(this.a%24%3Da%24()%2Cthis.a%24.loop%3D1)%3Athis.a%24%26%26(this.a%24.pause()%2Cthis.a%24%3D0)%7DfB()%7Blet%20t%3Dmin(1-this._k%2C.1)%2Cs%3D~~(10*t%2F.1)%3Bthis.B._G%3E%3Ds%26%26t%3E0%26%26G.fC(()%3D%3E%7Bthis._k%2B%3Dt%2Cthis.B._G-%3Ds%7D)%2Cthis.dj%3D1%7D_q(t%2Cs)%7Blet%20i%3Dt%20instanceof%20eG%3Bif(this.aj%3E0)return%20this.aj-%3Ds%2Cvoid((!i%7C%7CG.S-(this.dt%7C%7C0)%3E.3)%26%26(this.dt%3DG.S%2Cthis.fE%3D_Q(this%2Ct)%2C_g(this%2C%22ia%22%2C.8%2C1%2C.2)))%3Bi%7C%7CV.fF(.1)%2Csuper._q(t%2C.5*s)%2Cthis.dj%3D5%7Ddp(t)%7Bt.dI%3D100%7Dfz()%7Breturn%22%23fff%22%7Dab(t)%7Bsuper.ab(t)%2CsetTimeout(()%3D%3EG.fK()%2C2e3)%2Cthis.a%24%26%26this.a%24.pause()%7D_F()%7Breturn%20this._k%3C%3D.3%3F%22CRITICAL%20HULL%20DAMAGE%22%2B(this.B._G%3C10%3F%22.%20FIND%20RESOURCES%20TO%20REPAIR%22%3A%22%22)%3Athis.aX()%3F%22CRITICAL%20HEAT%22%3AU.aG.filter(t%3D%3EF(t%2Cthis)%3C1e3).length%3F%22PIRATES%20NEARBY%22%3Athis.aj%3C%3D0%3F%22SHIELDS%20OFFLINE%22%3Avoid%200%7DaX()%7Breturn%20U.aT.filter(t%3D%3EF(this%2Ct)%3C2*t.%24)%5B0%5D%7D_e()%7BN(()%3D%3Esuper._e())%2Ctranslate(this.x%2Cthis.y)%2Crotate(this.fE)%2CI(%22%23fff%22)%2CbeginPath()%2Carc(0%2C0%2C25%2C-PI%2F2%2CPI%2F2)%2CN(()%3D%3E%7Bscale(this.ia%2C1)%2Carc(0%2C0%2C25%2CPI%2F2%2C-PI%2F2%2C1)%7D)%2Cfill()%7D%7Dclass%20eA%20extends%20dD%7Bconstructor(t%2Cs%2Ci)%7Bsuper(t)%2Cthis.dM%3D0%2Cthis.x%3Ds%2Cthis.y%3Di%7Dfz()%7Breturn%20this.B._y()%7DdO()%7Breturn%20this.aw%3FF(this%2Cthis.aw)%3E400%26%26F(this.B.K%2Cthis.aw)%3E2*this.B.K.%24%3F0%3AF(this.B.K%2Cthis.aw)%3Cthis.B.K.%24%3F0%3A1%3A0%7DfR()%7Breturn%20this.dO()%3Fthis.aw%3Athis.T%7DfV()%7Bthis.bw%3D0%2Cthis.af%3D0%3Blet%20t%3Dthis.fR()%3Bif(!t)return%3Blet%20s%3Dbu(0%2C0%2Cthis._n%2Cthis._m)%2Ci%3D_Q(this%2Ct)%2Ch%3DaP(i-this.A)%3Bif(abs(h)%3EPI%2F64%26%26(this.bw%3Dbc(h))%2Cabs(h)%3CPI%2F64)%7Blet%20i%3Datan2(this._m%2Cthis._n)%2Ch%3Ds%2F50%2Ce%3D-50*h*h%2F2%2Bs*h%2Ca%3D%7Bx%3Athis.x%2Be*cos(i)%2Cy%3Athis.y%2Be*sin(i)%7D%2Cr%3DF(a%2Ct)%3Bthis.af%3Dr%3E50%3F1%3A0%7Dthis.dO()%26%26abs(h)%3EPI%2F64%26%26!this.bp%26%26(this._X%2B%3D.08%2Cthis.ba(dr))%2Cs%3E250%26%26(this.af%3D0)%7DW(t)%7Bif(V._x(this%2C500)%26%26(this.aw%3D%22%23f00%22%3D%3D%3Dthis.B._y()%3FU.D%3Anull%2C(!this.T%7C%7CF(this%2Cthis.T)%3Cthis.fZ%7C%7CF(this.B.K%2Cthis.T)%3Cthis.B.K.%24%7C%7C(this.dM-%3Dt)%3C%3D0)%26%26this.g%24()%2Cthis.fV()%2Csuper.W(t)%2Cthis.B.K._B))%7Blet%20t%3D_Q(this.B.K%2Cthis)%2Cs%3Dmax(F(this%2Cthis.B.K)%2Cthis.B.K.%24%2B2*this.%24)%3Bthis.x%3Dthis.B.K.x%2Bcos(t)*s%2Cthis.y%3Dthis.B.K.y%2Bsin(t)*s%7D%7Dg%24()%7Blet%20t%3Dga(this.B.K%2C%5Bthis.B.K.%24%2B150%2Cthis.B.K.%24%2B250%5D)%2Cs%3Ds%3D%3Et.slice().sort((t%2Ci)%3D%3EF(t%2Cs)-F(i%2Cs))%5B0%5D%2Ci%3Ds(this)%2Ch%3DU.aw%3Fs(U.aw)%3A_a(i.aS)%2Ce%3Di.aS.concat(%5Bi%5D).reduce((t%2Cs)%3D%3E!t%7C%7CF(s%2Ch)%3CF(t%2Ch)%3Fs%3At%2Cnull)%3Bthis.fZ%3D50%2Cthis.T%3DF(this%2Ce)%3EF(this%2Ch)%3Fh%3Ae%2Cthis.dM%3D2%7D_q(t%2Cs)%7Bsuper._q(t%2Cs)%2Ct._H%3D%3D%3DU.D%26%26this.B.aH(-.05)%7Dab(t)%7Bsuper.ab(t)%2Ct._H%3D%3D%3DU.D%26%26this.B.aH(-.3)%7D%7Dclass%20cB%7Bconstructor(t%2Cs)%7Bthis.H%3Dt%2Cthis.ak%3Ds%2Cthis.%24%3D15%2Cthis.scale%3D1%2Cthis.bb%3D0%2Cthis._k%3D1%7Dget%20bm()%7Breturn%20this.ak%2Bthis.H.A%7DW()%7Bthis.x%3Dthis.H.x%2B(this.H.%24-2)*cos(this.bm)%2Cthis.y%3Dthis.H.y%2B(this.H.%24-2)*sin(this.bm)%7D_e()%7Blet%20t%3D1-_u(0%2CG.S-this.bb%2C.1)%2F.1%3Bscale(1%2B.2*t%2C1%2B.2*t)%2CI(t%3E0%3F%22%23fff%22%3Athis.H.B._y())%2Cthis.bh()%7D_q(t%2Cs)%7Bt._H%3D%3DU.D%26%26(_C(%22%23ff0%22%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2BC(-20%2C20)%2C1%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2BC(-20%2C20)%2C1%5D%5D)%2Cthis.bb%3DG.S%2Cthis.H.B.aH(-.05)%2C(this._k-%3Ds)%3C%3D0%26%26this.ab(t))%7Dab(t)%7Bfor(let%20t%3D0%3Bt%3C50%3Bt%2B%2B)%7Blet%20t%3Dthis.bm%2BC(-PI%2F2%2CPI%2F2)%2Cs%3DC(30%2C50)%3B_C(_a(%5B%22%23ff0%22%2C%22%23f80%22%2C%22%23f00%22%5D)%2C%5B%5B%22dV%22%2C1%2C0%2C1%5D%2C%5B%22hn%22%2CC(2%2C4)%2CC(5%2C10)%2C1%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2Bcos(t)*s%2C1%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2Bsin(t)*s%2C1%5D%5D)%7DU._D(this.H.aq%2Cthis)%2Ct%3D%3DU.D%26%26this.H.B.aH(-.2)%2CG.aJ.c_(0%2Cthis)%2CU.cv(this.x%2Cthis.y%2C10)%7D%7Dclass%20fQ%20extends%20cB%7Bbh()%7Bfr(0%2C-11%2C10%2C6)%2Cfr(0%2C-3%2C20%2C6)%2Cfr(0%2C5%2C6%2C6)%7D%7Dclass%20fP%20extends%20cB%7Bconstructor(t%2Cs)%7Bsuper(t%2Cs)%2Cthis.bf%3D0%7Dbh()%7BbeginPath()%2Carc(0%2C0%2C10%2C0%2CM)%2Cfill()%2Crotate(this.bf)%2Cfr(0%2C-2%2C20%2C4)%7DW(t)%7Bsuper.W(t)%3Blet%20s%3DaP(_Q(this%2CU.D)-this.bm)%2Ci%3D_u(-PI%2F4%2Cs%2CPI%2F4)%2Ch%3Dt*PI%2F4%3Bthis.bf%2B%3D_u(-h%2Ci-this.bf%2Ch)%2CF(this%2CU.D)%3C500%26%26abs(aP(this.bf-s))%3CPI%2F64%26%26%22%23f00%22%3D%3D%3Dthis.H.B._y()%26%26this.ba()%7Dba()%7Bif(G.S-(this.bq%7C%7C0)%3C3)return%3Bthis.bq%3DG.S%3Blet%20t%3Dthis.bm%2Bthis.bf%3BU.aA.push(new%20ds(this%2Cthis.x%2Bcos(t)*(this.%24%2B15)%2Cthis.y%2Bsin(t)*(this.%24%2B15)%2Ct))%7D%7Dclass%20fO%20extends%20cB%7Bbh()%7BbeginPath()%2CmoveTo(0%2C-10)%2ClineTo(10%2C-10)%2ClineTo(7%2C-2)%2ClineTo(10%2C-2)%2ClineTo(7%2C6)%2ClineTo(18%2C6)%2ClineTo(18%2C9)%2ClineTo(0%2C9)%2Cfill()%7D%7Dclass%20gd%7Bconstructor(t%2Cs)%7Bthis.gg%3Drandom()%2Cthis.cs%3D15%2C_g(this%2C%22x%22%2Ct%2Ct%2BC(-50%2C50)%2C.3)%2C_g(this%2C%22y%22%2Cs%2Cs%2BC(-50%2C50)%2C.3)%7DW(t)%7Bif((this.cs-%3Dt)%3C%3D0%26%26U._D(U.aV%2Cthis)%2CU.D._k%3C%3D0)return%3Blet%20s%3DF(this%2CU.D)%3Bif(s%3C80)%7Blet%20i%3D_Q(this%2CU.D)%3Bthis.x%2B%3Dcos(i)*min(s%2C200*t)%2Cthis.y%2B%3Dsin(i)*min(s%2C200*t)%7Ds%3C10%26%26(U._D(U.aV%2Cthis)%2Cthis.gi(U.D))%7D_e()%7B!V._x(this)%7C%7Cthis.cs%3C3%26%26this.cs%25.25%3C.125%7C%7C(translate(this.x%2Cthis.y)%2Cscale(sin(this.gg%2BM*G.S)%2C1)%2Cthis.bh())%7D%7Dclass%20gc%20extends%20gd%7Bbh()%7Bscale(.3%2C.3)%2CI(%22%23fff%22)%2CeI()%7Dgi(t)%7Bt.B._G%3Dmin(200%2Ct.B._G%2B1)%2CG.aJ.c_(3%2Cthis)%2CG.gj()%2Cgk()%7D%7Dclass%20eQ%7Bconstructor(t%2Cs%2Ci%2Ch)%7Bthis._H%3Dt%2Cthis.x%3Ds%2Cthis.y%3Di%2Cthis.A%3Dh%2Cthis.dI%3D0%2Cthis.bo%3D0%2Cgn()%7DW(t)%7Bthis.x%2B%3Dcos(this.A)*this._T*t%2Cthis.y%2B%3Dsin(this.A)*this._T*t%2C(!V._x(this%2C500)%7C%7C(this.bo%2B%3Dt)%3E%3D2)%26%26U._D(U.aA%2Cthis)%2CU.gl(s%3D%3E%7Bif(s!%3D%3Dthis._H%26%26(F(s%2Cthis)%3Cs.%24%2Bthis.%24%26%26(U._D(U.aA%2Cthis)%2Cs._q(this%2Cthis._q)%2Cgp())%2CF(s%2Cthis)%3Cthis.dI))%7Blet%20i%3D_Q(this%2Cs)%2Ch%3DaP(i-this.A)%3Bif(abs(h)%3CPI%2F4)%7Blet%20s%3D_u(-t*PI%2F2%2Ch%2Ct*PI%2F2)%3Bthis.A%2B%3Ds%7D%7D%7D)%7D%7Dclass%20dr%20extends%20eQ%7Bconstructor(t%2Cs%2Ci%2Ch)%7Bsuper(t%2Cs%2Ci%2Ch)%2Cthis._T%3D400%2Cthis.%24%3D4%2Cthis._q%3D.1%2Cthis._X%3D.05%7DW(t)%7Bsuper.W(t)%3B_C(%22cyan%22%2C%5B%5B%22dV%22%2C1%2C0%2C.3%5D%2C%5B%22hn%22%2C4%2CC(4%2C6)%2C.3%5D%2C%5B%22x%22%2Cthis.x%2Cthis.x%2BC(-3%2C3)%2C.3%5D%2C%5B%22y%22%2Cthis.y%2Cthis.y%2BC(-3%2C3)%2C.3%5D%5D)%7D_e()%7Btranslate(this.x%2Cthis.y)%2Crotate(this.A)%2CI(%22cyan%22)%2Cfr(0%2C-2%2C8%2C4)%7D%7Dclass%20ds%20extends%20eQ%7Bconstructor(t%2Cs%2Ci%2Ch)%7Bsuper(t%2Cs%2Ci%2Ch)%2Cthis._T%3D800%2Cthis.S%3D0%2Cthis.%24%3D15%2Cthis._q%3D.5%2Cthis._X%3D.5%7DW(t)%7Bsuper.W(t)%3Blet%20s%3D0*sin((this.S%2B%3Dt)*M*4)%3B_C(%22red%22%2C%5B%5B%22dV%22%2C1%2C0%2C.5%5D%2C%5B%22hn%22%2C16%2CC(16%2C32)%2C.5%5D%2C%5B%22x%22%2Cthis.x%2Bcos(this.A%2BPI%2F2)*s*10%2Cthis.x%2Bcos(this.A%2BPI%2F2)*s*10%2BC(-16%2C16)%2C.5%5D%2C%5B%22y%22%2Cthis.y%2Bsin(this.A%2BPI%2F2)*s*10%2Cthis.y%2Bsin(this.A%2BPI%2F2)*s*10%2BC(-16%2C16)%2C.5%5D%5D)%7D_e()%7Btranslate(this.x%2Cthis.y)%2Crotate(this.A)%2CI(%22red%22)%2Cfr(-5%2C-5%2C10%2C10)%7D%7Donresize%3D(()%3D%3E%7Bvar%20t%2Cs%2Ci%3DinnerWidth%2Ch%3DinnerHeight%2Ce%3Di%2Fh%2Ca%3D1e3%2F__%2Cr%3Ddocument.querySelector(%22%23cc%22).style%3Be%3C%3Da%3Fs%3D(t%3Di)%2Fa%3At%3D(s%3Dh)*a%2Cr.width%3Dt%2B%22px%22%2Cr.height%3Ds%2B%22px%22%7D)%2Cgu%3D((t%2Cs%2Ci%2Ch)%3D%3Et%2Fh*i%2Bs)%2C_g%3D((t%2Cs%2Ci%2Ch%2Ce%2Ca%2Cr%2Cl)%3D%3E%7Bvar%20_%3D%7Bo%3At%2Cp%3As%2Ca%3Ai%2Cb%3Ah%2Cd%3Ae%2Cl%3Aa%7C%7C0%2Cf%3Ar%7C%7Cgu%2Ce%3Al%7C%7C(()%3D%3E0)%2Ct%3A0%2CW%3At%3D%3E%7Bif(_.l%3E0)_.l-%3Dt%2C_.o%5B_.p%5D%3D_.a%3Belse%20if(_.t%3Dmin(_.d%2C_.t%2Bt)%2C_.o%5B_.p%5D%3D_.f(_.t%2C_.a%2C_.b-_.a%2C_.d)%2C_.t%3D%3D_.d)%7B_.e()%3Blet%20t%3Dca.indexOf(_)%3Bt%3E%3D0%26%26ca.splice(t%2C1)%7D%7D%7D%3Bca.push(_)%7D)%2Cca%3D%5B%5D%3Blet%20fb%3D%22BCDFGHJKLMNPQRSTVWXZ%22.split(%22%22)%2Cfc%3D%22AEIOUY%22.split(%22%22)%3Bfunction%20gA()%7Bthis.gC%3Dfunction(t)%7Bfor(var%20s%3D0%3Bs%3C24%3Bs%2B%2B)this%5BString.fromCharCode(97%2Bs)%5D%3Dt%5Bs%5D%7C%7C0%3Bthis.c%3C.01%26%26(this.c%3D.01)%3Bvar%20i%3Dthis.b%2Bthis.c%2Bthis.e%3Bif(i%3C.18)%7Bvar%20h%3D.18%2Fi%3Bthis.b*%3Dh%2Cthis.c*%3Dh%2Cthis.e*%3Dh%7D%7D%7Dfunction%20gD()%7Bvar%20t%2Cs%2Ci%2Ch%2Ce%2Ca%2Cr%2Cl%2C_%2Cn%2Co%2Cc%3Bthis.bO%3Dnew%20gA%2Cthis.dC%3Dfunction()%7Bvar%20t%3Dthis.bO%3Bh%3D100%2F(t.f*t.f%2B.001)%2Ce%3D100%2F(t.g*t.g%2B.001)%2Ca%3D1-t.h*t.h*t.h*.01%2Cr%3D-t.i*t.i*t.i*1e-6%2Ct.a%7C%7C(o%3D.5-t.n%2F2%2Cc%3D5e-5*-t.o)%2Cl%3D1%2Bt.l*t.l*(t.l%3E0%3F-.9%3A10)%2C_%3D0%2Cn%3D1%3D%3Dt.m%3F0%3A(1-t.m)*(1-t.m)*2e4%2B32%7D%2Cthis.gH%3Dfunction()%7Bthis.dC()%3Bvar%20h%3Dthis.bO%3Breturn%20t%3Dh.b*h.b*1e5%2Cs%3Dh.c*h.c*1e5%2Ci%3Dh.e*h.e*1e5%2B12%2C3*((t%2Bs%2Bi)%2F3%7C0)%7D%2Cthis.gJ%3Dfunction(f%2Cd)%7Bvar%20b%3Dthis.bO%2Cu%3D1!%3Db.s%7C%7Cb.v%2CG%3Db.v*b.v*.1%2Cg%3D1%2B3e-4*b.w%2Cp%3Db.s*b.s*b.s*.1%2Cy%3D1%2B1e-4*b.t%2Cx%3D1!%3Db.s%2Cw%3Db.x*b.x%2CU%3Db.g%2Cm%3Db.q%7C%7Cb.r%2CI%3Db.r*b.r*b.r*.2%2C%24%3Db.q*b.q*(b.q%3C0%3F-1020%3A1020)%2CR%3Db.p%3F32%2B((1-b.p)*(1-b.p)*2e4%7C0)%3A0%2CB%3Db.d%2CP%3Db.j%2F2%2CD%3Db.k*b.k*.01%2CA%3Db.a%2CT%3Dt%2CE%3D1%2Ft%2CS%3D1%2Fs%2CF%3D1%2Fi%2Cv%3D5%2F(1%2Bb.u*b.u*20)*(.01%2Bp)%3Bv%3E.8%26%26(v%3D.8)%2Cv%3D1-v%3Bfor(var%20W%2CM%2CN%2Ck%2CV%2CZ%2CH%3D0%2Cq%3D0%2CK%3D0%2CO%3D0%2CY%3D0%2CX%3D0%2CL%3D0%2CQ%3D0%2CJ%3D0%2Cj%3D0%2Cz%3D0%2Ctt%3Dnew%20Array(1024)%2Cst%3Dnew%20Array(32)%2Cit%3Dtt.length%3Bit--%3B)tt%5Bit%5D%3D0%3Bfor(it%3Dst.length%3Bit--%3B)st%5Bit%5D%3DC(-1%2C1)%3Bfor(it%3D0%3Bit%3Cd%3Bit%2B%2B)%7Bif(H)return%20it%3Bif(R%26%26%2B%2Bj%3E%3DR%26%26(j%3D0%2Cthis.dC())%2Cn%26%26%2B%2B_%3E%3Dn%26%26(n%3D0%2Ch*%3Dl)%2C(h*%3Da%2B%3Dr)%3Ee%26%26(h%3De%2CU%3E0%26%26(H%3D1))%2CM%3Dh%2CP%3E0%26%26(M*%3D1%2Bsin(z%2B%3DD)*P)%2C(M%7C%3D0)%3C8%26%26(M%3D8)%2CA%7C%7C((o%2B%3Dc)%3C0%3Fo%3D0%3Ao%3E.5%26%26(o%3D.5))%2C%2B%2BK%3ET)switch(K%3D0%2C%2B%2Bq)%7Bcase%201%3AT%3Ds%3Bbreak%3Bcase%202%3AT%3Di%7Dswitch(q)%7Bcase%200%3AO%3DK*E%3Bbreak%3Bcase%201%3AO%3D1%2B2*(1-K*S)*B%3Bbreak%3Bcase%202%3AO%3D1-K*F%3Bbreak%3Bcase%203%3AO%3D0%2CH%3D1%7Dm%26%26((N%3D0%7C(%24%2B%3DI))%3C0%3FN%3D-N%3AN%3E1023%26%26(N%3D1023))%2Cu%26%26g%26%26((G*%3Dg)%3C1e-5%3FG%3D1e-5%3AG%3E.1%26%26(G%3D.1))%2CZ%3D0%3Bfor(var%20ht%3D8%3Bht--%3B)%7Bif(%2B%2BQ%3E%3DM%26%26(Q%25%3DM%2C3%3D%3DA))for(var%20et%3Dst.length%3Bet--%3B)st%5Bet%5D%3DC(-1%2C1)%3Bswitch(A)%7Bcase%200%3AV%3DQ%2FM%3Co%3F.5%3A-.5%3Bbreak%3Bcase%201%3AV%3D1-Q%2FM*2%3Bbreak%3Bcase%202%3AV%3D.225*(((V%3D1.27323954*(k%3D6.28318531*((k%3DQ%2FM)%3E.5%3Fk-1%3Ak))%2B.405284735*k*k*(k%3C0%3F1%3A-1))%3C0%3F-1%3A1)*V*V-V)%2BV%3Bbreak%3Bcase%203%3AV%3Dst%5Babs(32*Q%2FM%7C0)%5D%7Du%26%26(W%3DL%2C(p*%3Dy)%3C0%3Fp%3D0%3Ap%3E.1%26%26(p%3D.1)%2Cx%3F(X%2B%3D(V-L)*p%2CX*%3Dv)%3A(L%3DV%2CX%3D0)%2CY%2B%3D(L%2B%3DX)-W%2CV%3DY*%3D1-G)%2Cm%26%26(tt%5BJ%251024%5D%3DV%2CV%2B%3Dtt%5B(J-N%2B1024)%251024%5D%2CJ%2B%2B)%2CZ%2B%3DV%7DZ*%3D.125*O*w%2Cf%5Bit%5D%3DZ%3E%3D1%3F32767%3AZ%3C%3D-1%3F-32768%3A32767*Z%7C0%7Dreturn%20d%7D%7Dfd%3D(t%3D%3Et._a(fb)%2Bt._a(fc)%2Bt._a(fb.concat(fc)))%2Cel%3D(t%3D%3Efd(t)%2Bfd(t)%2B%22%20%22%2Bt._a(%5B%22III%22%2C%22IV%22%2C%22V%22%2C%22VI%22%2C%22VII%22%2C%22IX%22%2C%22X%22%5D))%2Cfe%3D(t%3D%3E%7Bfor(t%2B%3D%22%22%3Bt.length%3C2%3B)t%3D%220%22%2Bt%3Breturn%20t%7D)%2Cda%3D(t%3D%3Efe(~~(t%2F60))%2B%22%3A%22%2Bfe(~~t%2560))%2Cga%3D((t%2Cs)%3D%3E%7Blet%20i%3D%5B%5D%2Ch%3D%5B%5D%3Breturn%20s.forEach(s%3D%3E%7Blet%20e%3D%5B%5D%3Bh.push(e)%3Bfor(let%20h%3D0%3Bh%3C6%3Bh%2B%2B)%7Blet%20a%3DM*(h%2F6)%2Cr%3D%7Bx%3Acos(a)*s%2Bt.x%2Cy%3Asin(a)*s%2Bt.y%2CaS%3A%5B%5D%7D%3Bi.push(r)%2Ce.push(r)%7D%7D)%2Ch.forEach((t%2Cs)%3D%3E%7Bt.forEach((i%2Ce)%3D%3E%7Blet%20a%3Dt%5B(e%2B1)%25t.length%5D%3Bi.aS.push(a)%2Ca.aS.push(i)%3Blet%20r%3Dh%5B(s%2B1)%25h.length%5D%5Be%5D%3Bi.aS.push(r)%2Cr.aS.push(i)%7D)%7D)%2Ci%7D)%2CbW%3D(t%3D%3E%7Blet%20s%3Dnew%20Uint32Array(%5Bimul(t%2C2246822507)%2Cimul(t%2C3266489909)%5D)%2Ci%3D()%3D%3E%7Blet%20t%3Ds%5B0%5D%2Ci%3Ds%5B1%5D%5Et%3Breturn%20s%5B0%5D%3D(t%3C%3C26%7Ct%3E%3E8)%5Ei%5Ei%3C%3C9%2Cs%5B1%5D%3Di%3C%3C13%7Ci%3E%3E19%2C(imul(t%2C2654435771)%3E%3E%3E0)%2F4294967295%7D%3Breturn%7B_a%3At%3D%3Et%5B~~(i()*t.length)%5D%2C_f%3A(t%2Cs)%3D%3Ei()*(s-t)%2Bt%2Cge%3Ai%7D%7D)%2CcT%3D(t%3D%3E%7Blet%20s%3Breturn()%3D%3Es%3Ds%7C%7Ct()%7D)%3Bvar%20cW%3Dnew%20gD%2Chb%3Dfunction(t)%7BcW.bO.gC(t)%3Bvar%20s%3DcW.gH()%2Ci%3Dnew%20Uint8Array(4*((s%2B1)%2F2%7C0)%2B44)%2Ch%3D2*cW.gJ(new%20Uint16Array(i.buffer%2C44)%2Cs)%2Ce%3Dnew%20Uint32Array(i.buffer%2C0%2C44)%3Be%5B0%5D%3D1179011410%2Ce%5B1%5D%3Dh%2B36%2Ce%5B2%5D%3D1163280727%2Ce%5B3%5D%3D544501094%2Ce%5B4%5D%3D16%2Ce%5B5%5D%3D65537%2Ce%5B6%5D%3D44100%2Ce%5B7%5D%3D88200%2Ce%5B8%5D%3D1048578%2Ce%5B9%5D%3D1635017060%2Ce%5B10%5D%3Dh%2Ch%2B%3D44%3Bfor(var%20a%3D0%2Cr%3D%22ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%2B%2F%22%2Cl%3D%22data%3Aaudio%2Fwav%3Bbase64%2C%22%3Ba%3Ch%3Ba%2B%3D3)%7Bvar%20_%3Di%5Ba%5D%3C%3C16%7Ci%5Ba%2B1%5D%3C%3C8%7Ci%5Ba%2B2%5D%3Bl%2B%3Dr%5B_%3E%3E18%5D%2Br%5B_%3E%3E12%2663%5D%2Br%5B_%3E%3E6%2663%5D%2Br%5B63%26_%5D%7Dvar%20n%3Dnew%20Audio%3Breturn%20n.src%3Dl%2Cn%7D%3B_U%3D((t%2Cs%3D1)%3D%3E%7Blet%20i%3D0%2Ch%3DcT(()%3D%3E%5B...Array(s)%5D.map(()%3D%3Ehb(t)))%3Breturn()%3D%3E%7Blet%20t%3Dh()%5Bi%2B%2B%25h().length%5D%3Breturn%20t.play()%2Ct%7D%7D)%3Blet%20cG%3D_U(%5B3%2C%2C.3346%2C.2953%2C.4941%2C.1205%2C%2C-.2565%2C%2C%2C%2C%2C%2C%2C%2C%2C-.1093%2C-.2344%2C1%2C%2C%2C%2C%2C.5%5D)%2Cgn%3D_U(%5B0%2C%2C.1584%2C.1384%2C.2216%2C.63%2C%2C-.2653%2C%2C%2C%2C%2C%2C.1485%2C%2C%2C%2C%2C1%2C%2C%2C.1888%2C%2C.5%5D%2C10)%2Chi%3D_U(%5B1%2C.12%2C.1%2C.0079%2C.32%2C.83%2C.0017%2C%2C.04%2C.34%2C.96%2C.0056%2C%2C%2C.8422%2C.0048%2C%2C-.0327%2C1%2C%2C%2C%2C%2C.37%5D)%2Chj%3D_U(%5B0%2C%2C.1696%2C%2C.0103%2C.2617%2C%2C%2C%2C%2C%2C%2C%2C.1416%2C%2C%2C%2C%2C1%2C%2C%2C.1%2C%2C.5%5D)%2Cgk%3D_U(%5B0%2C%2C.0323%2C.3656%2C.1925%2C.4276%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C1%2C%2C%2C%2C%2C.5%5D%2C10)%2Cgp%3D_U(%5B3%2C%2C.0825%2C%2C.2264%2C.3697%2C%2C-.5926%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C1%2C%2C%2C.0684%2C%2C.5%5D%2C10)%2Ca%24%3D_U(%5B3%2C%2C1%2C%2C%2C.14%2C%2C%2C%2C%2C%2C%2C%2C%2C%2C1%2C%2C%2C1%2C%2C%2C.0684%2C%2C.2%5D%2C1)%2Chk%3D_U(%5B2%2C1%2C.01%2C.0079%2C1%2C.23%2C.0017%2C.0194%2C.0078%2C.81%2C.41%2C.0056%2C%2C%2C.8422%2C.0048%2C%2C-.0327%2C1%2C%2C%2C%2C%2C.45%5D)%2Chl%3D_U(%5B2%2C.72%2C.01%2C.0079%2C1%2C.6%2C.0017%2C.0194%2C.0078%2C.57%2C.71%2C.0056%2C%2C%2C.8422%2C.0048%2C%2C-.0327%2C1%2C%2C%2C%2C%2C.45%5D)%2Chm%3D_U(%5B1%2C.03%2C.42%2C.0079%2C.32%2C.14%2C.0017%2C%2C.04%2C%2C%2C.0056%2C%2C%2C.8422%2C.0048%2C%2C-.0327%2C1%2C%2C%2C%2C%2C.37%5D)%3Bclass%20ho%7Bconstructor()%7Bthis._W%3D%7B%7D%7Dc_(t%2Cs)%7B(this._W%5Bt%5D%7C%7C%5B%5D).forEach(t%3D%3Et(s))%7D_v(t%2Cs)%7Bthis._W%5Bt%5D%3Dthis._W%5Bt%5D%7C%7C%5B%5D%2Cthis._W%5Bt%5D.push(s)%7Dhg(t%2Cs)%7Blet%20i%3D(this._W%5Bt%5D%7C%7C%5B%5D).indexOf(s)%3Bi%3E%3D0%26%26this._W%5Bt%5D.splice(i%2C1)%7D%7Dw.Z%3D%7B%7D%2Conkeydown%3D(t%3D%3E%7Bw.Z%5Bt.keyCode%5D%3D1%7D)%2Conkeyup%3D(t%3D%3E%7Bw.Z%5Bt.keyCode%5D%3D0%3Blet%20s%3DString.fromCharCode(t.keyCode).toLowerCase()%3BisNaN(s)%26%26G.e_(s)%7D)%2Contouchstart%3D(t%3D%3Eontouchmove(t%2C1))%2Contouchmove%3Dontouchend%3D((t%2Cs)%3D%3E%7Bt.preventDefault()%3Blet%20i%3Ddocument.querySelector(%22canvas%22).getBoundingClientRect()%3Bw.Z%5B32%5D%3D0%2Cw.Z%5B37%5D%3D0%2Cw.Z%5B38%5D%3D0%2Cw.Z%5B39%5D%3D0%3Bfor(let%20h%3D0%3Bh%3Ct.touches.length%3Bh%2B%2B)%7Blet%20e%3D(t.touches%5Bh%5D.clientX-i.left)%2Fi.width%2Ca%3D(t.touches%5Bh%5D.clientY-i.top)%2Fi.height%3Ba%3E1-200%2F__%3Fe%3C.25%3Fw.Z%5B37%5D%3D1%3Ae%3C.5%3Fw.Z%5B39%5D%3D1%3Ae%3C.75%3Fw.Z%5B32%5D%3D1%3Aw.Z%5B38%5D%3D1%3As%26%26a%3E1-400%2F__%26%26G.e_(~~(e%2F(1%2F(G.bH%7C%7C%5B%5D).length)))%7Dbn%3D1%2CG.bg()%7D)%3Bclass%20hs%7Bconstructor()%7Bthis.x%3Dthis.y%3D0%2Cthis.cE%3Dthis.cq%3D0%2Cthis.ac%3Dthis.b%24%3D1%7DW(t)%7Blet%20s%3D999%3BU._b.forEach(t%3D%3E%7Bs%3Dmin(s%2CF(t%2CU.D))%7D)%2Cs%3E700%3Fthis.b%24%3Dbn%3F.7%3A.5%3As%3C500%26%26(this.b%24%3D1)%3Blet%20i%3Dthis.cR%7C%7Cthis.b%24%3Bthis.ac%2B%3D_u(-.5*t%2Ci-this.ac%2C.5*t)%2Cthis.be%3D1e3%2Fthis.ac%2Cthis.cl%3D__%2Fthis.ac%2C(this.ex-%3Dt)%3E0%26%26(this.cE%3DC(-10%2C10)%2Cthis.cq%3DC(-10%2C10))%2Cthis.x%3DU.D.x-this.be%2F2%2Bthis.cE%2Cthis.y%3DU.D.y-this.cl%2F2%2Bthis.cq%7D_x(t%2Cs%3D0)%7Breturn%20t.x%2Bs%3Ethis.x%26%26t.y%2Bs%3Ethis.y%26%26t.x-s%3Cthis.x%2Bthis.be%26%26t.y-s%3Cthis.y%2Bthis.cl%7DfF(t)%7Bthis.ex%3Dmax(this.ex%7C%7C0%2Ct)%7D%7Dclass%20hw%7Bconstructor()%7BG%3Dthis%2CU%3Dnew%20gx%2CV%3Dnew%20hs%2CG.eR()%2CG.S%3D0%2CG.bZ%3D_E(%22everyone's%22)%2CG.c%24%3D_E(%22sky%22)%2CG.cm%3D_E(%22press%20enter%20to%20send%20a%20ship%22)%2CG.eU%3DG.cg%3D50%2CG.cf%3DG.eY%3D100%2CG.ci%3D0%2CG.dl%3D1%2CG.eZ%3D0%2CG.cr%3D1%2CG.hy%3D1%2CG.ff%3D1%2CG.ct%3D%22%23fff%22%7DbQ(t)%7BG.O%26%26G.O.hh()%2CG.O%3Dt%2CG.df%3D20%2CG._l()%2Ct%26%26(t.hd%3D(t%3D%3EG.bQ(t))%2Ct.Y())%7DcC(t%2Cs%2Ci%2Ch%2Ce)%7BN(()%3D%3E%7Btranslate(t%2Cs)%2CI(%22rgba(128%2C128%2C128%2C0.5)%22)%2Cfr(0%2C-5%2C200%2C10)%2CI(h)%2Cfr(0%2C-5%2C-2%2C10)%2Cfr(200%2C-5%2C2%2C10)%2Cfr(0%2C-5%2C200*_u(0%2Ci%2C1)%2C10)%2Ctranslate(-25%2C0)%2Ce()%7D)%7DfC(t)%7B_g(G%2C%22eZ%22%2C0%2C-30%2C.3%2C0%2C0%2C()%3D%3E%7BG.eZ%3D0%7D)%2C_g(G%2C%22ff%22%2C1%2C2%2C.3%2C.2%2C0%2C()%3D%3E%7B_g(G%2C%22ff%22%2C2%2C1%2C.3%2C0%2C0%2C()%3D%3E%7BG.ct%3D%22%23fff%22%7D)%7D)%2CsetTimeout(()%3D%3EG.ct%3D%22%230f0%22%2C200)%2C_g(G%2C%22cr%22%2C1%2C0%2C.3%2C0%2C0%2C()%3D%3E%7BG.cr%3D1%2Ct()%7D)%2C_g(G%2C%22hy%22%2C1%2C0%2C.3%2C0%2C0%2C()%3D%3E%7B_g(G%2C%22hy%22%2C0%2C1%2C.3%2C.3)%7D)%7Dgj()%7B_g(G%2C%22cr%22%2C1%2C2%2C.3%2C0%2C0%2C()%3D%3E%7B_g(G%2C%22cr%22%2C2%2C1%2C.3)%7D)%7DW(t)%7BG.S%2B%3Dt%2CG.bP%26%26((G.df-%3Dt)%3C%3D0%26%26G.hC()%2CU.W(t)%2CG.aJ.c_(1%2Ct))%2Cca.slice().forEach(s%3D%3Es.W(t))%2Cw.Z%5B13%5D%26%26G.bg()%2CU._e()%2CN(()%3D%3E%7Btranslate(V.cE%2CV.cq)%2CI(%22rgba(0%2C0%2C0%2C0.5)%22)%2CR.strokeStyle%3D%22%23fff%22%2Cfr(50%2C30%2C270%2C125)%2CstrokeRect(50.5%2C30.5%2C270%2C125)%2CR.font%3D%2210pt%20%22%2Bau%2CR.textAlign%3D%22center%22%2CI(%22%23fff%22)%3Blet%20t%3DU._b.reduce((t%2Cs)%3D%3E(s.B%26%26(t%5Bs.B._y()%5D%2B%2B%2Ct.total%2B%2B)%2Ct)%2C%7Btotal%3A1%2C%22%230f0%22%3A0%7D)%3BfillText(%22Peace%3A%20%22%2B~~(100*t%5B%22%230f0%22%5D%2Ft.total)%2B%22%25%22%2C185%2C140)%2CG.cC(100%2C50%2CU.D._k%2CU.D._k%3C.25%7C%7CG.S-U.D.bb%3C.2%3F%22%23f00%22%3AG.ct%2C()%3D%3E%7Bscale(.5*G.ff%2C.5*G.ff)%2CbeginPath()%2CmoveTo(0%2C-15)%2ClineTo(14%2C-10)%2ClineTo(10%2C10)%2ClineTo(0%2C18)%2ClineTo(-10%2C10)%2ClineTo(-14%2C-10)%2Cfill()%7D)%2CN(()%3D%3E%7BR.shadowColor%3D%22%230f0%22%2CR.shadowBlur%3D10%2CI(%22cyan%22)%2Cfr(100%2C45%2C200*_u(0%2CU.D.aj%2C1)%2C10)%7D)%2CG.cC(100%2C80%2CU.D.B._G%2F200%2C%22%23fff%22%2C()%3D%3E%7BR.globalAlpha%3DG.hy%2Ctranslate(0%2CG.eZ)%2Cscale(.3*G.cr%2C.3*G.cr)%2CeI()%7D)%2CG.cC(100%2C110%2CU.D._X%2CU.D.bp%3F%22%23f00%22%3A%22%23fff%22%2C()%3D%3E%7Bfr(-5%2C-5%2C3%2C10)%2Cfr(-1%2C-5%2C3%2C10)%2Cfr(3%2C-5%2C3%2C10)%7D)%3Blet%20s%3D%5B%5D%2Ci%3DU.aT.sort((t%2Cs)%3D%3EF(t%2CU.D)-F(s%2CU.D)).slice(0%2C3)%2Ch%3Di%5B0%5D%26%26F(i%5B0%5D%2CU.D)%3Ci%5B0%5D.ai%3Bh%26%26!i%5B0%5D.hI%26%26(i%5B0%5D.hI%3D1%2CG.dE(%22system%20discovered%20-%20%22%2Bi%5B0%5D._B))%2CG.O%3Fs%3DG.O._t%7C%7C%5B%5D%3Ah%7C%7C(s%3Di)%2Cs.forEach(t%3D%3E%7Bif(F(t%2CU.D)%3C(t.ai%7C%7C0))return%3Blet%20s%3D_Q(U.D%2Ct)%3BN(()%3D%3E%7Blet%20i%3D200*_u(0%2C(F(t%2CU.D)-t.ai)%2F4e3%2C1)%2B50%3Btranslate(500%2Bcos(s)*i%2C__%2F2%2Bsin(s)*i)%2Crotate(s)%2CI(G.O%3F%22%23f80%22%3A%22%23888%22)%2CbeginPath()%2CmoveTo(0%2C0)%2ClineTo(-14%2C10)%2ClineTo(-8%2C0)%2ClineTo(-14%2C-10)%2Cfill()%7D)%7D)%3Blet%20e%3DG._%24()%3Be%26%26N(()%3D%3E%7BI(%22rgba(0%2C0%2C0%2C0.5)%22)%2CR.font%3D%2220pt%20%22%2Bau%2Ctranslate(0%2C__-(bn%3F400%3A200))%2Cfr(0%2C0%2C1e3%2C200)%3Blet%20t%3DmeasureText(e%2B%22_%22).width%2Cs%3Dthis.f%24()%3BI(%22%23fff%22)%2CR.textAlign%3D%22left%22%2CG.aZ%7C%7CfillText(s%2C(1e3-t)%2F2%2C50)%2Cs.length%3E%3De.length%26%26(R.textAlign%3D%22center%22%2CR.textBaseline%3D%22middle%22%2CR.font%3D%2216pt%20%22%2Bau%2CG.bH.forEach((t%2Cs)%3D%3E%7Bif(I(%22%23fff%22)%2CG.aZ)%7Bif(G.aZ!%3Dt)return%3BR.globalAlpha%3D(sin(G.S*M*4)%2B1)%2F2%7Dlet%20i%3D%22%5B%22%2Bt.hM%5B0%5D%2B%22%5D%22%2Bt.hM.slice(1)%2Ch%3D(s%2B1)*(1e3%2F(G.bH.length%2B1))%3Bfr(h-75%2C85%2C150%2C30)%2CR.globalAlpha%3D1%2CI(%22%23000%22)%2CfillText(i%2Ch%2C100)%7D))%7D)%3Blet%20a%3DU.D._F()%3Ba%26%26a!%3DG._F%26%26(G.hN%3DG.S%2B3%2CG._F%3Da%2Chm())%2Ca%7C%7C(G._F%3D0)%2CG._F%26%26G.S%3CG.hN%26%26(I(%22rgba(255%2C0%2C0%2C0.5)%22)%2Cfr(0%2C200%2C1e3%2C125)%2CR.font%3D%2236pt%20%22%2Bau%2CR.textBaseline%3D%22middle%22%2CR.textAlign%3D%22center%22%2CI(%22%23fff%22)%2CfillText(%22%2F!%5C%5C%20WARNING%20%2F!%5C%5C%22%2C500%2C250)%2CR.font%3D%2218pt%20%22%2Bau%2CfillText(G._F%2C500%2C300)%2CG._Z%3D0)%2CR.strokeStyle%3D%22%23fff%22%2CR.lineCap%3D%22round%22%2CG._Z%26%26G.hO%26%26N(()%3D%3E%7BR.lineWidth%3D4%3Blet%20t%3D20*G._Z.width%3Btranslate((1e3-t)%2F2%2C(__-100)%2F2-200)%2CaQ(G._Z%2C20%2C30%2CG.hO%2C.1%2C1)%7D)%2CN(()%3D%3E%7Btranslate(0%2CG.dW)%2CI(%22%23000%22)%2Cfr(0%2C0%2C1e3%2C__)%2CR.lineWidth%3D8%3Blet%20t%3D(__-12*G.cf%2F5)%2F2%3BN(()%3D%3E%7Btranslate((1e3-G.bZ.width*G.eU)%2F2%2Ct)%2CaQ(G.bZ%2CG.eU%2CG.cf%2CG.S-.5%2C.1%2C1)%7D)%2CN(()%3D%3E%7BR.lineWidth%3DG.hR%2Ctranslate((1e3-G.c%24.width*G.cg)%2F2%2Ct%2B7*G.cf%2F5)%2CaQ(G.c%24%2CG.cg%2CG.eY%2CG.S-.5%2CG.bZ.aB.length%2FG.c%24.aB.length*.1%2C1)%7D)%2CR.lineWidth%3D4%3BN(()%3D%3E%7BG.S%251%3E.5%26%26G.S%3E6%7C%7CG.dW%7C%7C(translate((1e3-20*G.cm.width)%2F2%2C__-30-100)%2CaQ(G.cm%2C20%2C30%2CG.S-5%2C.01%2C.2))%7D)%2CR.font%3D%2220pt%20%22%2Bau%2CI(%22%23fff%22)%2CR.textAlign%3D%22center%22%2CG.fo.forEach((t%2Cs)%3D%3E%7BfillText(t%2C500%2C3*__%2F4-50%2B30*s)%7D)%7D)%7D)%2CN(()%3D%3E%7Bbn%26%26(translate(0%2C__-200)%2CR.globalAlpha%3D.8%2CI(%22%23000%22)%2Cfr(0%2C0%2C1e3%2C200)%2CI(%22%23fff%22)%2Ctranslate(0%2C100)%2CN(()%3D%3E%7BR.globalAlpha%3Dw.Z%5B37%5D%3F1%3A.5%2Ctranslate(125%2C0)%2Crotate(PI)%2CG.d_()%7D)%2CN(()%3D%3E%7BR.globalAlpha%3Dw.Z%5B39%5D%3F1%3A.5%2Ctranslate(375%2C0)%2CG.d_()%7D)%2CN(()%3D%3E%7BR.globalAlpha%3Dw.Z%5B32%5D%3F1%3A.5%2Ctranslate(625%2C0)%2CbeginPath()%2CmoveTo(0%2C0)%2Carc(0%2C0%2C40%2C0%2CM)%2Cfill()%7D)%2CN(()%3D%3E%7BR.globalAlpha%3Dw.Z%5B38%5D%3F1%3A.5%2Ctranslate(875%2C0)%2Crotate(-PI%2F2)%2CG.d_()%7D))%7D)%7Dd_()%7BbeginPath()%2CmoveTo(40%2C0)%2ClineTo(-40%2C-40)%2ClineTo(-40%2C40)%2Cfill()%7D_l(t%2Cs)%7BG._%24%3Dt%26%26t.call%3Ft%3A()%3D%3Et%2CG.hS%3DG.S%2CG.bH%3Ds%7C%7C%5B%5D%2CG.aZ%3D0%2CG._%24()%26%26hi()%7De_(t)%7BG.f%24().length%3C(G._%24()%7C%7C%22%22).length%7C%7CG.aZ%7C%7C(G.bH%7C%7C%5B%5D).forEach((s%2Ci)%3D%3E%7Bi!%3Dt%26%26s.hM%5B0%5D.toLowerCase()!%3D%3Dt%7C%7C(G.aZ%3Ds%2CsetTimeout(s.hX%2C500)%2Chj())%7D)%7DdE(t)%7BG._Z%3D_E(t)%2C_g(G%2C%22hO%22%2CG._Z.aB.length%2C0%2C.1*G._Z.aB.length%2C3)%2C_g(G%2C%22hO%22%2C0%2CG._Z.aB.length%2C.1*G._Z.aB.length)%2Chl()%7DhC()%7Blet%20t%3DU._b.filter(t%3D%3Et._N).reduce((t%2Cs)%3D%3E!t%7C%7CF(U.D%2Cs)%3CF(U.D%2Ct)%3Fs%3At%2Cnull)%3Bif(t%26%26!G.O)%7Blet%20s%3Ds%3D%3E_f(1e3%2CF(s%2Ct)%2C1e4)%2Ci%3D()%3D%3EU._b.filter(t%3D%3Et._N).filter(s)%2Ch%3D()%3D%3Ei().concat(U.aT.filter(s))%2Ce%3D_a(%5Bnew%20gL(_a(i()))%2Cnew%20gI(_a(h()))%2Cnew%20gG%2Cnew%20gE%2Cnew%20gz%5D)%3Be.B%3Dt.B%2CG.bQ(new%20gS(e))%3Bfor(let%20s%3D0%2Ci%3Dmax(t.%24%2CF(U.D%2Ct)-V.be)%3Bi%3CF(U.D%2Ct)%3Bs%2B%2B%2Ci%2B%3D50)%7Blet%20h%3D_Q(t%2CU.D)%3B_C(0%2C%5B%5B%22dV%22%2C1%2C0%2C.1%2C.02*s%2B.2%5D%2C%5B%22dV%22%2C0%2C1%2C.1%2C.02*s%5D%5D%2Cs%3D%3E%7BR.strokeStyle%3D%22%23fff%22%2CR.lineWidth%3D2%2CR.globalAlpha%3Ds.dV%2CbeginPath()%2Carc(t.x%2Ct.y%2Ci%2Ch-PI%2F16%2Ch%2BPI%2F16)%2Cstroke()%7D)%7D%7D%7DaY(t)%7Blet%20s%3DG.O%3BG.bQ()%2Cs.B.aH(t%3F.5%3A-.2)%2CG._l(%22Mission%20%22%2B(t%3F%22SUCCESS%22%3A%22FAILED%22)%2B%22.%20%22%2Bs.B.K._B%2B%22%20will%20remember%20that.%22%2C%5B%7BhM%3Adi%2ChX%3A()%3D%3EG._l()%7D%5D)%7Dbg()%7B!G.bP%26%26G.dl%26%26(U.fa()%2C_g(G%2C%22dW%22%2C0%2C-__%2C.3)%2CG.ci%7C%7C(V.ac%3DV.cR%3D1%2CsetTimeout(()%3D%3EG.bQ(new%20hc)%2C3e3))%2CG.df%3DG.ci%3F20%3A9%2CG.bP%3DG.ci%3D1%2Chk())%7DfK()%7Blet%20t%2Cs%3DU._b.filter(t%3D%3Et.B%26%26t.B._y()!%3Dt.B.fJ).map(t%3D%3Et.B)%2Ci%3Ds.filter(t%3D%3E%22%23f00%22%3D%3Dt._y()).length%2Ch%3Ds.filter(t%3D%3E%22%230f0%22%3D%3Dt._y()).length%3Bt%3Di%2Bh%3C10%3F%22you%20were%20barely%20noticed%22%3Aabs(i-h)%3C5%3F%22little%20has%20changed%22%3Ai%3Eh%3F%22you%20brought%20war%22%3A%22you%20brought%20peace%22%2CG.bZ%3D_E(%22game%20over%22)%2CG.c%24%3D_E(t)%2CG.cm%3D_E(%22press%20enter%20to%20send%20another%20ship%22)%2CG.cg%3D25%2CG.eY%3D50%2CG.hR%3D6%2CG.dl%3DG.bP%3D0%2CG.S%3D0%2C_g(G%2C%22dW%22%2C-__%2C0%2C.3%2C0%2C0%2C()%3D%3EG.eR())%2CsetTimeout(()%3D%3E%7BG.fo%3D%5Bi%2B%22%20planets%20have%20declared%20war%20against%20you%22%2Ch%2B%22%20species%20have%20become%20your%20allies%22%5D%2CG.dl%3D1%7D%2C4e3)%7DeR()%7BG.aJ%3Dnew%20ho%2CG._%24%3D(()%3D%3E0)%2CG.bP%3D0%2CG.dW%3D0%2CG.O%3D0%2CG._F%3D0%2CG.fo%3D%5B%5D%7Df%24()%7Blet%20t%3DG._%24()%7C%7C%22%22%2Cs%3D~~min(20*(G.S-G.hS)%2Ct.length)%3Breturn%20t.slice(0%2Cs)%2B(s%3Ct.length%7C%7CG.S%251%3E.5%3F%22_%22%3A%22%22)%7D%7Donload%3D(()%3D%3E%7Bonresize()%3Blet%20t%3Ddocument.querySelector(%22canvas%22)%3Bt.width%3D1e3%2Ct.height%3D__%2CR%3Dt.getContext(%222d%22)%2CObject.getOwnPropertyNames(p).forEach(t%3D%3E%7BR%5Bt%5D%26%26R%5Bt%5D.call%26%26(w%5Bt%5D%3Dp%5Bt%5D.bind(R))%7D)%2CR.font%3D%2299pt%20f%22%3Blet%20s%3DmeasureText(w.title).width%3Bfor(let%20t%20of%5B%22Mono%22%2C%22Courier%22%5D)if(R.font%3D%2299pt%20%22%2Bt%2CmeasureText(w.title).width!%3Ds)%7Bau%3Dt%3Bbreak%7Dnew%20hw%3Blet%20i%3DDate.now()%2Ch%3D()%3D%3E%7Blet%20t%3DDate.now()%2Cs%3D(t-i)%2F1e3%3Bi%3Dt%2CG.W(s)%2CrequestAnimationFrame(h)%7D%3Bh%0A()%7D)%3B%7D)()%3B"
        >EveryOnesSky.SPG</a
      >

      <br />
      <a
        href="javascript:(function()%7Bjavascript%3A(function()%7Bdocument.body.innerHTML%20%3D%20%60%3C!DOCTYPE%20html%3E%0A%3Chtml%3E%0A%20%20%3Chead%3E%0A%20%20%20%20%3Ctitle%3EJavascript%20Tetris%3C%2Ftitle%3E%0A%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20body%20%7B%0A%20%20%20%20%20%20%20%20font-family%3A%20Helvetica%2C%20sans-serif%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20margin%3A%201em%20auto%3B%0A%20%20%20%20%20%20%20%20padding%3A%201em%3B%0A%20%20%20%20%20%20%20%20border%3A%204px%20solid%20black%3B%0A%20%20%20%20%20%20%20%20border-radius%3A%2010px%3B%0A%20%20%20%20%20%20%20%20background-color%3A%20%23f8f8f8%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23stats%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20inline-block%3B%0A%20%20%20%20%20%20%20%20vertical-align%3A%20top%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20inline-block%3B%0A%20%20%20%20%20%20%20%20vertical-align%3A%20top%3B%0A%20%20%20%20%20%20%20%20background%3A%20url(texture.jpg)%3B%0A%20%20%20%20%20%20%20%20box-shadow%3A%2010px%2010px%2010px%20%23999%3B%0A%20%20%20%20%20%20%20%20border%3A%202px%20solid%20%23333%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20inline-block%3B%0A%20%20%20%20%20%20%20%20vertical-align%3A%20top%3B%0A%20%20%20%20%20%20%20%20position%3A%20relative%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23menu%20p%20%7B%0A%20%20%20%20%20%20%20%20margin%3A%200.5em%200%3B%0A%20%20%20%20%20%20%20%20text-align%3A%20center%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23menu%20p%20a%20%7B%0A%20%20%20%20%20%20%20%20text-decoration%3A%20none%3B%0A%20%20%20%20%20%20%20%20color%3A%20black%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20display%3A%20block%3B%0A%20%20%20%20%20%20%20%20margin%3A%200%20auto%3B%0A%20%20%20%20%20%20%20%20background-color%3A%20%23e0e0e0%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23score%20%7B%0A%20%20%20%20%20%20%20%20color%3A%20red%3B%0A%20%20%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20%20%20%20%20vertical-align%3A%20middle%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23rows%20%7B%0A%20%20%20%20%20%20%20%20color%3A%20blue%3B%0A%20%20%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20%20%20%20%20vertical-align%3A%20middle%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%23stats%20%7B%0A%20%20%20%20%20%20%20%20position%3A%20absolute%3B%0A%20%20%20%20%20%20%20%20bottom%3A%200em%3B%0A%20%20%20%20%20%20%20%20right%3A%201em%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%200px)%20and%20(min-height%3A%200px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%200.75em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20250px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20100px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%2050px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%2050px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20100px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2010px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20400px)%20and%20(min-height%3A%20400px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%201em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20350px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20150px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20300px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%2075px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%2075px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20150px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20300px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2015px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20500px)%20and%20(min-height%3A%20500px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%201.25em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20450px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20100px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20100px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2020px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20600px)%20and%20(min-height%3A%20600px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%201.5em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20550px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20250px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20500px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20125px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20125px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20250px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20500px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2025px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20700px)%20and%20(min-height%3A%20700px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%201.75em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20650px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20300px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20600px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20150px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20150px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20300px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20600px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2030px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20800px)%20and%20(min-height%3A%20800px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%202em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20750px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20350px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20700px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20175px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20175px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20350px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20700px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2035px%20chunks%20*%2F%0A%20%20%20%20%20%20%40media%20screen%20and%20(min-width%3A%20900px)%20and%20(min-height%3A%20900px)%20%7B%0A%20%20%20%20%20%20%20%20%23tetris%20%7B%0A%20%20%20%20%20%20%20%20%20%20font-size%3A%202.25em%3B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20850px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23menu%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20800px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23upcoming%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20200px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%23canvas%20%7B%0A%20%20%20%20%20%20%20%20%20%20width%3A%20400px%3B%0A%20%20%20%20%20%20%20%20%20%20height%3A%20800px%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%20%2F*%2040px%20chunks%20*%2F%0A%20%20%20%20%3C%2Fstyle%3E%0A%20%20%3C%2Fhead%3E%0A%0A%20%20%3Cbody%3E%0A%20%20%20%20%3Cdiv%20id%3D%22tetris%22%3E%0A%20%20%20%20%20%20%3Cdiv%20id%3D%22menu%22%3E%0A%20%20%20%20%20%20%20%20%3Cp%20id%3D%22start%22%3E%3Ca%20href%3D%22javascript%3Aplay()%3B%22%3EPress%20Space%20to%20Play.%3C%2Fa%3E%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cp%3E%3Ccanvas%20id%3D%22upcoming%22%3E%3C%2Fcanvas%3E%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cp%3Escore%20%3Cspan%20id%3D%22score%22%3E00000%3C%2Fspan%3E%3C%2Fp%3E%0A%20%20%20%20%20%20%20%20%3Cp%3Erows%20%3Cspan%20id%3D%22rows%22%3E0%3C%2Fspan%3E%3C%2Fp%3E%0A%20%20%20%20%20%20%3C%2Fdiv%3E%0A%20%20%20%20%20%20%3Ccanvas%20id%3D%22canvas%22%3E%0A%20%20%20%20%20%20%20%20Sorry%2C%20this%20example%20cannot%20be%20run%20because%20your%20browser%20does%20not%20support%0A%20%20%20%20%20%20%20%20the%20%26lt%3Bcanvas%26gt%3B%20element%0A%20%20%20%20%20%20%3C%2Fcanvas%3E%0A%20%20%20%20%3C%2Fdiv%3E%0A%0A%20%20%3C%2Fbody%3E%0A%3C%2Fhtml%3E%60%0A%0A%0A%20%20%20%20%2F%2F%20stats.js%20r6%20-%20http%3A%2F%2Fgithub.com%2Fmrdoob%2Fstats.js%0Avar%20Stats%3Dfunction()%7Bfunction%20s(a%2Cg%2Cd)%7Bvar%20f%2Cc%2Ce%3Bfor(c%3D0%3Bc%3C30%3Bc%2B%2B)for(f%3D0%3Bf%3C73%3Bf%2B%2B)e%3D(f%2Bc*74)*4%2Ca%5Be%5D%3Da%5Be%2B4%5D%2Ca%5Be%2B1%5D%3Da%5Be%2B5%5D%2Ca%5Be%2B2%5D%3Da%5Be%2B6%5D%3Bfor(c%3D0%3Bc%3C30%3Bc%2B%2B)e%3D(73%2Bc*74)*4%2Cc%3Cg%3F(a%5Be%5D%3Db%5Bd%5D.bg.r%2Ca%5Be%2B1%5D%3Db%5Bd%5D.bg.g%2Ca%5Be%2B2%5D%3Db%5Bd%5D.bg.b)%3A(a%5Be%5D%3Db%5Bd%5D.fg.r%2Ca%5Be%2B1%5D%3Db%5Bd%5D.fg.g%2Ca%5Be%2B2%5D%3Db%5Bd%5D.fg.b)%7Dvar%20r%3D0%2Ct%3D2%2Cg%2Cu%3D0%2Cj%3D(new%20Date).getTime()%2CF%3Dj%2Cv%3Dj%2Cl%3D0%2Cw%3D1E3%2Cx%3D0%2Ck%2Cd%2Ca%2Cm%2Cy%2Cn%3D0%2Cz%3D1E3%2CA%3D0%2Cf%2Cc%2Co%2CB%2Cp%3D0%2CC%3D1E3%2CD%3D0%2Ch%2Ci%2Cq%2CE%2Cb%3D%7Bfps%3A%7Bbg%3A%7Br%3A16%2Cg%3A16%2Cb%3A48%7D%2Cfg%3A%7Br%3A0%2Cg%3A255%2Cb%3A255%7D%7D%2Cms%3A%7Bbg%3A%7Br%3A16%2Cg%3A48%2Cb%3A16%7D%2Cfg%3A%7Br%3A0%2Cg%3A255%2Cb%3A0%7D%7D%2Cmb%3A%7Bbg%3A%7Br%3A48%2Cg%3A16%2C%0Ab%3A26%7D%2Cfg%3A%7Br%3A255%2Cg%3A0%2Cb%3A128%7D%7D%7D%3Bg%3Ddocument.createElement(%22div%22)%3Bg.style.cursor%3D%22pointer%22%3Bg.style.width%3D%2280px%22%3Bg.style.opacity%3D%220.9%22%3Bg.style.zIndex%3D%2210001%22%3Bg.addEventListener(%22click%22%2Cfunction()%7Br%2B%2B%3Br%3D%3Dt%26%26(r%3D0)%3Bk.style.display%3D%22none%22%3Bf.style.display%3D%22none%22%3Bh.style.display%3D%22none%22%3Bswitch(r)%7Bcase%200%3Ak.style.display%3D%22block%22%3Bbreak%3Bcase%201%3Af.style.display%3D%22block%22%3Bbreak%3Bcase%202%3Ah.style.display%3D%22block%22%7D%7D%2C!1)%3Bk%3Ddocument.createElement(%22div%22)%3Bk.style.backgroundColor%3D%22rgb(%22%2BMath.floor(b.fps.bg.r%2F2)%2B%22%2C%22%2BMath.floor(b.fps.bg.g%2F%0A2)%2B%22%2C%22%2BMath.floor(b.fps.bg.b%2F2)%2B%22)%22%3Bk.style.padding%3D%222px%200px%203px%200px%22%3Bg.appendChild(k)%3Bd%3Ddocument.createElement(%22div%22)%3Bd.style.fontFamily%3D%22Helvetica%2C%20Arial%2C%20sans-serif%22%3Bd.style.textAlign%3D%22left%22%3Bd.style.fontSize%3D%229px%22%3Bd.style.color%3D%22rgb(%22%2Bb.fps.fg.r%2B%22%2C%22%2Bb.fps.fg.g%2B%22%2C%22%2Bb.fps.fg.b%2B%22)%22%3Bd.style.margin%3D%220px%200px%201px%203px%22%3Bd.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3EFPS%3C%2Fspan%3E'%3Bk.appendChild(d)%3Ba%3Ddocument.createElement(%22canvas%22)%3Ba.width%3D74%3Ba.height%3D30%3Ba.style.display%3D%22block%22%3Ba.style.marginLeft%3D%223px%22%3Bk.appendChild(a)%3B%0Am%3Da.getContext(%222d%22)%3Bm.fillStyle%3D%22rgb(%22%2Bb.fps.bg.r%2B%22%2C%22%2Bb.fps.bg.g%2B%22%2C%22%2Bb.fps.bg.b%2B%22)%22%3Bm.fillRect(0%2C0%2Ca.width%2Ca.height)%3By%3Dm.getImageData(0%2C0%2Ca.width%2Ca.height)%3Bf%3Ddocument.createElement(%22div%22)%3Bf.style.backgroundColor%3D%22rgb(%22%2BMath.floor(b.ms.bg.r%2F2)%2B%22%2C%22%2BMath.floor(b.ms.bg.g%2F2)%2B%22%2C%22%2BMath.floor(b.ms.bg.b%2F2)%2B%22)%22%3Bf.style.padding%3D%222px%200px%203px%200px%22%3Bf.style.display%3D%22none%22%3Bg.appendChild(f)%3Bc%3Ddocument.createElement(%22div%22)%3Bc.style.fontFamily%3D%22Helvetica%2C%20Arial%2C%20sans-serif%22%3Bc.style.textAlign%3D%22left%22%3Bc.style.fontSize%3D%0A%229px%22%3Bc.style.color%3D%22rgb(%22%2Bb.ms.fg.r%2B%22%2C%22%2Bb.ms.fg.g%2B%22%2C%22%2Bb.ms.fg.b%2B%22)%22%3Bc.style.margin%3D%220px%200px%201px%203px%22%3Bc.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3EMS%3C%2Fspan%3E'%3Bf.appendChild(c)%3Ba%3Ddocument.createElement(%22canvas%22)%3Ba.width%3D74%3Ba.height%3D30%3Ba.style.display%3D%22block%22%3Ba.style.marginLeft%3D%223px%22%3Bf.appendChild(a)%3Bo%3Da.getContext(%222d%22)%3Bo.fillStyle%3D%22rgb(%22%2Bb.ms.bg.r%2B%22%2C%22%2Bb.ms.bg.g%2B%22%2C%22%2Bb.ms.bg.b%2B%22)%22%3Bo.fillRect(0%2C0%2Ca.width%2Ca.height)%3BB%3Do.getImageData(0%2C0%2Ca.width%2Ca.height)%3Btry%7Bperformance%26%26performance.memory%26%26performance.memory.totalJSHeapSize%26%26%0A(t%3D3)%7Dcatch(G)%7B%7Dh%3Ddocument.createElement(%22div%22)%3Bh.style.backgroundColor%3D%22rgb(%22%2BMath.floor(b.mb.bg.r%2F2)%2B%22%2C%22%2BMath.floor(b.mb.bg.g%2F2)%2B%22%2C%22%2BMath.floor(b.mb.bg.b%2F2)%2B%22)%22%3Bh.style.padding%3D%222px%200px%203px%200px%22%3Bh.style.display%3D%22none%22%3Bg.appendChild(h)%3Bi%3Ddocument.createElement(%22div%22)%3Bi.style.fontFamily%3D%22Helvetica%2C%20Arial%2C%20sans-serif%22%3Bi.style.textAlign%3D%22left%22%3Bi.style.fontSize%3D%229px%22%3Bi.style.color%3D%22rgb(%22%2Bb.mb.fg.r%2B%22%2C%22%2Bb.mb.fg.g%2B%22%2C%22%2Bb.mb.fg.b%2B%22)%22%3Bi.style.margin%3D%220px%200px%201px%203px%22%3Bi.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3EMB%3C%2Fspan%3E'%3B%0Ah.appendChild(i)%3Ba%3Ddocument.createElement(%22canvas%22)%3Ba.width%3D74%3Ba.height%3D30%3Ba.style.display%3D%22block%22%3Ba.style.marginLeft%3D%223px%22%3Bh.appendChild(a)%3Bq%3Da.getContext(%222d%22)%3Bq.fillStyle%3D%22%23301010%22%3Bq.fillRect(0%2C0%2Ca.width%2Ca.height)%3BE%3Dq.getImageData(0%2C0%2Ca.width%2Ca.height)%3Breturn%7BdomElement%3Ag%2Cupdate%3Afunction()%7Bu%2B%2B%3Bj%3D(new%20Date).getTime()%3Bn%3Dj-F%3Bz%3DMath.min(z%2Cn)%3BA%3DMath.max(A%2Cn)%3Bs(B.data%2CMath.min(30%2C30-n%2F200*30)%2C%22ms%22)%3Bc.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3E'%2Bn%2B%22%20MS%3C%2Fspan%3E%20(%22%2Bz%2B%22-%22%2BA%2B%22)%22%3Bo.putImageData(B%2C0%2C0)%3BF%3Dj%3Bif(j%3E%0Av%2B1E3)%7Bl%3DMath.round(u*1E3%2F(j-v))%3Bw%3DMath.min(w%2Cl)%3Bx%3DMath.max(x%2Cl)%3Bs(y.data%2CMath.min(30%2C30-l%2F100*30)%2C%22fps%22)%3Bd.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3E'%2Bl%2B%22%20FPS%3C%2Fspan%3E%20(%22%2Bw%2B%22-%22%2Bx%2B%22)%22%3Bm.putImageData(y%2C0%2C0)%3Bif(t%3D%3D3)p%3Dperformance.memory.usedJSHeapSize*9.54E-7%2CC%3DMath.min(C%2Cp)%2CD%3DMath.max(D%2Cp)%2Cs(E.data%2CMath.min(30%2C30-p%2F2)%2C%22mb%22)%2Ci.innerHTML%3D'%3Cspan%20style%3D%22font-weight%3Abold%22%3E'%2BMath.round(p)%2B%22%20MB%3C%2Fspan%3E%20(%22%2BMath.round(C)%2B%22-%22%2BMath.round(D)%2B%22)%22%2Cq.putImageData(E%2C0%2C0)%3Bv%3Dj%3Bu%3D0%7D%7D%7D%7D%3B%0A%0A%20%20%20%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20base%20helper%20methods%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20function%20get(id)%20%7B%0A%20%20%20%20%20%20%20%20return%20document.getElementById(id)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20hide(id)%20%7B%0A%20%20%20%20%20%20%20%20get(id).style.visibility%20%3D%20%22hidden%22%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20show(id)%20%7B%0A%20%20%20%20%20%20%20%20get(id).style.visibility%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20html(id%2C%20html)%20%7B%0A%20%20%20%20%20%20%20%20get(id).innerHTML%20%3D%20html%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20timestamp()%20%7B%0A%20%20%20%20%20%20%20%20return%20new%20Date().getTime()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20random(min%2C%20max)%20%7B%0A%20%20%20%20%20%20%20%20return%20min%20%2B%20Math.random()%20*%20(max%20-%20min)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20randomChoice(choices)%20%7B%0A%20%20%20%20%20%20%20%20return%20choices%5BMath.round(random(0%2C%20choices.length%20-%201))%5D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(!window.requestAnimationFrame)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20http%3A%2F%2Fpaulirish.com%2F2011%2Frequestanimationframe-for-smart-animating%2F%0A%20%20%20%20%20%20%20%20window.requestAnimationFrame%20%3D%0A%20%20%20%20%20%20%20%20%20%20window.webkitRequestAnimationFrame%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20window.mozRequestAnimationFrame%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20window.oRequestAnimationFrame%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20window.msRequestAnimationFrame%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20function%20(callback%2C%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20window.setTimeout(callback%2C%201000%20%2F%2060)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20game%20constants%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20var%20KEY%20%3D%20%7B%20ESC%3A%2027%2C%20SPACE%3A%2032%2C%20LEFT%3A%2037%2C%20UP%3A%2038%2C%20RIGHT%3A%2039%2C%20DOWN%3A%2040%20%7D%2C%0A%20%20%20%20%20%20%20%20DIR%20%3D%20%7B%20UP%3A%200%2C%20RIGHT%3A%201%2C%20DOWN%3A%202%2C%20LEFT%3A%203%2C%20MIN%3A%200%2C%20MAX%3A%203%20%7D%2C%0A%20%20%20%20%20%20%20%20stats%20%3D%20new%20Stats()%2C%0A%20%20%20%20%20%20%20%20canvas%20%3D%20get(%22canvas%22)%2C%0A%20%20%20%20%20%20%20%20ctx%20%3D%20canvas.getContext(%222d%22)%2C%0A%20%20%20%20%20%20%20%20ucanvas%20%3D%20get(%22upcoming%22)%2C%0A%20%20%20%20%20%20%20%20uctx%20%3D%20ucanvas.getContext(%222d%22)%2C%0A%20%20%20%20%20%20%20%20speed%20%3D%20%7B%20start%3A%200.6%2C%20decrement%3A%200.005%2C%20min%3A%200.1%20%7D%2C%20%2F%2F%20how%20long%20before%20piece%20drops%20by%201%20row%20(seconds)%0A%20%20%20%20%20%20%20%20nx%20%3D%2010%2C%20%2F%2F%20width%20of%20tetris%20court%20(in%20blocks)%0A%20%20%20%20%20%20%20%20ny%20%3D%2020%2C%20%2F%2F%20height%20of%20tetris%20court%20(in%20blocks)%0A%20%20%20%20%20%20%20%20nu%20%3D%205%3B%20%2F%2F%20width%2Fheight%20of%20upcoming%20preview%20(in%20blocks)%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20game%20variables%20(initialized%20during%20reset)%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20var%20dx%2C%0A%20%20%20%20%20%20%20%20dy%2C%20%2F%2F%20pixel%20size%20of%20a%20single%20tetris%20block%0A%20%20%20%20%20%20%20%20blocks%2C%20%2F%2F%202%20dimensional%20array%20(nx*ny)%20representing%20tetris%20court%20-%20either%20empty%20block%20or%20occupied%20by%20a%20'piece'%0A%20%20%20%20%20%20%20%20actions%2C%20%2F%2F%20queue%20of%20user%20actions%20(inputs)%0A%20%20%20%20%20%20%20%20playing%2C%20%2F%2F%20true%7Cfalse%20-%20game%20is%20in%20progress%0A%20%20%20%20%20%20%20%20dt%2C%20%2F%2F%20time%20since%20starting%20this%20game%0A%20%20%20%20%20%20%20%20current%2C%20%2F%2F%20the%20current%20piece%0A%20%20%20%20%20%20%20%20next%2C%20%2F%2F%20the%20next%20piece%0A%20%20%20%20%20%20%20%20score%2C%20%2F%2F%20the%20current%20score%0A%20%20%20%20%20%20%20%20vscore%2C%20%2F%2F%20the%20currently%20displayed%20score%20(it%20catches%20up%20to%20score%20in%20small%20chunks%20-%20like%20a%20spinning%20slot%20machine)%0A%20%20%20%20%20%20%20%20rows%2C%20%2F%2F%20number%20of%20completed%20rows%20in%20the%20current%20game%0A%20%20%20%20%20%20%20%20step%3B%20%2F%2F%20how%20long%20before%20current%20piece%20drops%20by%201%20row%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20tetris%20pieces%0A%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%2F%2F%20blocks%3A%20each%20element%20represents%20a%20rotation%20of%20the%20piece%20(0%2C%2090%2C%20180%2C%20270)%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20each%20element%20is%20a%2016%20bit%20integer%20where%20the%2016%20bits%20represent%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20a%204x4%20set%20of%20blocks%2C%20e.g.%20j.blocks%5B0%5D%20%3D%200x44C0%0A%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%200100%20%3D%200x4%20%3C%3C%203%20%3D%200x4000%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%200100%20%3D%200x4%20%3C%3C%202%20%3D%200x0400%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%201100%20%3D%200xC%20%3C%3C%201%20%3D%200x00C0%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%200000%20%3D%200x0%20%3C%3C%200%20%3D%200x0000%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20------%0A%20%20%20%20%20%20%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200x44C0%0A%20%20%20%20%20%20%2F%2F%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20var%20i%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%204%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x0f00%2C%200x2222%2C%200x00f0%2C%200x4444%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22cyan%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20j%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%203%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x44c0%2C%200x8e00%2C%200x6440%2C%200x0e20%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22blue%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20l%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%203%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x4460%2C%200x0e80%2C%200xc440%2C%200x2e00%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22orange%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20o%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%202%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0xcc00%2C%200xcc00%2C%200xcc00%2C%200xcc00%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22yellow%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20s%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%203%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x06c0%2C%200x8c40%2C%200x6c00%2C%200x4620%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22green%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20t%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%203%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x0e40%2C%200x4c40%2C%200x4e00%2C%200x4640%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22purple%22%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20var%20z%20%3D%20%7B%0A%20%20%20%20%20%20%20%20size%3A%203%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B0x0c60%2C%200x4c80%2C%200xc600%2C%200x2640%5D%2C%0A%20%20%20%20%20%20%20%20color%3A%20%22red%22%0A%20%20%20%20%20%20%7D%3B%0A%0A%20%20%20%20%20%20%2F%2F------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20do%20the%20bit%20manipulation%20and%20iterate%20through%20each%0A%20%20%20%20%20%20%2F%2F%20occupied%20block%20(x%2Cy)%20for%20a%20given%20piece%0A%20%20%20%20%20%20%2F%2F------------------------------------------------%0A%20%20%20%20%20%20function%20eachblock(type%2C%20x%2C%20y%2C%20dir%2C%20fn)%20%7B%0A%20%20%20%20%20%20%20%20var%20bit%2C%0A%20%20%20%20%20%20%20%20%20%20result%2C%0A%20%20%20%20%20%20%20%20%20%20row%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20col%20%3D%200%2C%0A%20%20%20%20%20%20%20%20%20%20blocks%20%3D%20type.blocks%5Bdir%5D%3B%0A%20%20%20%20%20%20%20%20for%20(bit%20%3D%200x8000%3B%20bit%20%3E%200%3B%20bit%20%3D%20bit%20%3E%3E%201)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(blocks%20%26%20bit)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20fn(x%20%2B%20col%2C%20y%20%2B%20row)%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(%2B%2Bcol%20%3D%3D%3D%204)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20col%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Brow%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-----------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20check%20if%20a%20piece%20can%20fit%20into%20a%20position%20in%20the%20grid%0A%20%20%20%20%20%20%2F%2F-----------------------------------------------------%0A%20%20%20%20%20%20function%20occupied(type%2C%20x%2C%20y%2C%20dir)%20%7B%0A%20%20%20%20%20%20%20%20var%20result%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20eachblock(type%2C%20x%2C%20y%2C%20dir%2C%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(x%20%3C%200%20%7C%7C%20x%20%3E%3D%20nx%20%7C%7C%20y%20%3C%200%20%7C%7C%20y%20%3E%3D%20ny%20%7C%7C%20getBlock(x%2C%20y))%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20unoccupied(type%2C%20x%2C%20y%2C%20dir)%20%7B%0A%20%20%20%20%20%20%20%20return%20!occupied(type%2C%20x%2C%20y%2C%20dir)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-----------------------------------------%0A%20%20%20%20%20%20%2F%2F%20start%20with%204%20instances%20of%20each%20piece%20and%0A%20%20%20%20%20%20%2F%2F%20pick%20randomly%20until%20the%20'bag%20is%20empty'%0A%20%20%20%20%20%20%2F%2F-----------------------------------------%0A%20%20%20%20%20%20var%20pieces%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20function%20randomPiece()%20%7B%0A%20%20%20%20%20%20%20%20if%20(pieces.length%20%3D%3D%200)%0A%20%20%20%20%20%20%20%20%20%20pieces%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20i%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20i%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20i%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20i%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20j%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20l%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20o%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20t%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20t%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20t%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20t%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20z%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20z%0A%20%20%20%20%20%20%20%20%20%20%5D%3B%0A%20%20%20%20%20%20%20%20var%20type%20%3D%20pieces.splice(random(0%2C%20pieces.length%20-%201)%2C%201)%5B0%5D%3B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20type%3A%20type%2C%0A%20%20%20%20%20%20%20%20%20%20dir%3A%20DIR.UP%2C%0A%20%20%20%20%20%20%20%20%20%20x%3A%20Math.round(random(0%2C%20nx%20-%20type.size))%2C%0A%20%20%20%20%20%20%20%20%20%20y%3A%200%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20GAME%20LOOP%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20function%20run()%20%7B%0A%20%20%20%20%20%20%20%20showStats()%3B%20%2F%2F%20initialize%20FPS%20counter%0A%20%20%20%20%20%20%20%20addEvents()%3B%20%2F%2F%20attach%20keydown%20and%20resize%20events%0A%0A%20%20%20%20%20%20%20%20var%20last%20%3D%20(now%20%3D%20timestamp())%3B%0A%20%20%20%20%20%20%20%20function%20frame()%20%7B%0A%20%20%20%20%20%20%20%20%20%20now%20%3D%20timestamp()%3B%0A%20%20%20%20%20%20%20%20%20%20update(Math.min(1%2C%20(now%20-%20last)%20%2F%201000.0))%3B%20%2F%2F%20using%20requestAnimationFrame%20have%20to%20be%20able%20to%20handle%20large%20delta's%20caused%20when%20it%20'hibernates'%20in%20a%20background%20or%20non-visible%20tab%0A%20%20%20%20%20%20%20%20%20%20draw()%3B%0A%20%20%20%20%20%20%20%20%20%20stats.update()%3B%0A%20%20%20%20%20%20%20%20%20%20last%20%3D%20now%3B%0A%20%20%20%20%20%20%20%20%20%20requestAnimationFrame(frame%2C%20canvas)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20resize()%3B%20%2F%2F%20setup%20all%20our%20sizing%20information%0A%20%20%20%20%20%20%20%20reset()%3B%20%2F%2F%20reset%20the%20per-game%20variables%0A%20%20%20%20%20%20%20%20frame()%3B%20%2F%2F%20start%20the%20first%20frame%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20showStats()%20%7B%0A%20%20%20%20%20%20%20%20stats.domElement.id%20%3D%20%22stats%22%3B%0A%20%20%20%20%20%20%20%20get(%22menu%22).appendChild(stats.domElement)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20addEvents()%20%7B%0A%20%20%20%20%20%20%20%20document.addEventListener(%22keydown%22%2C%20keydown%2C%20false)%3B%0A%20%20%20%20%20%20%20%20window.addEventListener(%22resize%22%2C%20resize%2C%20false)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20resize(event)%20%7B%0A%20%20%20%20%20%20%20%20canvas.width%20%3D%20canvas.clientWidth%3B%20%2F%2F%20set%20canvas%20logical%20size%20equal%20to%20its%20physical%20size%0A%20%20%20%20%20%20%20%20canvas.height%20%3D%20canvas.clientHeight%3B%20%2F%2F%20(ditto)%0A%20%20%20%20%20%20%20%20ucanvas.width%20%3D%20ucanvas.clientWidth%3B%0A%20%20%20%20%20%20%20%20ucanvas.height%20%3D%20ucanvas.clientHeight%3B%0A%20%20%20%20%20%20%20%20dx%20%3D%20canvas.width%20%2F%20nx%3B%20%2F%2F%20pixel%20size%20of%20a%20single%20tetris%20block%0A%20%20%20%20%20%20%20%20dy%20%3D%20canvas.height%20%2F%20ny%3B%20%2F%2F%20(ditto)%0A%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%20%20invalidateNext()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20keydown(ev)%20%7B%0A%20%20%20%20%20%20%20%20var%20handled%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20if%20(playing)%20%7B%0A%20%20%20%20%20%20%20%20%20%20switch%20(ev.keyCode)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20KEY.LEFT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20actions.push(DIR.LEFT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20KEY.RIGHT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20actions.push(DIR.RIGHT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20KEY.UP%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20actions.push(DIR.UP)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20KEY.DOWN%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20actions.push(DIR.DOWN)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20case%20KEY.ESC%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20lose()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20(ev.keyCode%20%3D%3D%20KEY.SPACE)%20%7B%0A%20%20%20%20%20%20%20%20%20%20play()%3B%0A%20%20%20%20%20%20%20%20%20%20handled%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(handled)%20ev.preventDefault()%3B%20%2F%2F%20prevent%20arrow%20keys%20from%20scrolling%20the%20page%20(supported%20in%20IE9%2B%20and%20all%20other%20browsers)%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20GAME%20LOGIC%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20function%20play()%20%7B%0A%20%20%20%20%20%20%20%20hide(%22start%22)%3B%0A%20%20%20%20%20%20%20%20reset()%3B%0A%20%20%20%20%20%20%20%20playing%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20lose()%20%7B%0A%20%20%20%20%20%20%20%20show(%22start%22)%3B%0A%20%20%20%20%20%20%20%20setVisualScore()%3B%0A%20%20%20%20%20%20%20%20playing%20%3D%20false%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20setVisualScore(n)%20%7B%0A%20%20%20%20%20%20%20%20vscore%20%3D%20n%20%7C%7C%20score%3B%0A%20%20%20%20%20%20%20%20invalidateScore()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20setScore(n)%20%7B%0A%20%20%20%20%20%20%20%20score%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20setVisualScore(n)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20addScore(n)%20%7B%0A%20%20%20%20%20%20%20%20score%20%3D%20score%20%2B%20n%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20clearScore()%20%7B%0A%20%20%20%20%20%20%20%20setScore(0)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20clearRows()%20%7B%0A%20%20%20%20%20%20%20%20setRows(0)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20setRows(n)%20%7B%0A%20%20%20%20%20%20%20%20rows%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20step%20%3D%20Math.max(speed.min%2C%20speed.start%20-%20speed.decrement%20*%20rows)%3B%0A%20%20%20%20%20%20%20%20invalidateRows()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20addRows(n)%20%7B%0A%20%20%20%20%20%20%20%20setRows(rows%20%2B%20n)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20getBlock(x%2C%20y)%20%7B%0A%20%20%20%20%20%20%20%20return%20blocks%20%26%26%20blocks%5Bx%5D%20%3F%20blocks%5Bx%5D%5By%5D%20%3A%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20setBlock(x%2C%20y%2C%20type)%20%7B%0A%20%20%20%20%20%20%20%20blocks%5Bx%5D%20%3D%20blocks%5Bx%5D%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20blocks%5Bx%5D%5By%5D%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20clearBlocks()%20%7B%0A%20%20%20%20%20%20%20%20blocks%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20clearActions()%20%7B%0A%20%20%20%20%20%20%20%20actions%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20setCurrentPiece(piece)%20%7B%0A%20%20%20%20%20%20%20%20current%20%3D%20piece%20%7C%7C%20randomPiece()%3B%0A%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20setNextPiece(piece)%20%7B%0A%20%20%20%20%20%20%20%20next%20%3D%20piece%20%7C%7C%20randomPiece()%3B%0A%20%20%20%20%20%20%20%20invalidateNext()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20reset()%20%7B%0A%20%20%20%20%20%20%20%20dt%20%3D%200%3B%0A%20%20%20%20%20%20%20%20clearActions()%3B%0A%20%20%20%20%20%20%20%20clearBlocks()%3B%0A%20%20%20%20%20%20%20%20clearRows()%3B%0A%20%20%20%20%20%20%20%20clearScore()%3B%0A%20%20%20%20%20%20%20%20setCurrentPiece(next)%3B%0A%20%20%20%20%20%20%20%20setNextPiece()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20update(idt)%20%7B%0A%20%20%20%20%20%20%20%20if%20(playing)%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(vscore%20%3C%20score)%20setVisualScore(vscore%20%2B%201)%3B%0A%20%20%20%20%20%20%20%20%20%20handle(actions.shift())%3B%0A%20%20%20%20%20%20%20%20%20%20dt%20%3D%20dt%20%2B%20idt%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(dt%20%3E%20step)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20dt%20%3D%20dt%20-%20step%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20drop()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20handle(action)%20%7B%0A%20%20%20%20%20%20%20%20switch%20(action)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.LEFT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20move(DIR.LEFT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.RIGHT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20move(DIR.RIGHT)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.UP%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20rotate()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.DOWN%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20drop()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20move(dir)%20%7B%0A%20%20%20%20%20%20%20%20var%20x%20%3D%20current.x%2C%0A%20%20%20%20%20%20%20%20%20%20y%20%3D%20current.y%3B%0A%20%20%20%20%20%20%20%20switch%20(dir)%20%7B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.RIGHT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20x%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.LEFT%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20x%20-%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20case%20DIR.DOWN%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20y%20%2B%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(unoccupied(current.type%2C%20x%2C%20y%2C%20current.dir))%20%7B%0A%20%20%20%20%20%20%20%20%20%20current.x%20%3D%20x%3B%0A%20%20%20%20%20%20%20%20%20%20current.y%20%3D%20y%3B%0A%20%20%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20rotate()%20%7B%0A%20%20%20%20%20%20%20%20var%20newdir%20%3D%20current.dir%20%3D%3D%20DIR.MAX%20%3F%20DIR.MIN%20%3A%20current.dir%20%2B%201%3B%0A%20%20%20%20%20%20%20%20if%20(unoccupied(current.type%2C%20current.x%2C%20current.y%2C%20newdir))%20%7B%0A%20%20%20%20%20%20%20%20%20%20current.dir%20%3D%20newdir%3B%0A%20%20%20%20%20%20%20%20%20%20invalidate()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drop()%20%7B%0A%20%20%20%20%20%20%20%20if%20(!move(DIR.DOWN))%20%7B%0A%20%20%20%20%20%20%20%20%20%20addScore(10)%3B%0A%20%20%20%20%20%20%20%20%20%20dropPiece()%3B%0A%20%20%20%20%20%20%20%20%20%20removeLines()%3B%0A%20%20%20%20%20%20%20%20%20%20setCurrentPiece(next)%3B%0A%20%20%20%20%20%20%20%20%20%20setNextPiece(randomPiece())%3B%0A%20%20%20%20%20%20%20%20%20%20clearActions()%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(occupied(current.type%2C%20current.x%2C%20current.y%2C%20current.dir))%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20lose()%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20dropPiece()%20%7B%0A%20%20%20%20%20%20%20%20eachblock(current.type%2C%20current.x%2C%20current.y%2C%20current.dir%2C%20function%20(%0A%20%20%20%20%20%20%20%20%20%20x%2C%0A%20%20%20%20%20%20%20%20%20%20y%0A%20%20%20%20%20%20%20%20)%20%7B%0A%20%20%20%20%20%20%20%20%20%20setBlock(x%2C%20y%2C%20current.type)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20removeLines()%20%7B%0A%20%20%20%20%20%20%20%20var%20x%2C%0A%20%20%20%20%20%20%20%20%20%20y%2C%0A%20%20%20%20%20%20%20%20%20%20complete%2C%0A%20%20%20%20%20%20%20%20%20%20n%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(y%20%3D%20ny%3B%20y%20%3E%200%3B%20--y)%20%7B%0A%20%20%20%20%20%20%20%20%20%20complete%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(x%20%3D%200%3B%20x%20%3C%20nx%3B%20%2B%2Bx)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!getBlock(x%2C%20y))%20complete%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20if%20(complete)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20removeLine(y)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20y%20%2B%201%3B%20%2F%2F%20recheck%20same%20line%0A%20%20%20%20%20%20%20%20%20%20%20%20n%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(n%20%3E%200)%20%7B%0A%20%20%20%20%20%20%20%20%20%20addRows(n)%3B%0A%20%20%20%20%20%20%20%20%20%20addScore(100%20*%20Math.pow(2%2C%20n%20-%201))%3B%20%2F%2F%201%3A%20100%2C%202%3A%20200%2C%203%3A%20400%2C%204%3A%20800%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20removeLine(n)%20%7B%0A%20%20%20%20%20%20%20%20var%20x%2C%20y%3B%0A%20%20%20%20%20%20%20%20for%20(y%20%3D%20n%3B%20y%20%3E%3D%200%3B%20--y)%20%7B%0A%20%20%20%20%20%20%20%20%20%20for%20(x%20%3D%200%3B%20x%20%3C%20nx%3B%20%2B%2Bx)%0A%20%20%20%20%20%20%20%20%20%20%20%20setBlock(x%2C%20y%2C%20y%20%3D%3D%200%20%3F%20null%20%3A%20getBlock(x%2C%20y%20-%201))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20RENDERING%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20var%20invalid%20%3D%20%7B%7D%3B%0A%0A%20%20%20%20%20%20function%20invalidate()%20%7B%0A%20%20%20%20%20%20%20%20invalid.court%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20invalidateNext()%20%7B%0A%20%20%20%20%20%20%20%20invalid.next%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20invalidateScore()%20%7B%0A%20%20%20%20%20%20%20%20invalid.score%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20function%20invalidateRows()%20%7B%0A%20%20%20%20%20%20%20%20invalid.rows%20%3D%20true%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20draw()%20%7B%0A%20%20%20%20%20%20%20%20ctx.save()%3B%0A%20%20%20%20%20%20%20%20ctx.lineWidth%20%3D%201%3B%0A%20%20%20%20%20%20%20%20ctx.translate(0.5%2C%200.5)%3B%20%2F%2F%20for%20crisp%201px%20black%20lines%0A%20%20%20%20%20%20%20%20drawCourt()%3B%0A%20%20%20%20%20%20%20%20drawNext()%3B%0A%20%20%20%20%20%20%20%20drawScore()%3B%0A%20%20%20%20%20%20%20%20drawRows()%3B%0A%20%20%20%20%20%20%20%20ctx.restore()%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawCourt()%20%7B%0A%20%20%20%20%20%20%20%20if%20(invalid.court)%20%7B%0A%20%20%20%20%20%20%20%20%20%20ctx.clearRect(0%2C%200%2C%20canvas.width%2C%20canvas.height)%3B%0A%20%20%20%20%20%20%20%20%20%20if%20(playing)%0A%20%20%20%20%20%20%20%20%20%20%20%20drawPiece(ctx%2C%20current.type%2C%20current.x%2C%20current.y%2C%20current.dir)%3B%0A%20%20%20%20%20%20%20%20%20%20var%20x%2C%20y%2C%20block%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(y%20%3D%200%3B%20y%20%3C%20ny%3B%20y%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20(x%20%3D%200%3B%20x%20%3C%20nx%3B%20x%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20((block%20%3D%20getBlock(x%2C%20y)))%20drawBlock(ctx%2C%20x%2C%20y%2C%20block.color)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20ctx.strokeRect(0%2C%200%2C%20nx%20*%20dx%20-%201%2C%20ny%20*%20dy%20-%201)%3B%20%2F%2F%20court%20boundary%0A%20%20%20%20%20%20%20%20%20%20invalid.court%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawNext()%20%7B%0A%20%20%20%20%20%20%20%20if%20(invalid.next)%20%7B%0A%20%20%20%20%20%20%20%20%20%20var%20padding%20%3D%20(nu%20-%20next.type.size)%20%2F%202%3B%20%2F%2F%20half-arsed%20attempt%20at%20centering%20next%20piece%20display%0A%20%20%20%20%20%20%20%20%20%20uctx.save()%3B%0A%20%20%20%20%20%20%20%20%20%20uctx.translate(0.5%2C%200.5)%3B%0A%20%20%20%20%20%20%20%20%20%20uctx.clearRect(0%2C%200%2C%20nu%20*%20dx%2C%20nu%20*%20dy)%3B%0A%20%20%20%20%20%20%20%20%20%20drawPiece(uctx%2C%20next.type%2C%20padding%2C%20padding%2C%20next.dir)%3B%0A%20%20%20%20%20%20%20%20%20%20uctx.strokeStyle%20%3D%20%22black%22%3B%0A%20%20%20%20%20%20%20%20%20%20uctx.strokeRect(0%2C%200%2C%20nu%20*%20dx%20-%201%2C%20nu%20*%20dy%20-%201)%3B%0A%20%20%20%20%20%20%20%20%20%20uctx.restore()%3B%0A%20%20%20%20%20%20%20%20%20%20invalid.next%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawScore()%20%7B%0A%20%20%20%20%20%20%20%20if%20(invalid.score)%20%7B%0A%20%20%20%20%20%20%20%20%20%20html(%22score%22%2C%20(%2200000%22%20%2B%20Math.floor(vscore)).slice(-5))%3B%0A%20%20%20%20%20%20%20%20%20%20invalid.score%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawRows()%20%7B%0A%20%20%20%20%20%20%20%20if%20(invalid.rows)%20%7B%0A%20%20%20%20%20%20%20%20%20%20html(%22rows%22%2C%20rows)%3B%0A%20%20%20%20%20%20%20%20%20%20invalid.rows%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawPiece(ctx%2C%20type%2C%20x%2C%20y%2C%20dir)%20%7B%0A%20%20%20%20%20%20%20%20eachblock(type%2C%20x%2C%20y%2C%20dir%2C%20function%20(x%2C%20y)%20%7B%0A%20%20%20%20%20%20%20%20%20%20drawBlock(ctx%2C%20x%2C%20y%2C%20type.color)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20function%20drawBlock(ctx%2C%20x%2C%20y%2C%20color)%20%7B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20color%3B%0A%20%20%20%20%20%20%20%20ctx.fillRect(x%20*%20dx%2C%20y%20*%20dy%2C%20dx%2C%20dy)%3B%0A%20%20%20%20%20%20%20%20ctx.strokeRect(x%20*%20dx%2C%20y%20*%20dy%2C%20dx%2C%20dy)%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%20%20%20%20%20%20%2F%2F%20FINALLY%2C%20lets%20run%20the%20game%0A%20%20%20%20%20%20%2F%2F-------------------------------------------------------------------------%0A%0A%20%20%20%20%20%20run()%3B%7D)()%3B%7D)()%3B"
        >Tetris.SPG</a
      >

      <br />
      <a
        href="javascript:(function()%7Bjavascript%3A(function()%7Bjavascript%3A(function()%7Bfunction%20d(a%2Cb)%7Ba.setAttribute(%22data-css-storage%22%2Cb)%7Dfunction%20e(a)%7Bvar%20b%3Da.getAttribute(%22data-css-storage%22)%3Ba.removeAttribute(%22data-css-storage%22)%3Breturn%20b%7Dvar%20c%3D%5B%5D%3B(function()%7Bvar%20a%3Ddocument.body%2Cb%3Da.hasAttribute(%22data-css-disabled%22)%3Bb%3Fa.removeAttribute(%22data-css-disabled%22)%3Aa.setAttribute(%22data-css-disabled%22%2C%22%22)%3Breturn%20b%7D)()%3F(c%3Ddocument.querySelectorAll(%22%5Bdata-css-storage%5D%22)%2C%5B%5D.slice.call(c).forEach(function(a)%7B%22STYLE%22%3D%3D%3Da.tagName%3Fa.innerHTML%3De(a)%3A%22LINK%22%3D%3D%3Da.tagName%3Fa.disabled%3D!1%3Aa.style.cssText%3De(a)%7D))%3A(c%3Ddocument.querySelectorAll(%22%5Bstyle%5D%2C%20link%2C%20style%22)%2C%5B%5D.slice.call(c).forEach(function(a)%7B%22STYLE%22%3D%3D%3Da.tagName%3F(d(a%2Ca.innerHTML)%2Ca.innerHTML%3D%22%22)%3A%22LINK%22%3D%3D%3Da.tagName%3F(d(a%2C%22%22)%2Ca.disabled%3D!0)%3A(d(a%2Ca.style.cssText)%2Ca.style.cssText%3D%22%22)%7D))%7D)()%3B%0A%09%20document.body.innerHTML%20%3D%20%60%0A%3C!doctype%20html%3E%0A%3C!--%0A%20%20%20%20Bounce%20Back%20~%20A%20boomerang%20roguelike%20for%20JS13k%0A%20%20%20%20Copyright%20(C)%202019%20Frank%20Force%0A%0A%20%20%20%20This%20program%20is%20free%20software%3B%20you%20can%20redistribute%20it%20and%2For%20modify%0A%20%20%20%20it%20under%20the%20terms%20of%20the%20GNU%20General%20Public%20License%20as%20published%20by%0A%20%20%20%20the%20Free%20Software%20Foundation%3B%20either%20version%202%20of%20the%20License%2C%20or%0A%20%20%20%20(at%20your%20option)%20any%20later%20version.%0A%0A%20%20%20%20This%20program%20is%20distributed%20in%20the%20hope%20that%20it%20will%20be%20useful%2C%0A%20%20%20%20but%20WITHOUT%20ANY%20WARRANTY%3B%20without%20even%20the%20implied%20warranty%20of%0A%20%20%20%20MERCHANTABILITY%20or%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20%20See%20the%0A%20%20%20%20GNU%20General%20Public%20License%20for%20more%20details.%20%0A--%3E%20%20%20%20%0A%3C!--%0A%20%20%20%20When%20life%20gets%20you%20down%2C%20%0A%20%20%20%20it's%20never%20too%20late%20to...%0A%0A%20%20%20%20B%20O%20U%20N%20C%20E%20B%20A%20C%20K%0A%0A%20%20%20%20A%20JS13k%202019%20Game%0A%20%20%20%20By%20Frank%20Force%0A%0A%20%20%20%20WASD%20%3D%20Move%0A%20%20%20%20Mouse%20%3D%20Aim%0A%20%20%20%20Click%20%3D%20Throw%0A%20%20%20%20Space%20%3D%20Dash%0A%0A%20%20%20%20Hints%0A%20%20%20%20-%20You%20will%20keep%20money%20after%20you%20die!%0A%20%20%20%20-%20You%20won't%20take%20damage%20while%20dashing.%0A%20%20%20%20-%20There%20are%2010%20levels.%0A%20%20%20%20-%20Sand%20slows%20down%20you%20and%20enemies.%0A%20%20%20%20-%20Yellow%20boormang%20can%20grab%20pickups.%0A%20%20%20%20-%20Blue%20boomerang%20does%20double%20damage.%0A%20%20%20%20-%20Beat%20the%20game%20to%20unlock%20speed%20run%20mode.%0A--%3E%0A%0A%3Chtml%3E%0A%3Chead%3E%0A%3Ctitle%3EBounce%20Back%3C%2Ftitle%3E%0A%3Cstyle%3E%0Abody%0A%7B%0Abackground%3A%23000%3B%0Aoverflow%3Ahidden%3B%0Amargin%3A0%3B%0A%7D%0Acanvas%0A%7B%0Awidth%3A100%25%3B%0Aheight%3A100%25%3B%0Aimage-rendering%3A-moz-crisp-edges%3B%0Aimage-rendering%3Apixelated%3B%0A%7D%0A%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%3Cbody%3E%0A%3Ccanvas%20id%3Dc1%3E%3C%2Fcanvas%3E%0A%3Ccanvas%20id%3Dc2%20style%3Dvisibility%3Ahidden%3E%3C%2Fcanvas%3E%0A%0A%3C%2Fbody%3E%0A%3C%2Fhtml%3E%60%0A%2F*%0A%20%20%20%20Bounce%20Back%20~%20A%20boomerang%20roguelike%20for%20JS13k%0A%20%20%20%20Copyright%20(C)%202019%20Frank%20Force%0A%0A%20%20%20%20This%20program%20is%20free%20software%3B%20you%20can%20redistribute%20it%20and%2For%20modify%0A%20%20%20%20it%20under%20the%20terms%20of%20the%20GNU%20General%20Public%20License%20as%20published%20by%0A%20%20%20%20the%20Free%20Software%20Foundation%3B%20either%20version%202%20of%20the%20License%2C%20or%0A%20%20%20%20(at%20your%20option)%20any%20later%20version.%0A%0A%20%20%20%20This%20program%20is%20distributed%20in%20the%20hope%20that%20it%20will%20be%20useful%2C%0A%20%20%20%20but%20WITHOUT%20ANY%20WARRANTY%3B%20without%20even%20the%20implied%20warranty%20of%0A%20%20%20%20MERCHANTABILITY%20or%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20%20See%20the%0A%20%20%20%20GNU%20General%20Public%20License%20for%20more%20details.%20%0A*%2F%0A%2F*%0A%20%20%20%20Javascript%20Game%20Engine%0A%20%20%20%20By%20Frank%20Force%202019%0A%0A%20%20%20%20Engine%20Features%0A%20%20%20%20-%20Engine%20is%20separate%20from%20game%20code%2C%20I%20kept%20it%20super%20simple.%0A%20%20%20%20-%20Object%20oriented%20system%20with%20base%20class%20game%20object.%0A%20%20%20%20-%20Base%20class%20object%20handles%20physics%2C%20collision%2C%20rendering%2C%20shadows%2C%20etc.%0A%20%20%20%20-%20Objects%20collide%20with%20level%20tiles%20and%20can%20bounce%20off.%0A%20%20%20%20-%20Engine%20helper%20classes%20and%20functions%20like%20Vector2%2C%20Color%2C%20and%20Timer.%0A%20%20%20%20-%20Level%20is%20composed%20of%20a%20grid%20of%20tiles%20that%20can%20optionally%20have%20objects%20on%20them%20(bushes%2Frocks)%0A%20%20%20%20-%20Automatically%20tiles%20level%20based%20on%20what%20is%20there.%0A%20%20%20%20-%20Level%20%26%20ground%20is%20cached%20to%20offscreen%20buffer%2C%20so%20all%20the%20level%2C%20trees%2C%20blood%20splats%20is%20only%201%20draw%20call.%0A%20%20%20%20-%20Sound%20effects%20audio%20with%20my%20tiny%20sound%20lib%20zzfx.%0A%20%20%20%20-%20Input%20processing%20system.%0A%20%20%20%20-%20A%20simple%20particle%20effect%20system.%0A*%2F%0A%0A%22use%20strict%22%3B%20%2F%2F%20strict%20mode%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20config%0A%0Alet%20godMode%20%3D%200%3B%0Alet%20debug%20%3D%200%3B%0Alet%20soundEnable%20%3D%201%3B%0Alet%20debugCollision%20%3D%200%3B%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20helper%20functions%0A%0Alet%20RGBA%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20(r%3D0%2Cg%3D0%2Cb%3D0%2Ca%3D1)%3D%3E(%60rgba(%24%7Br*255%7C0%7D%2C%24%7Bg*255%7C0%7D%2C%24%7Bb*255%7C0%7D%2C%24%7Ba%7D)%60)%3B%0Alet%20PI%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20Math.PI%3B%0Alet%20Rand%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20(m%3D1)%3D%3EMath.random()*m%3B%0Alet%20RandInt%20%20%20%20%20%20%20%20%20%20%3D%20m%3D%3ERand(m)%7C0%3B%0Alet%20RandBetween%20%20%20%20%20%20%3D%20(a%2Cb)%3D%3Ea%2BRand(b-a)%3B%0Alet%20RandIntBetween%20%20%20%3D%20(a%2Cb)%3D%3Ea%2BRandInt(b-a%2B1)%3B%0Alet%20RandVector%20%20%20%20%20%20%20%3D%20(scale%3D1)%3D%3E%20%20%20%20%20(new%20Vector2(scale%2C0)).Rotate(Rand(2*PI))%3B%0Alet%20RandColorBetween%20%3D%20(c1%2Cc2)%3D%3E%20%20%20%20%20%20%20c1.Clone().Lerp(c2%2CRand())%3B%0Alet%20IsArrayValid%20%20%20%20%20%3D%20(x%2Cy%2Csize)%3D%3E%20%20%20%20(x%3E%3D0%20%26%26%20y%3E%3D0%20%26%26%20x%20%3C%20size%20%26%26%20y%20%3C%20size)%3B%0A%0Alet%20Min%3D(a%2C%20b)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(a%3Cb)%3F%20a%20%3A%20b%3B%0Alet%20Max%3D(a%2C%20b)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(a%3Eb)%3F%20a%20%3A%20b%3B%0Alet%20Clamp%3D(v%2C%20min%2C%20max)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20Min(Max(v%2C%20min)%2C%20max)%3B%0Alet%20Percent%3D(v%2C%20a%2C%20b)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(a%3D%3Db)%3F%200%20%3A%20Clamp((v-a)%2F(b-a)%2C%200%2C%201)%3B%0Alet%20Lerp%3D(p%2C%20a%2C%20b)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20a%20%2B%20Clamp(p%2C%200%2C%201)%20*%20(b-a)%3B%0Alet%20FormatTime%3D(t)%3D%3E%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%7B%0A%20%20%20%20let%20s%20%3D%20(t%7C0)%2560%3B%0A%20%20%20%20return%20(t%2F60%7C0)%2B'%3A'%2B(s%3C10%3F'0'%3A'')%2Bs%3B%0A%7D%0A%0Aclass%20Timer%20%0A%7B%0A%20%20%20%20constructor()%20%20%20%20%20%20%20%20%20%20%20%7B%20this.endTime%3D0%3B%20%7D%0A%20%20%20%20Set(timeLeft%3D0)%20%20%20%20%20%20%20%20%20%7B%20this.endTime%20%3D%20time%20%2B%20timeLeft%3B%20%7D%0A%20%20%20%20Get()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20this.IsSet()%3F%20time%20-%20this.endTime%20%3A%201e9%3B%20%7D%0A%20%20%20%20IsSet()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20this.endTime%20%3E%200%3B%20%7D%0A%20%20%20%20UnSet()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.endTime%20%3D%200%3B%20%7D%0A%20%20%20%20Elapsed()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20!this.IsSet()%20%7C%7C%20time%20%3E%20this.endTime%3B%20%7D%0A%7D%0A%20%20%20%20%0Aclass%20Vector2%20%0A%7B%0A%20%20%20%20constructor(x%3D0%2C%20y%3D0)%20%7B%20this.x%20%3D%20x%3B%20this.y%20%3D%20y%3B%20%7D%0A%20%20%20%20Copy(v)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.x%20%3D%20v.x%3B%20this.y%20%3D%20v.y%3B%20return%20this%3B%20%7D%0A%20%20%20%20Clone(s%3D1)%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20(new%20Vector2(this.x%2C%20this.y)).Multiply(s)%3B%20%7D%0A%09Add(v)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20(v%20instanceof%20Vector2)%3F%20(this.x%20%2B%3D%20v.x%2C%20this.y%20%2B%3D%20v.y)%20%3A%20(this.x%20%2B%3D%20v%2C%20this.y%20%2B%3D%20v)%3B%20return%20this%3B%20%20%7D%0A%09Subtract(v)%20%20%20%20%20%20%20%20%20%20%20%7B%20(this.x%20-%3D%20v.x%2C%20this.y%20-%3D%20v.y)%20%3B%20return%20this%3B%20%20%7D%0A%09Multiply(v)%20%20%20%20%20%20%20%20%20%20%20%7B%20(v%20instanceof%20Vector2)%3F%20(this.x%20*%3D%20v.x%2C%20this.y%20*%3D%20v.y)%20%3A%20(this.x%20*%3D%20v%2C%20this.y%20*%3D%20v)%3B%20return%20this%3B%20%20%7D%0A%09Set(x%2C%20y)%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.x%20%3D%20x%3B%20this.y%20%3D%20y%3B%20return%20this%3B%20%20%7D%0A%20%20%20%20AddXY(x%2C%20y)%20%20%20%20%20%20%20%20%20%20%20%7B%20this.x%20%2B%3D%20x%3B%20this.y%20%2B%3D%20y%3B%20return%20this%3B%20%20%7D%0A%20%20%20%20Normalize(scale%3D1)%20%20%20%20%7B%20let%20l%20%3D%20this.Length()%3B%20return%20l%20%3E%200%20%3F%20this.Multiply(scale%2Fl)%20%3A%20this.Set(scale%2Cy%3D0)%3B%20%7D%0A%20%20%20%20ClampLength(length)%20%20%20%7B%20let%20l%20%3D%20this.Length()%3B%20return%20l%20%3E%20length%20%3F%20this.Multiply(length%2Fl)%20%3A%20this%3B%20%7D%0A%20%20%20%20Rotate(a)%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20let%20c%3DMath.cos(a)%3Blet%20s%3DMath.sin(a)%3Breturn%20this.Set(this.x*c%20-%20this.y*s%2Cthis.x*s%20-%20this.y*c)%3B%20%7D%0A%20%20%20%20Round()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.x%20%3D%20Math.round(this.x)%3B%20this.y%20%3D%20Math.round(this.y)%3B%20return%20this%3B%20%7D%0A%20%20%20%20Length()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20Math.hypot(this.x%2C%20this.y%20)%3B%20%7D%0A%20%20%20%20Distance(v)%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20Math.hypot(this.x%20-%20v.x%2C%20this.y%20-%20v.y%20)%3B%20%7D%0A%20%20%20%20Angle()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20Math.atan2(this.y%2C%20this.x)%3B%20%7D%3B%0A%20%20%20%20Rotation()%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20(Math.abs(this.x)%3EMath.abs(this.y))%3F(this.x%3E0%3F2%3A0)%3A(this.y%3E0%3F1%3A3)%3B%20%7D%20%20%20%0A%20%20%20%20Lerp(v%2Cp)%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20this.Add(v.Clone().Subtract(this).Multiply(p))%3B%20%7D%0A%20%20%20%20DotProduct(v)%20%20%20%20%20%20%20%20%20%7B%20return%20this.x*v.x%2Bthis.y*v.y%3B%20%7D%0A%7D%0A%0Aclass%20Color%0A%7B%0A%20%20%20%20constructor(r%3D0%2Cg%3D0%2Cb%3D0%2Ca%3D1)%20%7B%20this.r%3Dr%3Bthis.g%3Dg%3Bthis.b%3Db%3Bthis.a%3Da%3B%20%7D%0A%20%20%20%20Copy(c)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.r%3Dc.r%3Bthis.g%3Dc.g%3Bthis.b%3Dc.b%3Bthis.a%3Dc.a%3B%20return%20this%3B%20%7D%0A%20%20%20%20Clone(s%3D1)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20new%20Color(this.r*s%2C%20this.g*s%2C%20this.b*s%2C%20this.a*s)%3B%20%7D%0A%20%20%20%20%2F%2FAdd(c)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.r%2B%3Dc.r%3Bthis.g%2B%3Dc.g%3Bthis.b%2B%3Dc.b%3Bthis.a%2B%3Dc.a%3B%20return%20this%3B%20%7D%0A%20%20%20%20Subtract(c)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.r-%3Dc.r%3Bthis.g-%3Dc.g%3Bthis.b-%3Dc.b%3Bthis.a-%3Dc.a%3B%20return%20this%3B%20%7D%0A%20%20%20%20%2F%2FMultiply(c)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20(c%20instanceof%20Color)%3F%20(this.r*%3Dc.r%2Cthis.g*%3Dc.g%2Cthis.b*%3Dc.b%2Cthis.a*%3Dc.a)%20%3A%20(this.r*%3Dc%2Cthis.g*%3Dc%2Cthis.b*%3Dc%2Cthis.a*%3Dc)%3B%20return%20this%3B%20%7D%20%0A%20%20%20%20SetAlpha(a)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.a%3Da%3B%20return%20this%3B%20%7D%20%0A%20%20%20%20Lerp(c%2Cp)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20c.Clone().Subtract(c.Clone().Subtract(this).Clone(1-p))%3B%20%7D%0A%20%20%20%20RGBA()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20RGBA(this.r%2C%20this.g%2C%20this.b%2C%20this.a)%3B%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20game%20object%0A%0Aclass%20GameObject%20%0A%7B%0A%20%20%20%20constructor(pos%2CtileX%2CtileY%2Csize%3D.5%2CcollisionSize%3D0%2Chealth%3D1)%20%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20this.pos%20%3D%20pos.Clone()%3B%0A%20%20%20%20%20%20%20%20this.tileX%20%3D%20tileX%3B%0A%20%20%20%20%20%20%20%20this.tileY%20%3D%20tileY%3B%0A%20%20%20%20%20%20%20%20this.size%20%3D%20new%20Vector2(size%2Csize)%3B%0A%20%20%20%20%20%20%20%20this.collisionSize%20%3D%20collisionSize%3B%0A%20%20%20%20%20%20%20%20this.health%20%3D%20health%3B%0A%20%20%20%20%20%20%20%20this.healthMax%20%3D%20health%3B%0A%20%20%20%20%20%20%20%20this.damageTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.lifeTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.lifeTimer.Set()%3B%0A%20%20%20%20%20%20%20%20this.velocity%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20this.angle%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.angleVelocity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.damping%20%3D%20.8%3B%0A%20%20%20%20%20%20%20%20this.mirror%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.height%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.damageFlashTime%20%3D%20.5%3B%0A%20%20%20%20%20%20%20%20this.differenceFlash%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20gameObjects.push(this)%3B%20%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20velocity%0A%20%20%20%20%20%20%20%20let%20oldPos%20%3D%20this.pos%3B%0A%20%20%20%20%20%20%20%20let%20newPos%20%3D%20this.pos.Clone()%3B%0A%20%20%20%20%20%20%20%20newPos.Add(this.velocity)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20collision%0A%20%20%20%20%20%20%20%20let%20size%20%3D%20this.collisionSize%3B%0A%20%20%20%20%20%20%20%20let%20clear%20%3D%20level.IsAreaClear(newPos%2Csize%2Cthis)%3B%0A%20%20%20%20%20%20%20%20if%20(!clear)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20test%20which%20side%20we%20bounced%20off%20of%20(or%20both)%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20isClearX%20%3D%20level.IsAreaClear(new%20Vector2(newPos.x%2ColdPos.y)%2Csize)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20isClearY%20%3D%20level.IsAreaClear(new%20Vector2(oldPos.x%2CnewPos.y)%2Csize)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isClearX%20%7C%7C%20isClearY)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newPos.x%20%3D%20oldPos.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.x%20*%3D%20-.5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isClearY%20%7C%7C%20isClearX)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20newPos.y%20%3D%20oldPos.y%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.y%20*%3D%20-.5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.pos%20%3D%20newPos%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20physics%0A%20%20%20%20%20%20%20%20this.velocity.Multiply(this.damping)%3B%0A%20%20%20%20%20%20%20%20this.angle%20%2B%3D%20this.angleVelocity%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(debugCollision)%0A%20%20%20%20%20%20%20%20%20%20%20%20DebugRect(this.pos%2Cnew%20Vector2(this.collisionSize%2Cthis.collisionSize)%2C'%23F00')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%0A%20%20%20%20Render()%20%7B%20DrawTile(this.pos%2Cthis.size%2Cthis.tileX%2Cthis.tileY%2Cthis.angle%2Cthis.mirror%2Cthis.height)%3B%7D%0A%20%20%20%20%0A%20%20%20%20Heal(health)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.IsDead())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20healing%0A%20%20%20%20%20%20%20%20let%20startHealth%20%3D%20this.health%3B%0A%20%20%20%20%20%20%20%20this.health%20%3D%20Min(this.health%2Bhealth%2Cthis.healthMax)%3B%0A%20%20%20%20%20%20%20%20return%20this.health%20-%20startHealth%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Damage(damage)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.IsDead()%20%7C%7C%20this.GetDamageTime()%20%3C%20.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20damage%0A%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%0A%20%20%20%20%20%20%20%20let%20startHealth%20%3D%20this.health%3B%0A%20%20%20%20%20%20%20%20this.health%20%3D%20Max(this.health-damage%2C0)%3B%0A%20%20%20%20%20%20%20%20if%20(!this.health)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Kill()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20startHealth%20-%20this.health%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20ReflectDamage(direction)%7B%20return%200%3B%20%7D%0A%20%20%20%20GetLifeTime()%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20this.lifeTimer.Get()%3B%20%7D%0A%20%20%20%20GetDamageTime()%20%20%20%20%20%20%20%20%20%7B%20return%20this.damageTimer.Get()%3B%20%7D%0A%20%20%20%20GetDamageFlashPercent()%20%7B%20return%20Clamp(1-%20this.GetDamageTime()%2Fthis.damageFlashTime%2C0%2C1)%3B%20%7D%0A%20%20%20%20IsTouching(object)%20%20%20%20%20%20%7B%20return%20this.Distance(object)%20%3C%20object.collisionSize%20%2B%20this.collisionSize%3B%20%7D%0A%20%20%20%20IsDead()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20return%20!this.health%3B%20%7D%0A%20%20%20%20Kill()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20this.health%20%3D%200%3B%20this.Destroy()%3B%20%7D%0A%20%20%20%20Destroy()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20gameObjects.splice(gameObjects.indexOf(this)%2C%201)%3B%20%7D%0A%20%20%20%20Distance(object)%20%20%20%20%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20distance%20between%20objects%20accounting%20for%20height%20%0A%20%20%20%20%20%20%20%20let%20p1%20%3D%20this.pos%3B%20let%20p2%20%3D%20object.pos%3B%0A%20%20%20%20%20%20%20%20return%20Math.hypot(p1.x%20-%20p2.x%2C%20p1.y%20-%20p2.y%2C%20this.height%20-%20object.height)%3B%20%0A%20%20%20%20%7D%0A%20%20%20%20CollideLevel(data%2Cpos)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20if%20(!data.type)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20allow%20jumping%20over%20objects%0A%20%20%20%20%20%20%20%20if%20(this.height%20%3E%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20data.object%3B%20%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20core%20engine%0A%0Alet%20cameraScale%20%3D%201%3B%0Alet%20cameraPos%20%3D%20new%20Vector2()%3B%0Alet%20frame%20%3D%200%3B%0Alet%20time%20%3D%201%3B%0Alet%20paused%20%3D%200%3B%0Alet%20timeDelta%20%3D%201%2F60%3B%0Alet%20shadowRenderPass%20%3D%200%3B%0Alet%20hitRenderPass%20%3D%200%3B%0Alet%20mainCanvasContext%3B%0Alet%20tileMaskCanvas%3B%0Alet%20tileMaskCanvasContext%3B%0Alet%20hitCanvas%3B%0Alet%20hitCanvasContext%3B%0Alet%20levelCanvas%3B%0Alet%20levelCanvasContext%3B%0Alet%20mainCanvasSize%20%3D%20new%20Vector2()%3B%0Alet%20tileSize%20%3D%2016%3B%0Alet%20levelSize%20%3D%2064%3B%0A%0Afunction%20EngineInit()%0A%7B%0A%20%20%20%20%2F%2F%20set%20the%20main%20canvas%20size%20to%20half%20size%20of%20the%20window%0A%20%20%20%20mainCanvasContext%20%3D%20mainCanvas.getContext('2d')%3B%0A%20%20%20%20mainCanvasSize.Set(window.innerWidth%2F2%7C0%2Cwindow.innerHeight%2F2%7C0)%3B%0A%20%20%20%20mainCanvas.width%20%3D%20mainCanvasSize.x%3B%0A%20%20%20%20mainCanvas.height%20%3D%20mainCanvasSize.y%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20create%20level%20canvas%20to%20cache%20level%20image%20and%20groun%20effects%0A%20%20%20%20levelCanvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20levelCanvasContext%20%3D%20levelCanvas.getContext('2d')%3B%0A%20%20%20%20levelCanvas.display%3D'none'%3B%0A%20%20%20%20levelCanvasContext.imageSmoothingEnabled%20%3D%200%3B%0A%0A%20%20%20%20%2F%2F%20crate%20tile%20mask%20used%20for%20shadows%20and%20hit%20effects%0A%20%20%20%20tileMaskCanvas%20%3D%20document.createElement('canvas')%3B%0A%20%20%20%20tileMaskCanvasContext%20%3D%20tileMaskCanvas.getContext('2d')%3B%0A%20%20%20%20tileMaskCanvas.display%3D'none'%3B%0A%20%20%20%20tileMaskCanvas.width%20%3D%20tileImage.width*2%3B%0A%20%20%20%20tileMaskCanvas.height%20%3D%20tileImage.height%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20draw%20white%20mask%20sprites%0A%20%20%20%20tileMaskCanvasContext.fillStyle%3D'%23FFF'%3B%0A%20%20%20%20tileMaskCanvasContext.fillRect(0%2C0%2CtileMaskCanvas.width%2CtileMaskCanvas.height)%3B%0A%20%20%20%20tileMaskCanvasContext.globalCompositeOperation%20%3D%20'destination-atop'%3B%0A%20%20%20%20tileMaskCanvasContext.drawImage(tileImage%2C0%2C0)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20draw%20black%20mask%20sprites%0A%20%20%20%20tileMaskCanvasContext.globalCompositeOperation%20%3D%20'source-over'%3B%0A%20%20%20%20tileMaskCanvasContext.drawImage(tileMaskCanvas%2CtileImage.width%2C0)%3B%0A%20%20%20%20tileMaskCanvasContext.globalCompositeOperation%20%3D%20'difference'%3B%0A%20%20%20%20tileMaskCanvasContext.drawImage(tileMaskCanvas%2CtileImage.width%2C0)%3B%0A%20%20%20%20%0A%20%20%20%20InitDebug()%3B%0A%7D%0A%0Afunction%20EngineUpdate()%0A%7B%0A%20%20%20%20paused%20%3D%20!debug%20%26%26%20!document.hasFocus()%0A%20%20%20%20if%20(paused)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20prevent%20stuck%20input%20if%20focus%20is%20lost%0A%20%20%20%20%20%20%20%20mouseIsDown%20%3D%20mouseWasDown%20%3D%200%3B%0A%20%20%20%20%20%20%20%20keyInputData.map(k%3D%3Ek.wasDown%3Dk.isDown%3D0)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20fit%20canvas%20to%20window%0A%20%20%20%20mainCanvasSize.Set(window.innerWidth%2F2%2Cwindow.innerHeight%2F2)%3B%0A%20%20%20%20mainCanvas.width%20%3D%20mainCanvasSize.x%3B%0A%20%20%20%20mainCanvas.height%20%3D%20mainCanvasSize.y%3B%0A%20%20%20%20mainCanvasContext.imageSmoothingEnabled%20%3D%200%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20get%20mouse%20world%20pos%0A%20%20%20%20mousePosWorld.Copy(mousePos).Subtract(mainCanvasSize.Clone(.5)).Multiply(1%2FcameraScale*tileSize).Add(cameraPos)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20main%20update%0A%20%20%20%20if%20(!paused)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20debug%20speed%20up%20%2F%20slow%20down%0A%20%20%20%20%20%20%20%20let%20frames%20%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(debug%20%26%26%20KeyIsDown(107))%0A%20%20%20%20%20%20%20%20%20%20%20%20frames%20%3D%204%3B%0A%20%20%20%20%20%20%20%20if%20(debug%20%26%26%20KeyIsDown(109))%0A%20%20%20%20%20%20%20%20%20%20%20%20frames%20%3D%20(debugFrame%254%3D%3D0)%3B%0A%20%20%20%20%20%20%20%20while(frames--)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20time%20%3D%201%2B%20%2B%2Bframe%20*%20timeDelta%0A%20%20%20%20%20%20%20%20%20%20%20%20Update()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20UpdateGameObjects()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20main%20render%0A%20%20%20%20let%20SortGameObjects%20%3D%20(a%2Cb)%3D%3E%20a.pos.y-b.pos.y%3B%0A%20%20%20%20gameObjects.sort(SortGameObjects)%3B%0A%20%20%20%20PreRender()%3B%0A%20%20%20%20shadowRenderPass%20%3D%201%3B%0A%20%20%20%20RenderGameObjects()%3B%0A%20%20%20%20shadowRenderPass%20%3D%200%3B%0A%20%20%20%20RenderGameObjects()%3B%0A%20%20%20%20PostRender()%3B%0A%20%20%20%20UpdateDebug()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20clear%20input%0A%20%20%20%20mouseWasDown%20%3D%20mouseIsDown%3B%0A%20%20%20%20keyInputData.map(k%3D%3Ek.wasDown%3Dk.isDown)%3B%0A%20%20%20%20requestAnimationFrame(EngineUpdate)%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20game%20object%20system%0A%0Alet%20gameObjects%20%3D%20%5B%5D%3B%0Afunction%20ClearGameObjects()%20%20%7B%20gameObjects%20%3D%20%5B%5D%3B%20%7D%0Afunction%20UpdateGameObjects()%20%7B%20gameObjects.forEach(o%3D%3Eo.Update())%3B%20%7D%0Afunction%20RenderGameObjects()%0A%7B%20%0A%20%20%20%20gameObjects.forEach(o%3D%3E%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20o.Render()%3B%0A%20%20%20%20%20%20%20%20if%20(!shadowRenderPass)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20hit%20flash%20overlay%0A%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%20o.GetDamageFlashPercent()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(hitRenderPass)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(o.differenceFlash)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'difference'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.Render()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'source-over'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20input%0A%0Alet%20mouseIsDown%20%3D%200%3B%0Alet%20mouseWasDown%20%3D%200%3B%0Alet%20keyInputData%20%3D%20%5B%5D%3B%0Alet%20mousePos%20%3D%20new%20Vector2()%3B%0Alet%20mousePosWorld%20%3D%20new%20Vector2()%3B%0A%0Aoncontextmenu%20%3D%20function(e)%20%7B%20e.preventDefault()%3B%20%7D%0Aonmousedown%20%20%20%3D%20function(e)%20%7B%20mouseIsDown%3D1%3B%20%7D%0Aonmouseup%20%20%20%20%20%3D%20function(e)%20%7B%20mouseIsDown%3D0%3B%20%7D%0Aonmousemove%20%20%20%3D%20function(e)%20%0A%7B%20%0A%20%20%20%20%2F%2F%20convert%20mouse%20pos%20to%20canvas%20space%0A%20%20%20%20let%20rect%20%3D%20mainCanvas.getBoundingClientRect()%3B%0A%20%20%20%20mousePos.Set%0A%20%20%20%20(%20%0A%20%20%20%20%20%20%20%20(e.clientX%20-%20rect.left)%20%2F%20rect.width%2C%0A%20%20%20%20%20%20%20%20(e.clientY%20-%20rect.top)%20%2F%20rect.height%0A%20%20%20%20).Multiply(mainCanvasSize)%3B%0A%7D%0Aonkeydown%20%3D%20function(e)%20%0A%7B%20%0A%20%20%20%20if%20(debug%20%26%26%20e.keyCode%3D%3D192)%0A%20%20%20%20%20%20%20%20e.preventDefault()%2CToggleDebugConsole()%3B%0A%20%20%20%20if%20(debug%20%26%26%20document.activeElement%20%26%26%20document.activeElement.type%20%3D%3D%20'textarea')%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20keyInputData%5Be.keyCode%5D%3D%7BisDown%3A1%7D%3B%0A%7D%0Aonkeyup%20%3D%20function(e)%20%0A%7B%20%0A%20%20%20%20if%20(debug%20%26%26%20document.activeElement%20%26%26%20document.activeElement.type%20%3D%3D%20'textarea')%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20if%20(%20keyInputData%5Be.keyCode%5D%20)%20keyInputData%5Be.keyCode%5D.isDown%3D0%3B%0A%7D%0A%0Afunction%20MouseWasPressed()%20%20%7B%20return%20mouseIsDown%20%26%26%20!mouseWasDown%3B%20%7D%0Afunction%20KeyIsDown(key)%20%20%20%20%20%7B%20return%20keyInputData%5Bkey%5D%3F%20keyInputData%5Bkey%5D.isDown%20%3A%200%3B%20%7D%0Afunction%20KeyWasPressed(key)%20%7B%20return%20KeyIsDown(key)%20%26%26%20!keyInputData%5Bkey%5D.wasDown%3B%20%7D%0Afunction%20ClearInput()%20%20%20%20%20%20%20%7B%20keyInputData.map(k%3D%3Ek.wasDown%3Dk.isDown%3D0)%3BmouseIsDown%3DmouseWasDown%3D0%3B%20%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20rendering%0A%0A%2F%2F%20shadow%20settings%0Alet%20shadowAlpha%20%20%20%20%20%20%3D%20.5%3B%0Alet%20shadowSkew%20%20%20%20%20%20%20%3D%20.7%3B%0Alet%20shadowScale%20%20%20%20%20%20%3D%20.7%3B%0A%0Afunction%20DrawScreenTile(x%2Cy%2Csize%2CtileX%2CtileY)%0A%7B%0A%20%20%20%20mainCanvasContext.drawImage(tileImage%2CtileX*tileSize%2CtileY*tileSize%2CtileSize%2CtileSize%2C%20x-size%2C%20y-size%2C%202*size%2C%202*size)%3B%0A%7D%0A%0Afunction%20SetCanvasTransform(pos%2Csize%2Cangle%3D0%2Cheight%3D0)%0A%7B%0A%20%20%20%20%2F%2F%20create%20canvas%20transform%20from%20world%20space%20to%20screen%20space%0A%20%20%20%20mainCanvasContext.save()%3B%0A%20%20%20%20let%20drawPos%20%3D%20pos.Clone()%3B%0A%20%20%20%20if%20(shadowRenderPass)%0A%20%20%20%20%20%20%20%20drawPos.AddXY(-height*shadowSkew%2F2%2C%20-height*shadowScale%2F2)%3B%0A%20%20%20%20else%0A%20%20%20%20%20%20%20%20drawPos.y%20-%3D%20height%3B%0A%20%20%20%20drawPos.Subtract(cameraPos).Multiply(tileSize*cameraScale)%3B%0A%20%20%20%20drawPos.Add(mainCanvasSize.Clone(.5))%3B%0A%20%20%20%20mainCanvasContext.translate(drawPos.x%7C0%2C%20drawPos.y%7C0)%3B%0A%20%20%20%20%0A%20%20%20%20let%20s%20%3D%20size.Clone(tileSize)%3B%0A%20%20%20%20if%20(shadowRenderPass)%0A%20%20%20%20%20%20%20%20mainCanvasContext.transform(1%2C0%2CshadowSkew%2CshadowScale%2C-shadowSkew*cameraScale*s.x%2CcameraScale*(1-shadowScale)*s.y)%3B%0A%20%20%20%20if%20(angle)%0A%20%20%20%20%20%20%20%20mainCanvasContext.rotate(angle)%3B%0A%20%20%20%20mainCanvasContext.scale(cameraScale%2CcameraScale)%3B%0A%7D%0A%0Afunction%20DrawTile(pos%2Csize%2CtileX%2CtileY%2Cangle%3D0%2Cmirror%3D0%2Cheight%3D0)%0A%7B%0A%20%20%20%20%2F%2F%20render%20a%20tile%20at%20a%20world%20space%20position%0A%20%20%20%20SetCanvasTransform(pos%2Csize%2Cangle%2Cheight)%3B%0A%20%20%20%20%0A%20%20%20%20let%20image%20%3D%20tileImage%3B%0A%20%20%20%20if%20(shadowRenderPass)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20image%20%3D%20tileMaskCanvas%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.globalAlpha%20*%3D%20shadowAlpha%3B%0A%20%20%20%20%20%20%20%20tileX%2B%3DtileImage.width%2FtileSize%3B%20%2F%2F%20shift%20over%20to%20shadow%20position%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(hitRenderPass)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20image%20%3D%20tileMaskCanvas%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.globalAlpha%20*%3D%20hitRenderPass%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20shrink%20size%20of%20tile%20to%20fix%20bleeding%20on%20edges%0A%20%20%20%20let%20renderTileShrink%20%3D%20.25%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%2F%20render%20the%20tile%0A%20%20%20%20let%20s%20%3D%20size.Clone(2*tileSize)%3B%0A%20%20%20%20mainCanvasContext.scale(mirror%3F-s.x%3As.x%2Cs.y)%3B%0A%20%20%20%20mainCanvasContext.drawImage(image%2C%0A%20%20%20%20%20%20%20%20tileX*tileSize%2BrenderTileShrink%2C%0A%20%20%20%20%20%20%20%20tileY*tileSize%2BrenderTileShrink%2C%0A%20%20%20%20%20%20%20%20tileSize-2*renderTileShrink%2C%0A%20%20%20%20%20%20%20%20tileSize-2*renderTileShrink%2C%20-.5%2C%20-.5%2C%201%2C%201)%3B%0A%20%20%20%20mainCanvasContext.restore()%3B%0A%20%20%20%20mainCanvasContext.globalAlpha%20%3D%201%3B%20%20%20%0A%7D%0A%0Afunction%20DrawText(text%2C%20x%2C%20y%2C%20size%2CtextAlign%3D'center'%2ClineWidth%3D1%2Ccolor%3D'%23000'%2CstrokeColor%3D'%23FFF'%2Ccontext%3DmainCanvasContext)%0A%7B%0A%20%20%20%20context.fillStyle%3Dcolor%3B%0A%20%20%20%20context.font%20%3D%20%60900%20%24%7Bsize%7Dpx%20arial%60%0A%20%20%20%20context.textAlign%3DtextAlign%3B%0A%20%20%20%20context.textBaseline%3D'middle'%3B%0A%20%20%20%20context.fillText(text%2Cx%2Cy)%3B%0A%20%20%20%20if%20(lineWidth)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20context.lineWidth%3DlineWidth%3B%0A%20%20%20%20%20%20%20%20context.strokeStyle%3DstrokeColor%3B%0A%20%20%20%20%20%20%20%20context.strokeText(text%2Cx%2Cy)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20tile%20level%20system%0A%0Aclass%20LevelData%0A%7B%0A%20%20%20%20constructor()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.type%20%3D%200%3B%20%20%20%2F%2F%200%3Dsolid%2C%201%3Dgrass%2C%202%3Dsand%0A%20%20%20%20%20%20%20%20this.object%20%3D%200%3B%20%2F%2F%200%3Dnone%2C%201%3Dbush%2C%202%3Drock%0A%20%20%20%20%20%20%20%20this.tile%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.rotation%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Clear()%20%7B%20this.type%3Dthis.object%3D0%3B%20%7D%0A%20%20%20%20IsSolid()%20%7B%20return%20!this.type%20%7C%7C%20this.object%3B%20%7D%0A%7D%0A%0Aclass%20Level%0A%7B%0A%20%20%20%20constructor()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20levelCanvas.height%3DlevelCanvas.width%3DlevelSize*tileSize%3B%0A%20%20%20%20%20%20%20%20this.data%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20for(let%20i%20%3D%200%3B%20i%3ClevelSize*levelSize%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.data%5Bi%5D%20%3D%20new%20LevelData()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20GetDataFromPos(pos)%20%7B%20return%20this.GetData(pos.x%2Cpos.y)%3B%20%7D%0A%0A%20%20%20%20GetData(x%2Cy)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(!IsArrayValid(x%2Cy%2ClevelSize))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20new%20LevelData()%3B%0A%20%20%20%20%20%20%20%20return%20this.data%5B(x%7C0)%2B(y%7C0)*levelSize%5D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20IsAreaClear(pos%2Csize%2CgameObject%3D0)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20if%20there%20is%20collision%20in%20a%20given%20square%20area%0A%20%20%20%20%20%20%20%20let%20y%20%3D%20pos.y%3B%0A%20%20%20%20%20%20%20%20let%20x%20%3D%20pos.x%3B%0A%20%20%20%20%20%20%20%20for(let%20yo%20%3D%20y%20-%20size%3B%20yo%20%3C%3D%20y%20%2B%20size%3B%20)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20xo%20%3D%20x%20-%20size%3B%20xo%20%3C%3D%20x%20%2B%20size%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3D%20new%20Vector2(Math.floor(xo)%2B.5%2CMath.floor(yo)%2B.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20data%20%3D%20this.GetDataFromPos(p)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(gameObject)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(gameObject.CollideLevel(data%2Cp))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(data.IsSolid())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xo%3D%3Dx%2Bsize)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bxo%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(xo%20%3E%20x%2Bsize)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xo%20%3D%20x%2Bsize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(yo%3D%3Dy%2Bsize)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Byo%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(yo%20%3E%20y%2Bsize)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20yo%20%3D%20y%2Bsize%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20FillCircleObject(pos%2Cr%2Cobject)%20%7B%20this.FillCircleCallback(pos%2Cr%2Cd%3D%3Ed.object%3Dd.type%3Fobject%3Ad.object)%3B%20%7D%0A%20%20%20%20FillCircleType(pos%2Cr%2Ctype)%20%20%20%20%20%7B%20this.FillCircleCallback(pos%2Cr%2Cd%3D%3Ed.type%3Dtype)%3B%20%7D%0A%20%20%20%20%0A%20%20%20%20FillCircleCallback(pos%2Cr%2Ccallback)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20fill%20a%20circle%20of%20tiles%20using%20the%20provided%20callback%0A%20%20%20%20%20%20%20%20for(let%20i%3D-r%3Bi%3C%3Dr%3Bi%2B%2B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20h%20%3D%20(r**2-(i%2B.5)**2)**.5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20j%3Dpos.y-h%3Bj%3Cpos.y%2Bh%3Bj%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20x%20%3D%20pos.x%2Bi%7C0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20y%20%3D%20j%7C0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!IsArrayValid(x%2Cy%2ClevelSize))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20callback(this.GetData(x%2Cy))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%0A%0A%20%20%20%20ApplyTiling()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20up%20tiles%0A%20%20%20%20%20%20%20%20for(let%20y%20%3D%200%3B%20y%3ClevelSize%3B%20y%2B%2B)%0A%20%20%20%20%20%20%20%20for(let%20x%20%3D%200%3B%20x%3ClevelSize%3B%20x%2B%2B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20neighbors%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20this.GetData(x%2Cy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dt%20%3D%20d.type%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dr%20%3D%20this.GetData(x%2B1%2Cy).type%3D%3Ddt%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dl%20%3D%20this.GetData(x-1%2Cy).type%3D%3Ddt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20du%20%3D%20this.GetData(x%2Cy-1).type%3D%3Ddt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20dd%20%3D%20this.GetData(x%2Cy%2B1).type%3D%3Ddt%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20neighbors%20%3D%20dr%20%2B%20dl%20%2B%20du%20%2B%20dd%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%20dt*8%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20r%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(dt%3C2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20first%202%20rows%20are%20tiled%20based%20on%20neighbor%20count%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%20%2B%3D%20neighbors%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbors%3E%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(neighbors%3D%3D1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(dl)%20r%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(du)%20r%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(dr)%20r%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(neighbors%3D%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(dr%20%26%26%20dl)%20t--%2C%20r%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(du%20%26%26%20dd)%20t--%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(dl%20%26%26%20dd)%20r%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(dl%20%26%26%20du)%20r%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(dr%20%26%26%20du)%20r%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(neighbors%3D%3D3)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!dr)%20r%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(!dd)%20r%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(!dl)%20r%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20d.tile%20%3D%20t%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20d.rotation%20%3D%20r%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20add%20tile%20randomization%0A%20%20%20%20%20%20%20%20for(let%20y%20%3D%200%3B%20y%3ClevelSize%3B%20y%2B%2B)%0A%20%20%20%20%20%20%20%20for(let%20x%20%3D%200%3B%20x%3ClevelSize%3B%20x%2B%2B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%20%3E%20.05)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20level.GetData(x%2Cy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d.tile%20%3D%3D%2013)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d.tile%2B%2B%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d.rotation%3DRandInt(4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(d.tile%20%3D%3D%2016)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d.tile%2B%3D1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d.rotation%3DRandInt(4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20ClearBorder()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20to%20solid%20around%20outside%20edge%0A%20%20%20%20%20%20%20%20let%20w%20%3D%20levelSize%3B%0A%20%20%20%20%20%20%20%20for(let%20i%20%3D%200%3B%20i%3Cw%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.GetData(i%2C%20%200).Clear()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.GetData(i%2Cw-1).Clear()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.GetData(0%2C%20%20i).Clear()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.GetData(w-1%2Ci).Clear()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20DrawEllipse(pos%2Csize%2Ccolor%3D'%23FFF'%2Cangle%3D0)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20new%20Vector2(1%2C1).Multiply(size).Multiply(tileSize)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.beginPath()%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.ellipse(pos.x*tileSize%2Cpos.y*tileSize%2Cs.x%2Cs.y%2Cangle%2C0%2C7)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.fillStyle%3Dcolor%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.fill()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20DrawText(text%2C%20pos%2C%20size%2C%20textAlign%3D'center'%2ClineWidith%3D0%2C%20color%3D'%23000'%2C%20strokeColor%3D'%23FFF')%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20DrawText(text%2C%20pos.x*tileSize%2C%20pos.y*tileSize%2C%20size%2CtextAlign%2ClineWidith%2Ccolor%2CstrokeColor%2ClevelCanvasContext)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20DrawTileData(x%2Cy)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20x%7C%3D0%3B%0A%20%20%20%20%20%20%20%20y%7C%3D0%3B%0A%20%20%20%20%20%20%20%20let%20d%20%3D%20this.GetData(x%2Cy)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20bottom%20layer%0A%20%20%20%20%20%20%20%20let%20tx%20%3D%20d.tile%258%3B%0A%20%20%20%20%20%20%20%20let%20ty%20%3D%20(d.tile%2F8%7C0)%3B%0A%20%20%20%20%20%20%20%20let%20pos%20%3D%20new%20Vector2(x%2B.5%2Cy%2B.5)%3B%0A%20%20%20%20%20%20%20%20this.DrawTile(pos%2C%20.5%2C%20tx%2C%20ty%2C%20d.rotation*PI%2F2)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(d.object)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20object%2Ftop%20layer%0A%20%20%20%20%20%20%20%20%20%20%20%20tx%20%3D%20(d.object-1)%258%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ty%20%3D%203%2B((d.object-1)%2F8%7C0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.DrawTile(pos%2C%20.5%2C%20tx%2C%20ty)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20DrawTile(pos%2Csize%2CtileX%2CtileY%2Cangle%3D0)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20size%20*%20tileSize%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.save()%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.translate(pos.x*tileSize%2Cpos.y*tileSize)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.rotate(angle)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.drawImage(tileImage%2CtileX*tileSize%2CtileY*tileSize%2CtileSize%2CtileSize%2C-s%2C-s%2C2*s%2C2*s)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.restore()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Redraw()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20cache%20to%20offscreen%20cavnas%0A%20%20%20%20%20%20%20%20levelCanvas.width%7C%3D0%3B%0A%20%20%20%20%20%20%20%20for(let%20y%20%3D%200%3B%20y%3ClevelSize%3B%20y%2B%2B)%0A%20%20%20%20%20%20%20%20for(let%20x%20%3D%200%3B%20x%3ClevelSize%3B%20x%2B%2B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20this.DrawTileData(x%2Cy)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20entire%20level%20(cached%20on%20a%20canvas)%20onto%20the%20main%20canvas%0A%20%20%20%20%20%20%20%20let%20pos%20%3D%20cameraPos.Clone(-cameraScale*tileSize).Add(mainCanvasSize.Clone(.5))%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.drawImage%0A%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvas%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20pos.x%7C0%2C%20pos.y%7C0%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20cameraScale*levelCanvas.width%7C0%2C%20cameraScale*levelCanvas.height%7C0%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20particle%20system%0A%20%0Aclass%20Particle%0A%7B%0A%20%20%20%20constructor(emitter%2Cpos%2Cvelocity%2Csize%2ClifeTime%2CstartColor%2CendColor)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.emitter%20%3D%20emitter%3B%0A%20%20%20%20%20%20%20%20this.pos%20%3D%20pos%3B%0A%20%20%20%20%20%20%20%20this.velocity%20%3D%20velocity%3B%0A%20%20%20%20%20%20%20%20this.size%20%3D%20size%3B%0A%20%20%20%20%20%20%20%20this.lifeTime%20%3D%20lifeTime%3B%0A%20%20%20%20%20%20%20%20this.startColor%20%3D%20startColor%3B%0A%20%20%20%20%20%20%20%20this.endColor%20%3D%20endColor%3B%0A%20%20%20%20%20%20%20%20this.lifeTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.lifeTimer.Set()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20physics%0A%20%20%20%20%20%20%20%20this.pos.Add(this.velocity.Multiply(.9))%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20remove%20if%20dead%0A%20%20%20%20%20%20%20%20if%20(this.lifeTimer.Get()%20%3E%20this.lifeTime)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20this.emitter.particles.splice(this.emitter.particles.indexOf(this)%2C1)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(debugCollision)%0A%20%20%20%20%20%20%20%20%20%20%20%20DebugRect(this.pos%2C%20new%20Vector2(this.size%2Cthis.size)%2C%20'%230FF')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20color%0A%20%20%20%20%20%20%20%20let%20p%20%3D%20Percent(this.lifeTimer.Get()%2C%200%2C%20this.lifeTime)%3B%0A%20%20%20%20%20%20%20%20let%20c%20%3D%20this.startColor.Clone().Lerp(this.endColor%2C%20p)%3B%0A%20%20%20%20%20%20%20%20c.a%20*%3D%20p%3C.1%3F%20p%20%2F.1%20%3A%201%3B%20%2F%2F%20fade%20in%20alpha%0A%20%20%20%20%20%20%20%20mainCanvasContext.fillStyle%3Dc.RGBA()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20size%0A%20%20%20%20%20%20%20%20let%20size%20%3D%20this.size%20*%20cameraScale%20*%20tileSize%20*%20Lerp(p%2C1%2C.5)%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20get%20the%20screen%20pos%20and%20render%0A%20%20%20%20%20%20%20%20let%20pos%20%3D%20this.pos.Clone()%0A%20%20%20%20%20%20%20%20%20%20%20%20.Subtract(cameraPos)%0A%20%20%20%20%20%20%20%20%20%20%20%20.Multiply(tileSize*cameraScale)%0A%20%20%20%20%20%20%20%20%20%20%20%20.Add(mainCanvasSize.Clone(.5))%0A%20%20%20%20%20%20%20%20%20%20%20%20.Add(-size)%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.fillRect(pos.x%2C%20pos.y%2C%202*size%2C%202*size)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aclass%20ParticleEmitter%20extends%20GameObject%0A%7B%0A%20%20%20%20constructor(%20pos%2C%20emitSize%2C%20particleSize%2C%20color1%2C%20color2%20)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super(pos%2C0%2C0%2CemitSize)%3B%0A%20%20%20%20%20%20%20%20this.particleSize%3DparticleSize%3B%0A%20%20%20%20%20%20%20%20this.color1%3Dcolor1.Clone()%3B%0A%20%20%20%20%20%20%20%20this.color2%3Dcolor2.Clone()%3B%0A%20%20%20%20%20%20%20%20this.particles%3D%5B%5D%3B%0A%20%20%20%20%20%20%20%20this.emitTimeBuffer%3D0%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20particles%0A%20%20%20%20%20%20%20%20this.particles.forEach(particle%3D%3Eparticle.Update())%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.GetLifeTime()%20%3C%3D%20.05)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20emit%20new%20particles%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20secondsPerEmit%20%3D%201%2F200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.emitTimeBuffer%20%2B%3D%20timeDelta%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20while%20(this.emitTimeBuffer%20%3E%20secondsPerEmit)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.emitTimeBuffer%20-%3D%20secondsPerEmit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.AddParticle()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(!this.particles.length)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20go%20away%20when%20all%20particles%20are%20gone%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(debugCollision)%0A%20%20%20%20%20%20%20%20%20%20%20%20DebugRect(this.pos%2C%20new%20Vector2(this.size%2Cthis.size)%2C%20'%2300F')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%20%7B%20this.particles.forEach(p%3D%3Ep.Render())%3B%20%7D%0A%20%20%20%20%0A%20%20%20%20AddParticle()%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20%2F%2F%20create%20a%20new%20particle%20with%20random%20settings%0A%20%20%20%20%20%20%20%20this.particles.push%0A%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20new%20Particle%0A%20%20%20%20%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.pos.Clone().Add(RandVector(Rand(this.size.x)))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RandVector(Rand(.2))%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RandBetween(this.particleSize%2C2*this.particleSize)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RandBetween(.5%2C1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RandColorBetween(this.color1%2Cthis.color2)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20RandColorBetween(this.color1%2Cthis.color2).SetAlpha(0)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%7D%0A%2F*%0A%20%20%20%20Bounce%20Back%20~%20A%20boomerang%20roguelike%20for%20JS13k%0A%20%20%20%20Copyright%20(C)%202019%20Frank%20Force%0A%0A%20%20%20%20This%20program%20is%20free%20software%3B%20you%20can%20redistribute%20it%20and%2For%20modify%0A%20%20%20%20it%20under%20the%20terms%20of%20the%20GNU%20General%20Public%20License%20as%20published%20by%0A%20%20%20%20the%20Free%20Software%20Foundation%3B%20either%20version%202%20of%20the%20License%2C%20or%0A%20%20%20%20(at%20your%20option)%20any%20later%20version.%0A%0A%20%20%20%20This%20program%20is%20distributed%20in%20the%20hope%20that%20it%20will%20be%20useful%2C%0A%20%20%20%20but%20WITHOUT%20ANY%20WARRANTY%3B%20without%20even%20the%20implied%20warranty%20of%0A%20%20%20%20MERCHANTABILITY%20or%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20%20See%20the%0A%20%20%20%20GNU%20General%20Public%20License%20for%20more%20details.%20%0A*%2F%0A%2F*%0A%20%20%20%20Javascript%20Game%20Engine%20Debug%0A%20%20%20%20By%20Frank%20Force%202019%0A%20%20%20%20%0A%20%20%20%20Debug%20Features%0A%20%20%20%20-%20debug%20console%0A%20%20%20%20-%20debug%20rendering%0A%20%20%20%20-%20debug%20controls%0A%20%20%20%20-%20save%20snapshot%0A*%2F%0A%0A%22use%20strict%22%3B%20%2F%2F%20strict%20mode%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20debug%0A%0Alet%20debugFrame%20%3D%200%3B%0Alet%20debugConsole%20%3D%200%3B%0Alet%20debugRects%3D%5B%5D%3B%0Alet%20debugConsoleTextArea%3B%0Alet%20debugConsoleDisplayTextArea%3B%0Alet%20downloadLink%3B%0Alet%20debugCanvas%20%3D%200%3B%0A%0Afunction%20DebugPrint(string)%0A%7B%0A%20%20%20%20let%20o%20%3D%20'-%3E%20'%2Bstring%20%2B%20'%5Cn'%3B%0A%20%20%20%20o%20%2B%3D%20debugConsoleDisplayTextArea.value%3B%0A%20%20%20%20debugConsoleDisplayTextArea.value%20%3D%20o%3B%0A%7D%0A%0Afunction%20ToggleDebugConsole()%0A%7B%0A%20%20%20%20debugConsole%20%3D%20!debugConsole%3B%0A%20%20%20%20if%20(debugConsole)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20debugConsoleTextArea.style.display%3D'block'%3B%0A%20%20%20%20%20%20%20%20debugConsoleTextArea.focus()%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%20%20%20%20mainCanvas.focus()%3B%0A%7D%0A%0Afunction%20DebugConsoleKeyDown(e)%0A%7B%0A%20%20%20%20if%20(e.keyCode%20!%3D%2013)%0A%20%20%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20e.preventDefault()%3B%0A%20%20%20%20let%20v%20%3D%20debugConsoleTextArea.value%3B%0A%20%20%20%20let%20o%20%3D%20'-%3E%20eval('%2Bv%20%2B%20')%5Cn'%3B%0A%0A%20%20%20%20try%20%7B%20o%20%2B%3D%20eval(v)%3B%20%7D%0A%20%20%20%20catch%20(e)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(e%20instanceof%20Error)%0A%20%20%20%20%20%20%20%20%20%20%20%20o%20%2B%3D%20e.message%3F%20'Error%3A%20'%20%2B%20e.message%20%3A%20e%3B%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20o%20%2B%3D%20'Unknown%20error'%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20o%20%2B%3D%20'%5Cn%5Cn'%20%2B%20debugConsoleDisplayTextArea.value%3B%0A%0A%20%20%20%20debugConsoleTextArea.value%20%3D%20''%3B%0A%20%20%20%20debugConsoleDisplayTextArea.value%20%3D%20o%3B%0A%7D%0A%20%20%20%20%0Afunction%20InitDebug()%0A%7B%20%0A%20%20%20%20debugConsoleTextArea%20%3D%20document.createElement('textarea')%3B%0A%20%20%20%20debugConsoleTextArea.style%3D%22height%3A30px%3Bwidth%3A90%25%3Bdisplay%3Anone%3Bcolor%3A%23FFF%3Bbackground-color%3A%23000%3B%22%0A%20%20%20%20mainCanvas.before(debugConsoleTextArea)%3B%0A%20%20%20%20debugConsoleTextArea.onkeydown%3De%3D%3EDebugConsoleKeyDown(e)%0A%20%20%20%20%0A%20%20%20%20debugConsoleDisplayTextArea%20%3D%20document.createElement('textarea')%3B%0A%20%20%20%20debugConsoleDisplayTextArea.style%3D%22height%3A100px%3Bwidth%3A90%25%3Bdisplay%3Anone%3Bcolor%3A%23FFF%3Bbackground-color%3A%23000%3B%22%0A%20%20%20%20mainCanvas.before(debugConsoleDisplayTextArea)%3B%0A%20%20%20%20%0A%20%20%20%20downloadLink%20%3D%20document.createElement('a')%3B%0A%20%20%20%20downloadLink.display%3D'none'%3B%0A%20%20%20%20downloadLink.before(debugConsoleTextArea)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(debugCanvas)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20document.body.style.overflow%3D'visible'%3B%0A%20%20%20%20%20%20%20%20document.body.style.background%3D'%23400'%0A%20%20%20%20%20%20%20%20mainCanvas.style.border%3D'2px%20solid%20%23F00'%3B%0A%20%20%20%20%20%20%20%20mainCanvas.style.width%3DmainCanvas.width%2B'px'%3B%0A%20%20%20%20%20%20%20%20mainCanvas.style.height%3DmainCanvas.height%2B'px'%3B%0A%0A%20%20%20%20%20%20%20%20document.body.appendChild(levelCanvas)%3B%20%20%20%0A%20%20%20%20%20%20%20%20levelCanvas.style.border%3D'2px%20solid%20%23F00'%3B%0A%20%20%20%20%20%20%20%20levelCanvas.style.width%3D(levelCanvas.width)%2B'px'%3B%0A%20%20%20%20%20%20%20%20levelCanvas.style.height%3D(levelCanvas.height)%2B'px'%3B%0A%20%20%20%20%20%20%20%20levelCanvas.style.display%20%3D'block'%3B%0A%0A%20%20%20%20%20%20%20%20document.body.appendChild(tileMaskCanvas)%3B%20%20%0A%20%20%20%20%20%20%20%20tileMaskCanvas.style.border%3D'2px%20solid%20%23F00'%3B%0A%20%20%20%20%20%20%20%20tileMaskCanvas.style.width%3D(tileMaskCanvas.width)%2B'px'%3B%0A%20%20%20%20%20%20%20%20tileMaskCanvas.style.height%3D(tileMaskCanvas.height)%2B'px'%3B%0A%20%20%20%20%20%20%20%20tileMaskCanvas.style.display%20%3D'block'%3B%0A%20%20%20%20%7D%20%20%0A%7D%0A%0Afunction%20DebugRect(pos%2Csize%2Ccolor%3D%22%23F00%22)%0A%7B%0A%20%20%20%20if%20(debug)%20debugRects.push(%7Bpos%3Apos.Clone()%2Csize%3Asize.Clone()%2Ccolor%3Acolor.slice(0)%7D)%3B%0A%7D%0A%0Afunction%20DebugPoint(pos%2Csize%3D.1%2Ccolor%3D%22%23F00%22)%0A%7B%0A%20%20%20%20if%20(debug)%20DebugRect(pos%2C%20new%20Vector2(size%2Csize)%2C%20color)%0A%7D%0A%0Afunction%20RenderDebugRects()%0A%7B%0A%20%20%20%20mainCanvasContext.lineWidth%3D1%3B%0A%20%20%20%20function%20RenderDebugRect(pos%2Csize%2Ccolor)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20size.Multiply(tileSize)%3B%0A%20%20%20%20%20%20%20%20let%20renderPos%20%3D%20pos.Clone()%3B%0A%20%20%20%20%20%20%20%20renderPos.Subtract(cameraPos)%3B%0A%20%20%20%20%20%20%20%20renderPos.Multiply(tileSize)%3B%0A%20%20%20%20%20%20%20%20renderPos.Subtract(size)%3B%0A%20%20%20%20%20%20%20%20renderPos.Multiply(cameraScale)%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.strokeStyle%3Dcolor%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.save()%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.translate(renderPos.x%20%2B%20mainCanvas.width%2F2%7C0%2C%20renderPos.y%20%2B%20mainCanvas.height%2F2%7C0)%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.scale(cameraScale%2C%20cameraScale)%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.strokeRect(0%2C%200%2C%202*size.x%2C%202*size.y)%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.restore()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20for(%20let%20d%20of%20debugRects%20)%0A%20%20%20%20%20%20%20%20RenderDebugRect(d.pos%2Cd.size%2Cd.color)%3B%0A%20%20%20%20debugRects%20%3D%20%5B%5D%3B%0A%7D%0A%0Afunction%20UpdateDebug()%0A%7B%0A%20%20%20%20%2B%2BdebugFrame%3B%0A%20%20%20%20UpdateDebugControls()%3B%0A%20%20%20%20%0A%20%20%20%20if%20(debugCollision)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20tileSize*level.size%3B%0A%20%20%20%20%20%20%20%20DebugRect(new%20Vector2(s%2F2%2Cs%2F2)%2C%20new%20Vector2(s%2F2%2Cs%2F2)%2C'%23F00')%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20debugConsoleTextArea.style.display%3DdebugConsole%3F'block'%3A'none'%3B%0A%20%20%20%20debugConsoleDisplayTextArea.style.display%3DdebugConsole%3F'block'%3A'none'%3B%0A%20%20%20%20%0A%20%20%20%20if%20(!debug)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20debugRects%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20RenderDebugRects()%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20debug%20controls%0A%0Afunction%20UpdateDebugControls()%0A%7B%0A%20%20%20%20if%20(debug)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(50))%20%2F%2F%202%0A%20%20%20%20%20%20%20%20%20%20%20%20SaveSnapshot()%3B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(51))%20%2F%2F%203%0A%20%20%20%20%20%20%20%20%20%20%20%20debugCollision%20%3D%20!debugCollision%3B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(52))%20%2F%2F%204%0A%20%20%20%20%20%20%20%20%20%20%20%20debugParticles%20%3D%20!debugParticles%3B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(53))%20%2F%2F%205%0A%20%20%20%20%20%20%20%20%20%20%20%20godMode%20%3D%20!godMode%3B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(145))%20%2F%2F%20scroll%20lock%0A%20%20%20%20%20%20%20%20%20%20%20%20debug%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(KeyWasPressed(71))%20%2F%2F%20g%0A%20%20%20%20%20%20%20%20%20%20%20%20godMode%3D1%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(KeyIsDown(70)%26%26KeyIsDown(82)%26%26KeyIsDown(65)%26%26KeyIsDown(78)%26%26KeyIsDown(75))%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20dev%20mode%20-%20press%20all%20keys%20to%20spell%20%22FRANK%22%0A%20%20%20%20%20%20%20%20if%20(!debug)%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(4)%3B%0A%20%20%20%20%20%20%20%20debug%20%3D%201%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20SaveSnapshot()%0A%7B%20%20%20%20%0A%20%20%20%20downloadLink.download%3D%22snapshot.png%22%3B%0A%20%20%20%20downloadLink.href%3DmainCanvas.toDataURL(%22image%2Fpng%22).replace(%22image%2Fpng%22%2C%20%22image%2Foctet-stream%22)%3B%0A%20%20%20%20downloadLink.click()%3B%0A%7D%0A%2F*%0A%20%20%20%20Bounce%20Back%20~%20A%20boomerang%20roguelike%20for%20JS13k%0A%20%20%20%20Copyright%20(C)%202019%20Frank%20Force%0A%0A%20%20%20%20This%20program%20is%20free%20software%3B%20you%20can%20redistribute%20it%20and%2For%20modify%0A%20%20%20%20it%20under%20the%20terms%20of%20the%20GNU%20General%20Public%20License%20as%20published%20by%0A%20%20%20%20the%20Free%20Software%20Foundation%3B%20either%20version%202%20of%20the%20License%2C%20or%0A%20%20%20%20(at%20your%20option)%20any%20later%20version.%0A%0A%20%20%20%20This%20program%20is%20distributed%20in%20the%20hope%20that%20it%20will%20be%20useful%2C%0A%20%20%20%20but%20WITHOUT%20ANY%20WARRANTY%3B%20without%20even%20the%20implied%20warranty%20of%0A%20%20%20%20MERCHANTABILITY%20or%20FITNESS%20FOR%20A%20PARTICULAR%20PURPOSE.%20%20See%20the%0A%20%20%20%20GNU%20General%20Public%20License%20for%20more%20details.%20%0A*%2F%0A%2F*%0A%20%20%20%20Bounce%20Back%20Javascript%20Game%0A%20%20%20%20By%20Frank%20Force%202019%0A%0A%20%20%20%20Game%20Features%0A%20%20%20%20-%20Boomerang%20physics%20%26%20dash%20ability%0A%20%20%20%20-%20Procedural%20level%20generation%0A%20%20%20%20-%203%20Enemy%20types%0A%20%20%20%20-%207%20types%20of%20pickups%0A%20%20%20%20-%20Giant%20and%20invisible%20enemy%20variants%0A%20%20%20%20-%20Final%20boss%20battle%0A%20%20%20%20-%20Saves%20gems%20earned%20and%20max%20level%20reached%0A%20%20%20%20-%20Shop%20system%20for%20buying%20items%0A%20%20%20%20-%20Minimap%0A%20%20%20%20-%20Footsteps%2C%20blood%2C%20and%20persistant%20effects%20system%0A%20%20%20%20-%2016%20Different%20sound%20effects%20with%20zzfx%0A%20%20%20%20-%20Procedurally%20generated%20music%0A%20%20%20%20-%20Speed%20run%20mode%20doesn't%20effect%20normal%20save%0A%20%20%20%20-%20Low%20health%20warning%20system%0A%20%20%20%20-%20Level%20transition%20effect%0A*%2F%0A%0A%22use%20strict%22%3B%20%2F%2F%20strict%20mode%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20debug%20config%0A%0A%2F%2FgodMode%3D1%3B%0A%2F%2Fdebug%3D1%3B%0A%2F%2FdebugCanvas%3D1%3B%0A%2F%2FdebugCollision%3D1%3B%0A%2F%2FsoundEnable%3D0%3B%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20init%0A%0Alet%20startLevel%3D0%3B%0Alet%20level%3B%0Alet%20levelNumber%3B%0Alet%20nextLevel%3B%0Alet%20warpLevel%3D0%3B%0Alet%20isFinalLevel%3B%0Alet%20isStartLevel%3B%0Alet%20levelTimer%20%3D%20new%20Timer()%3B%0Alet%20endLevelTimer%20%3D%20new%20Timer()%3B%0Alet%20levelExit%3B%0Alet%20loadNextLevel%3B%0Alet%20levelMaze%20%3D%20%5B%5D%3B%0Alet%20levelMazeSize%20%3D%204%3B%0Alet%20levelColor%20%3D%20new%20Color()%3B%0Alet%20levelFrame%3B%0A%0Alet%20boss%3B%0Alet%20player%3B%0Alet%20playerData%3B%0Alet%20playerStartPos%3B%0Alet%20winTimer%20%3D%20new%20Timer()%3B%0Alet%20healthWarning%20%3D%20new%20Timer()%3B%0Alet%20buyTimer%20%3D%20new%20Timer()%3B%0Alet%20mainCanvas%20%3D%20c1%3B%0Alet%20speedRunMode%3B%0Alet%20speedRunTime%3D0%3B%0Alet%20speedRunBestTime%3D0%3B%0Alet%20coinSoundTimer%20%3D%20new%20Timer()%3B%0A%0Aclass%20PlayerData%0A%7B%0A%20%20%20%20%2F%2F%20track%20player%20data%20between%20levels%20(when%20player%20is%20destroyed)%0A%20%20%20%20constructor()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.health%20%3D%203%3B%0A%20%20%20%20%20%20%20%20this.healthMax%20%3D%203%3B%0A%20%20%20%20%20%20%20%20this.boomerangs%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.bigBoomerangs%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.coins%20%3D%200%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20Init()%0A%7B%0A%20%20%20%20EngineInit()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20clear%20canvas%20to%20black%20so%20transition%20starts%20on%20a%20black%20screen%0A%20%20%20%20mainCanvasContext.fillRect(0%2C0%2CmainCanvasSize.x%2C%20mainCanvasSize.y)%3B%0A%0A%20%20%20%20Reset()%3B%0A%20%20%20%20NextLevel()%3B%0A%20%20%20%20EngineUpdate()%3B%0A%7D%0A%0Afunction%20Reset()%0A%7B%0A%20%20%20%20%2F%2F%20load%20local%20storage%0A%20%20%20%20playerData%20%3D%20new%20PlayerData()%3B%0A%20%20%20%20if%20(localStorage.kbap_coins)%0A%20%20%20%20%20%20%20%20playerData.coins%20%3D%20parseInt(localStorage.kbap_coins%2C%2010)%3B%0A%20%20%20%20if%20(localStorage.kbap_warp)%0A%20%20%20%20%20%20%20%20warpLevel%20%3D%20parseInt(localStorage.kbap_warp%2C%2010)%3B%0A%20%20%20%20if%20(localStorage.kbap_bestTime)%0A%20%20%20%20%20%20%20%20speedRunBestTime%20%3D%20parseInt(localStorage.kbap_bestTime%2C%2010)%3B%0A%20%20%20%20nextLevel%20%3D%20startLevel%3B%0A%7D%0A%0Afunction%20NextLevel()%0A%7B%0A%20%20%20%20%2F%2F%20go%20to%20next%20level%0A%20%20%20%20levelFrame%20%3D%200%3B%0A%20%20%20%20levelNumber%20%3D%20nextLevel%3B%0A%20%20%20%20nextLevel%20%3D%20(nextLevel%2B1)%2511%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20track%20highest%20level%20reached%0A%20%20%20%20if%20(!speedRunMode%20%26%26%20levelNumber%3EwarpLevel)%0A%20%20%20%20%20%20%20%20warpLevel%20%3D%20levelNumber%3B%0A%20%20%20%20localStorage.kbap_warp%20%3D%20warpLevel%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20check%20if%20is%20special%20level%0A%20%20%20%20isFinalLevel%20%3D%20levelNumber%3D%3D10%3B%0A%20%20%20%20isStartLevel%20%3D%20!levelNumber%3B%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%20%20%20%20speedRunMode%20%3D%200%3B%20%2F%2F%20reset%20speed%20run%20on%20start%20level%0A%20%20%20%20%0A%20%20%20%20InitLevel()%3B%0A%7D%0A%0Afunction%20InitLevel()%0A%7B%0A%20%20%20%20%2F%2F%20reset%20level%20stuff%0A%20%20%20%20levelTimer.Set()%3B%0A%20%20%20%20winTimer.UnSet()%3B%0A%20%20%20%20endLevelTimer.UnSet()%3B%0A%20%20%20%20cameraScale%3D2%3B%0A%20%20%20%20levelExit%20%3D%200%3B%0A%20%20%20%20boss%20%3D%200%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20clear%20everything%0A%20%20%20%20StartTransiton()%3B%0A%20%20%20%20ClearGameObjects()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20prevent%20player%20being%20stuck%20with%20no%20boomerangs%0A%20%20%20%20if%20(!playerData.boomerangs%20%26%26%20!playerData.bigBoomerangs)%0A%20%20%20%20%20%20%20%20playerData.boomerangs%3D1%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20create%20the%20level%20and%20player%0A%20%20%20%20GenerateLevel()%3B%0A%20%20%20%20player%20%3D%20new%20Player(playerStartPos)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20spawn%20debug%20objects%0A%20%20%20%20%2F%2Fnew%20Pickup(new%20Vector2(13%2C10)%2C0)%3B%0A%20%20%20%20%2F%2Fnew%20SlimeEnemy(new%20Vector2(8%2C10)%2C3)%3B%0A%20%20%20%20%2F%2Fnew%20JumpingEnemy(new%20Vector2(10%2C10))%3B%0A%20%20%20%20%2F%2Fnew%20ShieldEnemy(new%20Vector2(12%2C10))%3B%0A%20%20%20%20%2F%2FSpawnPickups(playerStartPos.Clone().AddXY(3%2C-6)%2C1%2C100)%3B%0A%7D%0A%0Afunction%20SpawnPickups(pos%2C%20chance%3D1%2C%20count%3D1)%0A%7B%0A%20%20%20%20%2F%2F%20random%20chance%20to%20not%20drop%0A%20%20%20%20if%20(Rand()%3Echance)%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%0A%20%20%20%20for(let%20i%3D0%3Bi%3Ccount%3B%2B%2Bi)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20p%20%3D%20new%20Pickup(pos.Clone()%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20RandInt(8)%3F%20%20%20%20%20%20%20%20%2F%2F%20coin%20or%20heart%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20(RandInt(20)%3F3%3A4)%3A%20%2F%2F%20small%20or%20big%20coin%3F%0A%20%20%20%20%20%20%20%20%20%20%20%20(RandInt(4)%3F0%3A1)%20%20%20%2F%2F%20half%20or%20whole%20heart%3F%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20add%20extra%20velocity%20to%20sucessive%20spawns%20when%20dropping%20multiple%0A%20%20%20%20%20%20%20%20if%20(count%3E1)%0A%20%20%20%20%20%20%20%20%20%20%20%20p.velocity%20%3D%20RandVector(.1%20%2B%20Clamp(i%2C3%2C30)*.03*Rand())%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%20%2F%2F%20collide%20with%20level%20object%20if%20one%20exists%20and%20return%20if%20bounced%0Afunction%20DestroyLevelObject(pos%2CbounceRock%3D1)%0A%7B%0A%20%20%20%20%2F%2F%20is%20something%20solid%20there%3F%0A%20%20%20%20let%20data%20%3D%20level.GetDataFromPos(pos)%3B%0A%20%20%20%20if%20(!data.IsSolid())%0A%20%20%20%20%20%20%20%20return%200%3B%0A%0A%20%20%20%20%2F%2F%20did%20it%20hit%20an%20object%3F%0A%20%20%20%20let%20bounce%20%3D%201%3B%0A%20%20%20%20let%20type%20%3D%20data.object%3B%0A%20%20%20%20if%20(type%3D%3D1%20%7C%7C%20type%3D%3D2)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20clear%20out%20the%20tile%0A%20%20%20%20%20%20%20%20level.GetDataFromPos(pos).object%20%3D%200%3B%0A%20%20%20%20%20%20%20%20level.DrawTileData(pos.x%2Cpos.y)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20small%20chance%20of%20dropping%20a%20pickup%0A%20%20%20%20%20%20%20%20SpawnPickups(pos%2C%20.05)%3B%0A%0A%20%20%20%20%20%20%20%20if%20(type%3D%3D1)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20bush%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20level.DrawEllipse(pos%2CRandBetween(.1%2C.15)%2CRGBA(0%2C0%2C0%2CRandBetween(.3%2C.6)))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20bounce%3D0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20rock%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(14)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20i%3D9%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level.DrawEllipse(pos.Clone().Add(RandVector(.2))%2CRandBetween(.1%2C.2)%2CRGBA(.2%2C.1%2C.05%2CRandBetween(.3%2C.6)))%3B%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20bounce%20%3D%20bounceRock%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20particle%20effects%0A%20%20%20%20%20%20%20%20new%20ParticleEmitter%0A%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20pos%2C%20.5%2C%20.1%2C%20%20%20%20%20%2F%2F%20pos%2C%20emitter%20size%2C%20particle%20size%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3D%3D1%20%3F%20new%20Color(.4%2C.8%2C.1%2C1)%20%3A%20new%20Color(.4%2C.2%2C.1%2C1)%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20type%3D%3D1%20%3F%20new%20Color(0%2C.1%2C0%2C1)%20%3A%20new%20Color(0%2C0%2C0%2C1)%0A%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20bounce%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20update%2Frender%0A%0Afunction%20Update()%0A%7B%0A%20%20%20%20%2B%2BlevelFrame%3B%0A%20%20%20%20UpdateAudio()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20save%20data%0A%20%20%20%20if%20(!speedRunMode)%0A%20%20%20%20%20%20%20%20localStorage.kbap_coins%20%3D%20playerData.coins%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20update%20speed%20run%20time%0A%20%20%20%20if%20(!paused%20%26%26%20!winTimer.IsSet()%20%26%26%20!player.IsDead())%0A%20%20%20%20%20%20%20%20speedRunTime%20%2B%3D%20timeDelta%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20restart%20if%20dead%20or%20won%0A%20%20%20%20if%20((player.IsDead()%20%7C%7C%20winTimer.IsSet())%20%26%26%20KeyWasPressed(27))%0A%20%20%20%20%20%20%20%20loadNextLevel%20%3D%202%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20load%20next%20level%20when%20ready%0A%20%20%20%20if%20(endLevelTimer.IsSet()%20%26%26%20endLevelTimer.Elapsed())%0A%20%20%20%20%20%20%20%20loadNextLevel%20%3D%201%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20debug%20key%20N%20to%20load%20next%20level%0A%20%20%20%20if%20(debug%20%26%26%20KeyWasPressed(78))%0A%20%20%20%20%20%20%20%20loadNextLevel%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20zoom%20out%20on%20final%20level%0A%20%20%20%20if%20(isFinalLevel)%0A%20%20%20%20%20%20%20%20cameraScale%20%3D%20Max(cameraScale-.001%2C1)%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20title%20screen%0A%20%20%20%20%20%20%20%20let%20pos%20%3D%20new%20Vector2(8%2C3.7)%3B%0A%20%20%20%20%20%20%20%20let%20t%20%3D%20levelTimer.Get()%3B%0A%20%20%20%20%20%20%20%20let%20p%20%3D%20Percent(t%2C0%2C3.3)%0A%20%20%20%20%20%20%20%20let%20b%20%3D%20Math.abs(3-4*p)%2F1.7%3B%0A%20%20%20%20%20%20%20%20let%20c1%20%3D%60hsla(%24%7Bt*99%7D%2C99%25%2C50%25)%60%3B%0A%20%20%20%20%20%20%20%20level.DrawText('BOUNCE'%2C%20%20%20pos.Clone().AddXY(0%2C-b)%2C%2033*p%2C'center'%2C2%2C'%23000'%2Cc1)%3B%0A%20%20%20%20%20%20%20%20level.DrawText('BACK'%2C%20%20%20%20%20pos.Clone().AddXY(0%2Cb%2B1.2)%2C%2033*p%2C'center'%2C2%2C'%23000'%2Cc1)%3B%0A%20%20%20%20%20%20%20%20if%20(levelFrame%3D%3D200)%0A%20%20%20%20%20%20%20%20%20%20%20%20level.DrawText('A%20JS13k%202019%20Game'%2C%20%20%20new%20Vector2(8%2C9.5)%2C%2014)%3B%0A%20%20%20%20%20%20%20%20if%20(levelFrame%3D%3D260)%0A%20%20%20%20%20%20%20%20%20%20%20%20level.DrawText('By%20Frank%20Force'%2C%20%20%20new%20Vector2(8%2C10.5)%2C%2014)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20PreRender()%0A%7B%0A%20%20%20%20%2F%2F%20camera%20is%20always%20centered%20on%20player%0A%20%20%20%20cameraPos.Copy(player.pos)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20clear%20canvas%20to%20level%20color%0A%20%20%20%20mainCanvasContext.fillStyle%3DlevelColor.RGBA()%3B%0A%20%20%20%20mainCanvasContext.fillRect(0%2C0%2CmainCanvasSize.x%2C%20mainCanvasSize.y)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20background%20starfield%20in%20start%20level%0A%20%20%20%20%20%20%20%20mainCanvasContext.fillStyle%3D'%23999'%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3D2e3%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.fillRect((Math.sin(i)*1e9-time*(i%2B1e3)%2F50)%25(mainCanvas.width%2B9)-9%2Ci*9%25mainCanvas.height%2Ci%257%2Ci%257)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20draw%20the%20level%20(bottom%20layer)%0A%20%20%20%20level.Render()%3B%0A%7D%0A%0Afunction%20PostRender()%0A%7B%20%20%0A%20%20%20%20if%20(loadNextLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20hook%20to%20load%20next%20level%20is%20here%20so%20transition%20effects%20work!%0A%20%20%20%20%20%20%20%20if%20(loadNextLevel%3D%3D2)%0A%20%20%20%20%20%20%20%20%20%20%20%20Reset()%3B%0A%20%20%20%20%20%20%20%20loadNextLevel%20%3D%200%3B%0A%20%20%20%20%20%20%20%20NextLevel()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20UpdateTransiton()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20centered%20hud%20text%0A%20%20%20%20let%20bigText%20%3D%20''%3B%0A%20%20%20%20if%20(paused)%0A%20%20%20%20%20%20%20%20bigText%20%3D%20'-paused-'%0A%20%20%20%20if%20(winTimer.IsSet())%0A%20%20%20%20%20%20%20%20bigText%20%3D%20'You%20Win!'%3B%0A%20%20%20%20if%20(player.IsDead())%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20bigText%20%3D%20'Game%20Over!'%0A%20%20%20%20%20%20%20%20DrawText('Press%20Escape'%2CmainCanvasSize.x%2F2%2C%20mainCanvasSize.y%2F2%2B80%2C%2042)%3B%0A%20%20%20%20%7D%20%20%0A%20%20%20%20DrawText(bigText%2CmainCanvasSize.x%2F2%2C%20mainCanvasSize.y%2F2-80%2C%2072%2C%20'center'%2C%202)%3B%0A%20%20%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20hud%0A%20%20%20%20%20%20%20%20let%20iconSize%20%3D%2016%3B%0A%20%20%20%20%20%20%20%20let%20y%20%3D%20iconSize%3B%0A%0A%20%20%20%20%20%20%20%20for(let%20i%3D0%3Bi%3Cplayer.healthMax%3Bi%2B%2B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20iconSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(healthWarning.Get()%20%3C%20.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20*%3D%201%2BMath.sin(2*PI*healthWarning.Get()%2F.5)*.2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(player.health%20%3E%20i)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20t%20%3D%20player.health-i%3E%3D1%3F3%3A2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawScreenTile(iconSize%2B2*iconSize*i%2Cy%2Cs%2Ct%2C5)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20y%20%2B%3D%202*iconSize%3B%0A%20%20%20%20%20%20%20%20%2F%2Fif%20(playerData.boomerangs)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawScreenTile(iconSize%2Cy%2CiconSize%2C0%2C5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(playerData.boomerangs%2C%2034%2C%20y%2B2%2C%2032%2C%20'left')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(playerData.bigBoomerangs)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawScreenTile(iconSize%2B60%2Cy%2CiconSize%2C7%2C5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(playerData.bigBoomerangs%2C%2034%2B60%2C%20y%2B2%2C%2032%2C%20'left')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%2F%2Fif%20(playerData.coins)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%2B%3D%202*iconSize%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawScreenTile(iconSize%2C5*iconSize%2CiconSize%2C5%2C5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(playerData.coins%2C%2034%2C%20y%2B2%2C%2032%2C%20'left')%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(speedRunMode)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20show%20time%20if%20speed%20run%20mode%20is%20activated%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20c%20%3D%20(player.IsDead()%20%7C%7C%20winTimer.IsSet())%3F%20'%23F00'%20%3A%20'%23000'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(FormatTime(speedRunTime)%2C%20mainCanvas.width%2F2%2C%2028%2C%2040%2C%20'center'%2C1%2Cc)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20RenderMap()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20mouse%20cursor%0A%20%20%20%20mainCanvas.style.cursor%3D'none'%3B%20%0A%20%20%20%20let%20mx%20%3D%20mousePos.x%7C0%3B%0A%20%20%20%20let%20my%20%3D%20mousePos.y%7C0%3B%0A%20%20%20%20let%20mw%20%3D%202%3B%0A%20%20%20%20let%20mh%20%3D%2015%3B%0A%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'difference'%3B%0A%20%20%20%20mainCanvasContext.fillStyle%3D'%23FFF'%0A%20%20%20%20mainCanvasContext.fillRect(mx-mw%2Cmy-mh%2Cmw*2%2Cmh*2)%3B%0A%20%20%20%20mainCanvasContext.fillRect(mx-mh%2Cmy-mw%2Cmh*2%2Cmw*2)%3B%0A%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'source-over'%3B%0A%7D%0A%0Afunction%20MazeDataPos(pos)%0A%7B%0A%20%20%20%20%2F%2F%20get%20the%20index%20into%20the%20maze%20array%0A%20%20%20%20let%20cellRatio%20%3D%20levelMazeSize%20%2F%20levelSize%3B%0A%20%20%20%20pos%20%3D%20pos.Clone(cellRatio)%3B%0A%20%20%20%20return%20(pos.x%7C0)%20%2B%20(pos.y%7C0)%20*%20levelMazeSize%3B%0A%7D%0A%0Afunction%20RenderMap()%0A%7B%0A%20%20%20%20if%20((isStartLevel%20%7C%7C%20isFinalLevel)%20%26%26%20!debug)%0A%20%20%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20let%20iconSize%20%3D%2016%3B%0A%20%20%20%20let%20y%20%3D%20iconSize%3B%0A%20%20%20%20let%20w%20%3D%2024%3B%0A%20%20%20%20let%20o%20%3D%20mainCanvasSize.x-levelMazeSize*w-10%3B%0A%0A%20%20%20%20%2F%2F%20show%20level%20number%0A%20%20%20%20y%20%2B%3D%202*iconSize%3B%0A%20%20%20%20if%20(!isStartLevel)%0A%20%20%20%20%20%20%20%20DrawText('L-'%2B%20levelNumber%2C%20o-10%2C%2024%2C%2032%2C'right')%3B%0A%0A%20%20%20%20%2F%2F%20mark%20room%20player%20is%20in%20as%20visited%0A%20%20%20%20if%20(levelMaze%5BMazeDataPos(player.pos)%5D)%0A%20%20%20%20%20%20%20%20levelMaze%5BMazeDataPos(player.pos)%5D%20%3D%20-1%3B%0A%0A%20%20%20%20let%20cellWidth%20%3D%20levelSize%20%2F%20levelMazeSize%3B%0A%20%20%20%20let%20playerMazeX%20%3D%20player.pos.x%20%2F%20cellWidth%20%7C%200%3B%0A%20%20%20%20let%20playerMazeY%20%3D%20player.pos.y%20%2F%20cellWidth%20%7C%200%3B%0A%0A%20%20%20%20%2F%2F%20render%20minimap%0A%20%20%20%20mainCanvasContext.strokeStyle%3D'%23000'%3B%0A%20%20%20%20mainCanvasContext.lineWidth%3D2%3B%0A%20%20%20%20mainCanvasContext.strokeRect(o%2C10%2Cw*levelMazeSize%2Cw*levelMazeSize)%3B%0A%20%20%20%20for(let%20y%3DlevelMazeSize%3By--%3B)%0A%20%20%20%20for(let%20x%3DlevelMazeSize%3Bx--%3B)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20m%20%3D%20levelMaze%5Bx%2By*levelMazeSize%5D%3B%0A%0A%20%20%20%20%20%20%20%20let%20c%20%3D%20'%230004'%3B%20%2F%2F%20unexplored%20invalid%0A%20%20%20%20%20%20%20%20if%20(m%3E0)%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20'%23333'%3B%20%2F%2F%20unexplored%20valid%0A%20%20%20%20%20%20%20%20if%20(m%3D%3D-1)%20%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20'%23FFF'%3B%20%2F%2F%20explored%0A%20%20%20%20%20%20%20%20if%20(x%20%3D%3D%20playerMazeX%20%26%26%20y%20%3D%3D%20playerMazeY)%0A%20%20%20%20%20%20%20%20%20%20%20%20c%20%3D%20'%23F00'%3B%20%2F%2F%20player%20location%0A%0A%20%20%20%20%20%20%20%20mainCanvasContext.fillStyle%3Dc%3B%0A%20%20%20%20%20%20%20%20mainCanvasContext.fillRect(o%2Bx*w%2C10%2By*w%2Cw%2Cw)%3B%0A%20%20%20%20%20%20%20%20if%20(m)%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.strokeRect(o%2Bx*w%2C10%2By*w%2Cw%2Cw)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20draw%20the%20objects%20on%20the%20minimap%0A%20%20%20%20gameObjects.forEach(object%3D%3E%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20r%20%3D%20object.radarSize%3B%0A%20%20%20%20%20%20%20%20if%20(r%20%26%26%20levelMaze%5BMazeDataPos(object.pos)%5D%3C0)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3D%20object.pos.Clone(w%2FcellWidth).AddXY(o%2C10).Round()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.fillStyle%3Dobject%3D%3Dplayer%3F'%23FFF'%3A'%23000'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.fillRect(p.x-r-1%2Cp.y-r-1%2C2*r%2B2%2C2*r%2B2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.fillStyle%3Dobject%3D%3Dplayer%3F'%23000'%3Aobject.isEnemy%3F'%23F00'%3A'%23FFF'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.fillRect(p.x-r%2Cp.y-r%2C2*r%2C2*r)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20game%20objects%0A%0Aclass%20MyGameObject%20extends%20GameObject%0A%7B%0A%20%20%20%20constructor(pos%2CtileX%3D0%2CtileY%3D0%2Csize%3D.5%2CcollisionSize%3D0%2Chealth%3D1)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super(pos%2CtileX%2CtileY%2Csize%2CcollisionSize%2Chealth)%3B%0A%20%20%20%20%20%20%20%20this.walkFrame%3D0%3B%0A%20%20%20%20%20%20%20%20this.rotation%3D1%3B%0A%20%20%20%20%20%20%20%20this.radarSize%3D1%3B%0A%20%20%20%20%20%20%20%20this.isInvisible%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.bloodColor%20%3D%20new%20Color(.8%2C0%2C.05%2C.5)%3B%0A%20%20%20%20%20%20%20%20this.bloodAdditive%20%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20UpdateWalk()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20footprints%0A%20%20%20%20%20%20%20%20let%20lastWalkFrame%20%3D%20this.walkFrame%3B%0A%20%20%20%20%20%20%20%20this.walkFrame%20%2B%3D%201.5*this.velocity.Length()%3B%0A%20%20%20%20%20%20%20%20if%20(lastWalkFrame%252%20%3C%201%20%26%26%20this.walkFrame%252%20%3E1%20%7C%7C%20this.walkFrame%252%20%3C%20lastWalkFrame%252)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20isOnSand%20%3D%20this.IsOnSand()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20angle%20%3D%20this.rotation%20*%20PI%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20side%20%3D%20this.walkFrame%252%20%3C%20lastWalkFrame%252%3F%201%20%3A%20-1%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20offset%20%3D%20(new%20Vector2(0%2Cside%2F8)).Rotate(angle)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20footPos%20%3D%20this.pos.Clone().Add(offset)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20c%20%3D%20isOnSand%3F'%234215'%3A'%232223'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20new%20Vector2(.2%2CisOnSand%3F.2%3A.1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isOnSand)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.y*%3DRandBetween(1%2C1.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.x*%3DRandBetween(1%2C1.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20footPos.y%2B%3D.3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20level.DrawEllipse(footPos%2Cs%2Cc%2Cangle)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20BloodSplat(scale%3D1%2Cparticles%3D1)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20a%20bunch%20of%20random%20ellipses%0A%20%20%20%20%20%20%20%20if%20(this.bloodAdditive)%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvasContext.globalCompositeOperation%3D'screen'%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3D30%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20pos%20%3D%20this.pos.Clone().Add(RandVector(Rand(scale*this.size.x)))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20size%20%3D%20new%20Vector2(this.size.x*RandBetween(.2%2C.5)%2Cthis.size.y*RandBetween(.2%2C.5))%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20angle%20%3D%20RandBetween(0%2C2*PI)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20level.DrawEllipse(pos%2Csize.Multiply(scale)%2Cthis.bloodColor.RGBA()%2Cangle)%3B%20%0A%20%20%20%20%20%20%20%20%7D%20%20%0A%20%20%20%20%20%20%20%20levelCanvasContext.globalCompositeOperation%3D'source-over'%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20kick%20off%20a%20particle%20effect%0A%20%20%20%20%20%20%20%20if%20(particles)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20scale*this.size.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3D%20new%20ParticleEmitter%0A%20%20%20%20%20%20%20%20%20%20%20%20(%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.pos%2C%20s*.6%2C%20s*.2%2C%20%2F%2F%20pos%2C%20emitter%20size%2C%20particle%20size%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bloodColor.Clone().SetAlpha(1)%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bloodColor.Clone(this.bloodAdditive%3F3%3A.5).SetAlpha(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Kill()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20this.BloodSplat()%3B%0A%20%20%20%20%20%20%20%20PlaySound(9)%3B%0A%20%20%20%20%20%20%20%20super.Kill()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20invisible%20objects%20become%20visible%20when%20damaged%0A%20%20%20%20%20%20%20%20if%20(this.isInvisible%20%26%26%20!shadowRenderPass%20%26%26%20!hitRenderPass)%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.globalAlpha%3D%20.1%20%2B%20this.GetDamageFlashPercent()%3B%0A%20%20%20%20%20%20%20%20super.Render()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20IsOnSand()%20%7B%20return%20level.GetDataFromPos(this.pos).type%20%3D%3D%202%3B%20%7D%0A%7D%0A%20%20%20%20%0Aclass%20Player%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super(pos%2C0%2C4%2C.5%2C.4%2CplayerData.healthMax)%3B%0A%20%20%20%20%20%20%20%20this.health%20%3D%20playerData.health%3B%0A%20%20%20%20%20%20%20%20this.dashTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.throwTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.inputTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.playerDamageTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.inputTimer.Set()%3B%0A%20%20%20%20%20%20%20%20this.throwRotation%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.posBuffer%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20this.dashWaitTime%20%3D%203%3B%0A%20%20%20%20%20%20%20%20this.radarSize%3D2%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20IsDashing()%20%7B%20return%20!this.dashTimer.Elapsed()%3B%20%7D%0A%20%20%20%20%0A%20%20%20%20CollideLevel(data%2C%20pos)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20destroy%20level%20if%20dashing%0A%20%20%20%20%20%20%20%20if%20(this.IsDashing())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20DestroyLevelObject(pos)%3B%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20super.CollideLevel(data%2C%20pos)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20IsIntro()%20%7B%20return%20(levelTimer.Get()%20%3C%201.5)%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20keep%20player%20data%20updated%0A%20%20%20%20%20%20%20%20playerData.health%20%3D%20this.health%3B%0A%20%20%20%20%20%20%20%20if%20(this.IsDead()%20%7C%7C%20endLevelTimer.IsSet()%20%7C%7C%20this.IsIntro())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20stop%20and%20do%20no%20more%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.health%20%3C%3D%201%20%26%26%20healthWarning.Get()%20%3E%20this.health)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20health%20warning%0A%20%20%20%20%20%20%20%20%20%20%20%20healthWarning.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(11)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(MouseWasPressed()%20%26%26%20(playerData.boomerangs%7C%7C%20playerData.bigBoomerangs))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20throw%20boomerang%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20isBig%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(playerData.bigBoomerangs)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--playerData.bigBoomerangs%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20isBig%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--playerData.boomerangs%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20b%20%3D%20new%20Boomerang(this.pos%2CisBig)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.throwRotation%3D%20b.Throw(this%2C%20mousePosWorld)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.throwTimer.Set(.4)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20move%20input%0A%20%20%20%20%20%20%20%20let%20acceleration%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20if%20(KeyIsDown(65))%0A%20%20%20%20%20%20%20%20%20%20%20%20acceleration.x%20-%3D%201%2Cthis.rotation%3D0%3B%0A%20%20%20%20%20%20%20%20if%20(KeyIsDown(68))%0A%20%20%20%20%20%20%20%20%20%20%20%20acceleration.x%20%2B%3D%201%2Cthis.rotation%3D2%3B%0A%20%20%20%20%20%20%20%20if%20(KeyIsDown(87))%0A%20%20%20%20%20%20%20%20%20%20%20%20acceleration.y%20-%3D%201%2Cthis.rotation%3D3%3B%0A%20%20%20%20%20%20%20%20if%20(KeyIsDown(83))%0A%20%20%20%20%20%20%20%20%20%20%20%20acceleration.y%20%2B%3D%201%2Cthis.rotation%3D1%3B%0A%0A%20%20%20%20%20%20%20%20let%20isOnSand%20%3D%20this.IsOnSand()%3B%0A%20%20%20%20%20%20%20%20if%20(this.IsDashing())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20dash%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!acceleration.x%20%26%26%20!acceleration.y)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acceleration.Set(-1%2C0).Rotate(-this.rotation*PI%2F2)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20no%20damage%20or%20slow%20from%20sand%20while%20dashing%0A%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20isOnSand%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20track%20players%20position%20for%20the%20dash%20render%20effect%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(frame%253%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.posBuffer.push(this.pos.Clone())%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.posBuffer.length%20%3E%2020)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.posBuffer.shift()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20non%20dash%0A%20%20%20%20%20%20%20%20%20%20%20%20this.posBuffer%20%3D%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.dashTimer.IsSet()%20%26%26%20this.dashTimer.Get()%3Ethis.dashWaitTime)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20play%20sound%20when%20dash%20is%20ready%20again%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dashTimer.UnSet()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(16)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20((KeyWasPressed(32)%7C%7CKeyWasPressed(16))%20%26%26%20!this.dashTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20start%20dash%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(12)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dashTimer.Set(.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(acceleration.x%20%7C%7C%20acceleration.y)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apply%20acceleration%0A%20%20%20%20%20%20%20%20%20%20%20%20acceleration.Normalize(.016*(isOnSand%3F.5%3A1))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.IsDashing())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20acceleration.Multiply(2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Add(acceleration)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.inputTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20reset%20walk%20frame%20when%20input%20isnt%20pressed%20for%20a%20while%0A%20%20%20%20%20%20%20%20if%20(this.inputTimer.Get()%20%3E%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.walkFrame%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20walk%20if%20not%20throwing%20or%20dashing%0A%20%20%20%20%20%20%20%20if%20(this.throwTimer.Elapsed()%20%26%26%20!this.IsDashing())%0A%20%20%20%20%20%20%20%20%20%20%20this.UpdateWalk()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(endLevelTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.IsDead()%20%7C%7C%20this.IsIntro()%20%26%26%20isStartLevel)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20set%20to%20dead%20tile%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%207%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileY%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20super.Render()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20figure%20out%20the%20tile%2C%20rotation%20and%20mirror%0A%20%20%20%20%20%20%20%20this.tileY%20%3D%204%3B%0A%20%20%20%20%20%20%20%20if%20(this.rotation%261)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20facing%20left%20or%20right%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20walk%20by%20toggling%20betwen%202%20frames%20and%20mirror%20to%20face%20direction%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%20this.rotation%3D%3D1%3F2%3A3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20this.walkFrame%252%7C0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.throwTimer.Elapsed()%7C%7C!this.dashTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%2B%3D%203%3B%20%2F%2F%20throw%2Fdash%20frame%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(this.inputTimer.Get()%20%3E%201%20%26%26%20this.rotation%3D%3D1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20idle%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%207%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20(this.inputTimer.Get()%2F2%7C0)%261%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20facing%20up%20or%20down%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20walk%20by%20toggling%20mirror%20and%20select%20frame%20to%20face%20direction%0A%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20this.rotation!%3D2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%20this.walkFrame%252%7C0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.throwTimer.Elapsed()%7C%7C!this.dashTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%204%3B%20%2F%2F%20throw%2Fdash%20frame%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20hit%20%3D%20hitRenderPass%3B%0A%20%20%20%20%20%20%20%20if%20(!this.throwTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20use%20the%20throw%20rotation%20if%20throwing%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20this.throwRotation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.rotation%261)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20this.rotation%3D%3D1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(!shadowRenderPass%20%26%26%20hit)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20position%20buffer%20during%20the%20hit%20render%20pass%20when%20dashing%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'screen'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20i%3Dthis.posBuffer.length%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%20hit*(i%2Fthis.posBuffer.length%20%2B%20.01)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DrawTile(this.posBuffer%5Bi%5D%2Cthis.size%2Cthis.tileX%2Cthis.tileY%2Cthis.angle%2Cthis.mirror%2Cthis.height)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%20hit%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.globalCompositeOperation%20%3D%20'difference'%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20d%20%3D%20this.dashTimer.Get()%3B%0A%20%20%20%20%20%20%20%20if%20(!shadowRenderPass%20%26%26%20d%3Cthis.dashWaitTime%2B.5)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20show%20a%20white%20outline%20around%20the%20player%20when%20dash%20is%20charging%0A%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%20d%3Cthis.dashWaitTime%3Fd%2Fthis.dashWaitTime%3AMath.sin((d-this.dashWaitTime)*PI*4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawTile(this.pos%2Cthis.size.Clone(1.1)%2Cthis.tileX%2Cthis.tileY%2Cthis.angle%2Cthis.mirror%2Cthis.height)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20hitRenderPass%20%3D%20hit%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Render()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(playerData.boomerangs%20%7C%7C%20playerData.bigBoomerangs)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20boomerang%20on%20player's%20back%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20x%20%3D%20playerData.bigBoomerangs%3F7%3A0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.rotation%20%3D%3D%203)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DrawTile(this.pos%2Cthis.size%2Cx%2C5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.rotation%252%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DrawTile(this.pos.Clone().AddXY(-(this.rotation-1)*.2%2C0)%2Cthis.size.Clone(new%20Vector2(.6%2C1))%2Cx%2C5)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Damage(damage)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20extra%20long%20damage%20timer%20for%20player%0A%20%20%20%20%20%20%20%20if%20(!this.playerDamageTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20prepvent%20damage%20during%20intro%2Foutro%0A%20%20%20%20%20%20%20%20if%20(godMode%20%7C%7C%20endLevelTimer.IsSet()%20%7C%7C%20this.IsIntro()%20%7C%7C%20winTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20try%20to%20apply%20damage%0A%20%20%20%20%20%20%20%20let%20damageDone%20%3D%20super.Damage(damage)%3B%0A%20%20%20%20%20%20%20%20if%20(!damageDone)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.BloodSplat()%3B%0A%20%20%20%20%20%20%20%20PlaySound(1)%3B%0A%20%20%20%20%20%20%20%20this.playerDamageTimer.Set(1)%3B%0A%20%20%20%20%20%20%20%20return%20damageDone%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Kill()%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7B%20%20%0A%20%20%20%20%20%20%20%20this.BloodSplat(2)%3B%0A%20%20%20%20%20%20%20%20PlaySound(2)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20Boomerang%20%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos%2CisBig%3D0)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super(pos%2CisBig%3F7%3A0%2C5%2C.5%2CisBig%3F.45%3A.4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.damping%20%3D%20.98%3B%0A%20%20%20%20%20%20%20%20this.angle%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.canDamageLevel%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.heldPickup%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.throwAccel%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.throwFrames%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.bounceObject%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.isBig%20%3D%20isBig%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Throw(owner%2C%20targetPos)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20PlaySound(7)%0A%20%20%20%20%20%20%20%20this.throwFrames%20%3D%20this.isBig%3F9%3A8%3B%0A%20%20%20%20%20%20%20%20this.throwAccel%20%3D%20targetPos.Clone().Subtract(owner.pos)%3B%0A%20%20%20%20%20%20%20%20this.throwAccel.Normalize(.04)%3B%0A%20%20%20%20%20%20%20%20this.angleVelocity%20%3D%20.5%3B%0A%20%20%20%20%20%20%20%20this.height%20%3D%20this.angleVelocity%2F2%3B%0A%20%20%20%20%20%20%20%20this.velocity%20%3D%20owner.velocity.Clone()%3B%0A%20%20%20%20%20%20%20%20return%20this.throwAccel.Rotation()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20CollideLevel(data%2C%20pos)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(data.object)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%20%2F%2F%20flash%20when%20it%20hits%20an%20object%0A%20%20%20%20%20%20%20%20return%20DestroyLevelObject(pos%2C!this.isBig)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.throwFrames)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.throwFrames--%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(!this.angleVelocity)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20boomerang%20is%20on%20the%20ground%0A%20%20%20%20%20%20%20%20%20%20%20%20this.radarSize%3D3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.damageFlashTime%20%3D%20.8%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.differenceFlash%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.heldPickup)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.heldPickup.isHeld%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.heldPickup%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%20%3C%20.005%20%26%26%20this.damageTimer.Get()%20%3E%204*this.damageFlashTime)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set(-this.damageFlashTime%2F2)%3B%20%2F%2F%20sparkle%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(endLevelTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20endLevelTimer.Set(1)%3B%20%2F%2F%20wait%20for%20boomerang%20to%20end%20level%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apply%20throw%20acceleration%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20a%20%3D%20this.GetLifeTime()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!mouseIsDown%20%7C%7C%20!this.throwFrames)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.throwAccel%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(this.throwAccel)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Add(this.throwAccel)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20reduce%20angular%20velocity%0A%20%20%20%20%20%20%20%20%20%20%20%20this.angleVelocity%20-%3D%20.002%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.angleVelocity%20%3C%20.1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20slow%20it%20down%20even%20faster%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.angleVelocity%20-%3D%20.005%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Multiply(.8)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.angleVelocity%20%3C%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.angleVelocity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20height%20is%20proportional%20to%20angular%20velocity%0A%20%20%20%20%20%20%20%20%20%20%20%20this.height%20%3D%20this.angleVelocity%2F2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.throwAccel%20%26%26%20this.height%20%3E%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20pull%20to%20player%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20player.pos.Clone()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20d.Subtract(this.pos).Multiply(0.004%20*%20this.angleVelocity)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Add(d)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20gameObjects.forEach(o%3D%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.isBig%20%26%26%20o.isSmallPickup%20%26%26%20o.GetLifeTime()%20%3E%20.5%20%26%26%20!o.isHeld%20%26%26%20!this.heldPickup%20%26%26%20o.IsTouching(this))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20grab%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.isHeld%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.heldPickup%20%3D%20o%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20((o.isEnemy%7C%7Co.isStore)%20%26%26%20o.IsTouching(this))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20hit%20object%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.bounceObject%20%3D%3D%20o%20%7C%7C%20o.ReflectDamage(this.velocity))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.bounceObject%20!%3D%20o)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20reflect%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(15)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bounceObject%20%3D%20o%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Multiply(-.4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.angleVelocity*%3D.4%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.throwAccel%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(o.Damage(1%2Bthis.isBig))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20apply%20damage%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!isStartLevel)%20%2F%2F%20dont%20push%20in%20hub%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20o.velocity.Add(this.velocity.Clone(.5))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20let%20player%20pick%20it%20up%0A%20%20%20%20%20%20%20%20if%20((!this.angleVelocity%20%7C%7C%20this.GetLifeTime()%20%3E%20.5)%20%26%26%20!player.IsDead()%20%26%26%20player.Distance(this)%20%3C%20.6)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Pickup()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20all%20pickups%20to%20match%20our%20position%0A%20%20%20%20%20%20%20%20if%20(this.heldPickup)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.heldPickup.pos.Copy(this.pos).AddXY(0%2C-.001)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Pickup()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20PlaySound(6)%3B%0A%20%20%20%20%20%20%20%20if%20(this.isBig)%0A%20%20%20%20%20%20%20%20%20%20%20%20playerData.bigBoomerangs%2B%2B%3B%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20playerData.boomerangs%2B%2B%3B%0A%20%20%20%20%20%20%20%20player.throwTimer.Set(.3)%3B%0A%20%20%20%20%20%20%20%20player.throwRotation%3Dthis.pos.Clone().Subtract(player.pos).Rotation()%3B%0A%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20Pickup%20extends%20MyGameObject%0A%7B%0A%20%20%20%20%2F%2F%20type%3A%200%3Dhalf%2C%201%3Dwhole%2C%202%3Dcontainer%2C%203%3Dcoin%2C%204%3Dlarge%20coin%0A%20%20%20%20%0A%20%20%20%20constructor(pos%2C%20type%3D0)%20%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20super(pos%2C2%2Btype%2C5%2C.5%2C.3)%3B%20%0A%20%20%20%20%20%20%20%20this.type%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20this.timeOffset%20%3D%20Rand(9)%3B%0A%20%20%20%20%20%20%20%20this.isSmallPickup%20%3D%20type%20!%3D%202%3B%0A%20%20%20%20%20%20%20%20this.isHeld%3D0%3B%0A%20%20%20%20%20%20%20%20this.differenceFlash%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.damageFlashTime%20%3D%20.8%3B%0A%20%20%20%20%20%20%20%20this.radarSize%20%3D%20this.isSmallPickup%3F1%3A3%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20random%20sparkles%0A%20%20%20%20%20%20%20%20if%20(Rand()%20%3C%20.005%20%26%26%20this.damageTimer.Get()%20%3E%204*this.damageFlashTime)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set(-this.damageFlashTime%2F2)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20bob%20up%20and%20down%0A%20%20%20%20%20%20%20%20this.height%20%3D%20.1%2B.1*Math.sin(2*time%2Bthis.timeOffset)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20let%20player%20pick%20it%20up%0A%20%20%20%20%20%20%20%20if%20(!player.IsDead()%20%26%26%20player.IsTouching(this))%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Pickup()%3B%0A%20%20%20%20%20%20%20%20else%20if%20(boss%20%26%26%20boss.IsTouching(this))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20boss%20destroys%20pickups%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(14)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Pickup()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.type%3D%3D2)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20heart%20container%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BplayerData.healthMax%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20player.healthMax%20%3D%20playerData.healthMax%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20player.Heal(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(4)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.type%3D%3D3)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%201%20coin%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(10)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2BplayerData.coins%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.type%3D%3D4)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%205%20coin%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(10)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20playerData.coins%2B%3D5%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20half%20or%20whole%20heart%0A%20%20%20%20%20%20%20%20%20%20%20%20player.Heal(.5%2B%20this.type%2F2)%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(3)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20Enemy%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos%2CtileX%3D0%2CtileY%3D0%2Csize%3D.5%2CcollisionSize%3D0%2Chealth%3D1%2Cbig%3D0)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20super(pos%2CtileX%2CtileY%2Csize%2CcollisionSize%2Chealth)%3B%20%0A%20%20%20%20%20%20%20%20this.isEnemy%20%3D%201%0A%20%20%20%20%20%20%20%20this.spawnPickup%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.bloodAdditive%20%3D%201%3B%0A%20%20%20%20%20%20%20%20this.isBig%20%3D%20big%3B%0A%20%20%20%20%20%20%20%20this.radarSize%3Dbig%3F2%3A1%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Damage(damage)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20damageDone%20%3D%20super.Damage(damage)%3B%0A%20%20%20%20%20%20%20%20if%20(damageDone%20%26%26%20!this.IsDead())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.BloodSplat(.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(8)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20damageDone%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(player.IsTouching(this))%0A%20%20%20%20%20%20%20%20if%20(player.Damage(.5))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20push%20player%20when%20damaged%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20accel%20%3D%20player.pos.Clone()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20accel.Subtract(this.pos).Normalize(.1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20player.velocity.Add(accel)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Kill()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super.Kill()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20spawn%20portal%20if%20no%20enemies%20left%0A%20%20%20%20%20%20%20%20if%20(!levelExit%20%26%26%20!isFinalLevel%20%26%26%20!player.IsDead())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!gameObjects.some(o%3D%3Eo.isEnemy))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20levelExit%20%3D%20new%20LevelExit(this.pos)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.isBig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.spawnPickup%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20spawn%20pickups%0A%20%20%20%20%20%20%20%20let%20count%20%3D%201%3B%0A%20%20%20%20%20%20%20%20if%20(this.isBig)%0A%20%20%20%20%20%20%20%20%20%20%20%20count%20%3D%20RandIntBetween(3%2C%205)%3B%0A%20%20%20%20%20%20%20%20if%20(this.isInvisible)%0A%20%20%20%20%20%20%20%20%20%20%20%20count%20%3D%20count%20*%202%3B%0A%20%20%20%20%20%20%20%20SpawnPickups(this.pos%2C%20this.spawnPickup%2C%20count)%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20SlimeEnemy%20extends%20Enemy%0A%7B%0A%20%20%20%20constructor(pos%2ChealthLevel%2Cdifficulty%3D1)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20let%20size%20%3D%20.25*healthLevel%3B%0A%20%20%20%20%20%20%20%20super(pos%2C5%2Bdifficulty%2C0%2Csize%2Csize*.8%2ChealthLevel*difficulty%2ChealthLevel%3E3)%3B%20%0A%20%20%20%20%20%20%20%20this.bloodColor%20%3D%20difficulty%3E1%3Fnew%20Color(1%2C0%2C.5%2C.5)%3Anew%20Color(0%2C.5%2C1%2C.5)%3B%0A%20%20%20%20%20%20%20%20this.randMoveTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.randAccel%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20this.spawnPickup%20%3D%20healthLevel%20%3D%3D%201%3F%20difficulty%2F2%20%3A%200%3B%0A%20%20%20%20%20%20%20%20this.difficulty%20%3D%20difficulty%3B%0A%20%20%20%20%20%20%20%20this.healthLevel%20%3D%20healthLevel%3B%0A%20%20%20%20%20%20%20%20this.baseSize%20%3D%20size%3B%0A%20%20%20%20%20%20%20%20this.damping%20%3D%20.9%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20playerDistance%20%3D%20player.pos.Distance(this.pos)%3B%0A%20%20%20%20%20%20%20%20if%20(playerDistance%20%3E%2020)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20additive%20trail%0A%20%20%20%20%20%20%20%20levelCanvasContext.globalCompositeOperation%3D'screen'%3B%0A%20%20%20%20%20%20%20%20let%20trailColor%20%3D%20this.bloodColor.Clone().SetAlpha(.05).RGBA()%3B%0A%20%20%20%20%20%20%20%20level.DrawEllipse(this.pos%2C(new%20Vector2(.6%2C.4)).Multiply(this.size)%2CtrailColor)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.globalCompositeOperation%3D'source-over'%3B%0A%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20random%20movement%0A%20%20%20%20%20%20%20%20if%20(this.randMoveTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.randMoveTimer.Set(RandBetween(.5%2C1))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.randAccel%20%3D%20RandVector(1.3)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20calculate%20acceleration%0A%20%20%20%20%20%20%20%20let%20accel%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20if%20(!player.IsDead()%20%26%26%20playerDistance%20%3C%2015)%0A%20%20%20%20%20%20%20%20%20%20%20%20accel.Copy(player.pos)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.Subtract(this.pos)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.Normalize()%3B%0A%20%20%20%20%20%20%20%20accel.Add(this.randAccel)%0A%20%20%20%20%20%20%20%20%20%20%20%20.Multiply(this.difficulty%3E1%3F.004%3A.003)%0A%20%20%20%20%20%20%20%20%20%20%20%20.Multiply(this.IsOnSand()%3F.5%3A1)%3B%0A%20%20%20%20%20%20%20%20this.velocity.Add(accel)%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20change%20shape%20as%20it%20moves%0A%20%20%20%20%20%20%20%20let%20s%20%3D%20Math.sin(10%20*%20this.GetLifeTime())%3B%0A%20%20%20%20%20%20%20%20let%20sx%20%3D%20.9%2B.1*(1-s)%3B%0A%20%20%20%20%20%20%20%20let%20sy%20%3D%20.9%2B.1*s%3B%0A%20%20%20%20%20%20%20%20this.size.Set(this.baseSize*sx%2Cthis.baseSize*sy)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%0A%20%20%20%20Kill()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.healthLevel%20%3E%201)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20spawn%20baby%20slimes%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20i%3D2%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20s%20%3D%20new%20SlimeEnemy(this.pos%2C%20this.healthLevel-1%2C%20this.difficulty)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.damageTimer.Set()%3B%20%2F%2F%20prevent%20them%20taking%20damage%20right%20away%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.isInvisible%20%3D%20this.isInvisible%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s.velocity%20%3D%20this.velocity.Clone()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Kill()%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20JumpingEnemy%20extends%20Enemy%0A%7B%0A%20%20%20%20constructor(pos%2CisBig%3D0)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20super(pos%2C2%2C2%2CisBig%3F1%3A.5%2CisBig%3F.8%3A.4%2CisBig%3F12%3A4%2CisBig)%3B%20%0A%20%20%20%20%20%20%20%20this.landTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.jumpWaitTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.jumpWaitTimer.Set(RandBetween(1%2C3))%3B%0A%20%20%20%20%20%20%20%20this.zVelocity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.randOffset%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20this.bloodColor%20%3D%20new%20Color(1%2C.5%2C0%2C.1)%3B%0A%20%20%20%20%20%20%20%20this.speed%20%3D%20isBig%3F.012%3A.01%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20playerDistance%20%3D%20player.pos.Distance(this.pos)%3B%0A%20%20%20%20%20%20%20%20if%20(playerDistance%20%3E%2020)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.jumpWaitTimer.Elapsed()%20%26%26%20this.height%20%3C%3D%200)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20jump%0A%20%20%20%20%20%20%20%20%20%20%20%20this.zVelocity%20%3D%20RandBetween(.15%2C.2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.isBig)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.zVelocity%20*%3D%201.2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.jumpWaitTimer.Set(RandBetween(1.5%2C3))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.randOffset%20%3D%20RandVector(RandBetween(0%2C1))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.landTimer.UnSet()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20update%20jump%0A%20%20%20%20%20%20%20%20this.height%20%2B%3D%20this.zVelocity%3B%0A%20%20%20%20%20%20%20%20this.zVelocity%20-%3D%20.005%3B%0A%20%20%20%20%20%20%20%20if%20(this.height%20%3C%3D%200)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20is%20on%20ground%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.landTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20just%20landed%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.landTimer.Set(.3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.BloodSplat(.8%2C0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.height%20%3D%20this.zVelocity%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20is%20in%20the%20air%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20accel%20%3D%20new%20Vector2()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!player.IsDead()%20%26%26%20playerDistance%20%3C%2015)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20move%20towards%20player%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20accel.Copy(player.pos)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.Subtract(this.pos)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.ClampLength(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.Add(this.randOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20accel.Copy(this.randOffset)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Add(accel.Multiply(this.speed))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2FDebugPoint(player.pos.Clone().Add(this.randOffset))%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20draw%20tile%20when%20jumping%20or%20landed%0A%20%20%20%20%20%20%20%20this.tileX%20%3D%202%3B%0A%20%20%20%20%20%20%20%20if%20(this.jumpWaitTimer.Get()%20%3E%20-.25%20%7C%7C%20!this.landTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bthis.tileX%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20ShieldEnemy%20extends%20Enemy%0A%7B%0A%20%20%20%20constructor(pos%2C%20type%3D0%2C%20isBig%3D0)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20super(pos%2C4%2C2%2CisBig%3F1%3A.5%2CisBig%3F.8%3A.4%2Ctype%3F50%3AisBig%3F6%3A2%2CisBig)%3B%20%0A%20%20%20%20%20%20%20%20this.moveTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.dashTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.damping%3D.8%3B%0A%20%20%20%20%20%20%20%20this.bumped%3D0%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20this.moveBackwards%20%3D%200%3B%0A%20%20%20%20%20%20%20%20this.speed%20%3D%20isBig%3F.015%3A.012%3B%0A%20%20%20%20%20%20%20%20if%20(type)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20boss%20%3D%20this%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.speed%20%3D%20.018%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.bloodAdditive%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20this.bloodColor%20%3D%20new%20Color(.3%2C1%2C0%2C.5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.bossIntro%20%3D%20this.type%20%26%26%20!isStartLevel%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20ReflectDamage(direction)%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20if%20(this.damageTimer.Get()%20%3C%20.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20figure%20out%20if%20damge%20should%20be%20reflected%0A%20%20%20%20%20%20%20%20let%20d%20%3D%20new%20Vector2(1%2C0).Rotate(this.rotation*PI%2F2)%3B%0A%20%20%20%20%20%20%20%20let%20a%20%3D%20direction.Clone().Normalize().DotProduct(d)%3B%0A%20%20%20%20%20%20%20%20return%20this.type%3F%20(a%20%3E%20.4)%20%3A%20(a%20%3C%20-.4)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20CollideLevel(data%2C%20pos)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20small%20%3D%20!this.isBig%20%26%26%20!this.type%3B%0A%20%20%20%20%20%20%20%20if%20(data.IsSolid())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(small)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.dashTimer.Elapsed())%20%2F%2F%20change%20direction%20if%20not%20dashing%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20(this.rotation%2B2)%254%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20this.velocity.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20break%20level%20objects%0A%20%20%20%20%20%20%20%20return%20DestroyLevelObject(pos%2C%20!this.type)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Damage(damage)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20prevent%20player%20killing%20the%20boss%20after%20dying%0A%20%20%20%20%20%20%20%20if%20(this.type%20%26%26%20player.IsDead())%0A%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20super.Damage(damage)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20lifeTime%20%3D%20this.GetLifeTime()%3B%0A%20%20%20%20%20%20%20%20let%20isOnSand%20%3D%20!this.type%20%26%26%20this.IsOnSand()%3B%0A%20%20%20%20%20%20%20%20let%20playerDistance%20%3D%20player.pos.Distance(this.pos)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.type%20%26%26%20isStartLevel)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20title%20screen%20-%20run%20towards%20the%20level%20exit%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20this.pos.x%20-%20levelExit.pos.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20Math.abs(d)%20%3C%20.5%3F%201%3A%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.Distance(levelExit)%20%3C%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.bossIntro)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20boss%20intro%2C%20run%20left%20and%20up%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.pos.x%3E24)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.pos.x%20%3D%2024%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(playerDistance%20%3E%2020%20%26%26%20!this.type)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20update%20ai%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.moveTimer.Elapsed()%20%26%26%20this.dashTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.moveBackwards%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!player.IsDead()%20%26%26%20(playerDistance%20%3C%2015%20%7C%7C%20this.type))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20player%20direction%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20player.pos.Clone().Subtract(this.pos)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20r%20%3D%20d.Rotation()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(!(r%261))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20r%3D(r%2B2)%254%3B%20%2F%2F%20left%2Fright%20is%20backwards%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20r%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20boss%20can%20randomly%20move%20backwards%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.type)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.moveBackwards%20%3D%20Rand()%3C.5%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.moveBackwards)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20(this.rotation%2B2)%254%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20randomly%20decide%20to%20dash%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%3C.2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.dashTimer.Set(2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20RandInt(4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.moveTimer.Set(RandBetween(.8%2C2))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20move%20acceleration%0A%20%20%20%20%20%20%20%20let%20moveAccel%20%3D%20new%20Vector2(this.speed*(isOnSand%3F.5%3A1)%2C0).Rotate(this.rotation*PI%2F2)%3B%0A%20%20%20%20%20%20%20%20if%20(!this.dashTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply((this.dashTimer.Get()%20%3C%20-1)%3F0%3A2)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.type%20%26%26%20isStartLevel)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20title%20screen%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(playerDistance%20%3E%2010.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.type)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20boss%20fight%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(lifeTime%20%3E%2010%20%26%26%20this.health%20%3C%20this.healthMax%20%7C%7C%20lifeTime%20%3E%2020%20%26%26%20playerDistance%20%3C%2010%20)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bossIntro%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.bossIntro)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(playerDistance%20%3E%2014)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.pos.y%20%3C%2021)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20wait%20to%20get%20hit%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.walkFrame%20%2B%3D%20.021%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.bossIntro%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.size.x%3C2)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20grow%20giant%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.size.AddXY(.005%2C.005)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.collisionSize%20%3D%20this.size.x*.8%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.walkFrame%20%2B%3D%20.1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(frame%2510%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.rotation%20%3D%20(this.rotation%2B1)%254%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20moveAccel.Multiply(0)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.size.Set(2%2C2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20apply%20acceleration%0A%20%20%20%20%20%20%20%20this.velocity.Add(moveAccel.Multiply(this.moveBackwards%3F-1%3A1))%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20the%20tile%20and%20mirror%0A%20%20%20%20%20%20%20%20if%20(this.rotation%261)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20facing%20left%20or%20right%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%20(this.rotation%3D%3D1)%3F6%3A7%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20this.walkFrame%252%7C0%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20facing%20up%20or%20down%0A%20%20%20%20%20%20%20%20%20%20%20%20this.mirror%20%3D%20this.rotation%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%204%20%2B%20(this.walkFrame%252%7C0)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.type)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20if%20boss%2C%20offset%20the%20tile%20position%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileY%3D3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX-%3D2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.UpdateWalk()%3B%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Kill()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super.Kill()%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.type)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20boss%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isFinalLevel)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20player%20win%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20Pickup(this.pos%2C%202)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SpawnPickups(this.pos%2C1%2C40)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20winTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.kbap_warp%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.kbap_won%3D1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20speedRunTime%3DspeedRunTime%7C0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(speedRunMode%20%26%26%20(!speedRunBestTime%20%7C%7C%20speedRunTime%20%3C%20speedRunBestTime))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20track%20best%20speed%20run%20time%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20speedRunBestTime%20%3D%20speedRunTime%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20localStorage.kbap_bestTime%3DspeedRunBestTime%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20Store%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos)%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20super(pos%2C7%2C1%2C.5%2C.5)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20spawn%20random%20items%0A%20%20%20%20%20%20%20%20this.count%20%3D%20isStartLevel%7C%7CisFinalLevel%3F3%3A2%20%2B%20RandInt(2)%3B%0A%20%20%20%20%20%20%20%20let%20o%20%3D%201-this.count%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3Dthis.count%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20item%20%3D%20RandInt(4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(isStartLevel%20%7C%7C%20isFinalLevel)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%20%3D%20i%2B1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(i%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%20%3D%20RandIntBetween(0%2C1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(i%3D%3D1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20item%20%3D%20RandIntBetween(2%2C3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20new%20StoreItem(pos.Clone().AddXY(i*2%2Bo%2C0)%2Citem%2Cthis)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20this.pos.y-%3D2%3B%0A%20%20%20%20%20%20%20%20this.isStore%20%3D%201%3B%0A%20%20%20%20%20%20%20%20level.FillCircleType(pos%2C3%2C1)%3B%20%2F%2F%20clear%20area%0A%20%20%20%20%20%20%20%20level.FillCircleObject(pos%2C5%2C0)%3B%20%2F%2F%20clear%20area%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Kill()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20SpawnPickups(this.pos)%3B%0A%20%20%20%20%20%20%20%20super.Kill()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20carpet%20after%20being%20spawned%0A%20%20%20%20%20%20%20%20if%20(this.GetLifeTime()%3C.1)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3D%20this.pos.Clone().AddXY(0%2C2).Multiply(tileSize)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20w%20%3D%20this.count*16%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvasContext.fillStyle%3D'%23CCC'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvasContext.fillRect(p.x-w-2%2Cp.y-30-2%2Cw*2%2B4%2C40%2B4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvasContext.fillStyle%3D'%23329'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20levelCanvasContext.fillRect(p.x-w%2Cp.y-30%2Cw*2%2C40)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20this.mirror%20%3D%20player.pos.x%3Cthis.pos.x%3B%20%2F%2F%20allways%20face%20player%0A%20%20%20%20%20%20%20%20if%20(!buyTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20jump%20on%20buy%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20b%20%3D%20buyTimer.Get()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.height%20%3D%20-b*(.5-.5*Math.cos(6*PI*b))%2F2%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20enemy%20hits%0A%20%20%20%20%20%20%20%20gameObjects.forEach(o%3D%3E%7Bif%20(o.isEnemy%20%26%26%20o.IsTouching(this))this.Kill()%3B%7D)%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aclass%20StoreItem%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos%2Ctype%2Cowner)%20%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20%2F%2F%200%20%3D%20whole%20heart%0A%20%20%20%20%20%20%20%20%2F%2F%201%20%3D%20heart%20container%0A%20%20%20%20%20%20%20%20%2F%2F%202%20%3D%20boomerang%0A%20%20%20%20%20%20%20%20%2F%2F%203%20%3D%20big%20boomerang%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super(pos%2Ctype%2B3%2C5%2C.5%2C.2)%3B%20%0A%20%20%20%20%20%20%20%20this.owner%20%3D%20owner%3B%0A%20%20%20%20%20%20%20%20this.type%20%3D%20type%3B%0A%20%20%20%20%20%20%20%20this.cost%20%3D%205%3B%0A%20%20%20%20%20%20%20%20this.wasTouching%3D0%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20up%20tile%20and%20cost%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.cost%20%3D%2050%3B%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%202)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.cost%20%3D%2040%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%203)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.cost%20%3D%2090%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.tileX%20%3D%207%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20randomize%20cost%0A%20%20%20%20%20%20%20%20if%20(!isStartLevel)%0A%20%20%20%20%20%20%20%20%20%20%20%20this.cost%20*%3D%20RandBetween(.5%2C1.5)%3B%0A%20%20%20%20%20%20%20%20this.cost%20%3D%20Clamp(this.cost%2C%201%2C%2099)%3B%0A%20%20%20%20%20%20%20%20this.cost%20%7C%3D%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Update()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20let%20player%20pickup%0A%20%20%20%20%20%20%20%20if%20(!player.IsDead()%20%26%26%20player.IsTouching(this))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!this.wasTouching)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.Pickup()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.wasTouching%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20this.wasTouching%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.owner%20%26%26%20this.owner.IsDead())%0A%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Pickup()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(this.cost%3EplayerData.coins)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20player%20doesn't%20have%20enough%20money%0A%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(15)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20this.damageTimer.Set()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20give%20player%20the%20item%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3C%202)%0A%20%20%20%20%20%20%20%20%20%20%20%20(new%20Pickup(this.pos%2Cthis.type%2B1)).Pickup()%3B%0A%20%20%20%20%20%20%20%20else%20%0A%20%20%20%20%20%20%20%20%20%20%20%20(new%20Boomerang(this.pos%2Cthis.type%20%3D%3D%203)).Pickup()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20buyTimer.Set(1)%3B%0A%20%20%20%20%20%20%20%20playerData.coins-%3Dthis.cost%3B%0A%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20Render()%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(!shadowRenderPass%20%26%26%20!hitRenderPass)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20draw%20the%20price%0A%20%20%20%20%20%20%20%20%20%20%20%20SetCanvasTransform(this.pos.Clone().AddXY(0%2C-1)%2C%20this.size)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(this.cost%2C-6%2C0%2C14%2C'left'%2C.5%2Cthis.GetDamageTime()%3C.5%3F%22%23F00%22%3A%22%23000%22)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawScreenTile(-10%2C-1%2C4%2C5%2C5)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.restore()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Render()%3B%20%0A%20%20%20%20%7D%20%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%0Aclass%20LevelExit%20extends%20MyGameObject%0A%7B%0A%20%20%20%20constructor(pos%2Ctype%3D0)%20%0A%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20super(pos%2C0%2C0%2C0%2C.5)%3B%20%0A%20%20%20%20%20%20%20%20this.type%3Dtype%3B%20%0A%20%20%20%20%20%20%20%20this.radarSize%3D2%3B%0A%20%20%20%20%20%20%20%20this.closeTimer%20%3D%20new%20Timer()%3B%0A%20%20%20%20%20%20%20%20this.pos.y%2B%3D.01%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%0A%20%20%20%20Update()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20bob%20and%20spin%0A%20%20%20%20%20%20%20%20this.height%20%3D.1%2B.1*Math.sin(5*time)%3B%0A%20%20%20%20%20%20%20%20this.angleVelocity%20%3D.05%2F(this.size%2B.1)%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20let%20playerOffset%20%3D%20this.pos.Clone().Subtract(player.pos)%3B%0A%20%20%20%20%20%20%20%20let%20playerDistance%20%3D%20playerOffset.Length()%3B%0A%20%20%20%20%20%20%20%20let%20radius%20%3D%20this.size.x%3B%0A%20%20%20%20%20%20%20%20if%20(this.type%3D%3D1)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20incomming%20portal%20as%20player%20spawns%20in%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(levelFrame%3D%3D60)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(13)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20smaller%20and%20go%20away%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%20%3D%20Max(0%2C1%20-%20levelTimer.Get()%2F2)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(radius%20%3C%3D%200)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.Destroy()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.closeTimer.IsSet())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20get%20smaller%20if%20closing%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%20%3D%20-this.closeTimer.Get()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(this.GetLifeTime()%20%3C%201)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20open%20up%20when%20it%20first%20appears%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20t%20%3D%20this.GetLifeTime()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20radius%20%3D%20Min(t*2%2C1)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(!player.IsDead()%20%26%26%20playerDistance%20%3C%203%20%26%26%20player.dashTimer.Elapsed())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20player%20is%20close%20to%20portal%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(playerDistance%20%3C%20.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20player%20entered%20portal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(isStartLevel%20%26%26%20this.type%20%3D%3D%203)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20speed%20run%20portal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20speedRunMode%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20speedRunTime%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20playerData%20%3D%20new%20PlayerData()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%202)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20warp%20portal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nextLevel%20%3D%20warpLevel%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PlaySound(13)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20endLevelTimer.Set(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20this.closeTimer.Set(1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20pull%20player%20into%20portal%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20player.velocity.Add(playerOffset.Normalize(.005%2FplayerDistance))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20radius%20%3D%20Max(0%2Cradius)%3B%0A%20%20%20%20%20%20%20%20this.size.Set(radius%2Cradius)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20super.Update()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%20%20%20%0A%20%20%20%20Render()%20%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20SetCanvasTransform(this.pos%2Cthis.size%2Cthis.angle%2Cthis.height)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20wrap%20portal%20effect%0A%20%20%20%20%20%20%20%20mainCanvasContext.lineWidth%3D1%3B%0A%20%20%20%20%20%20%20%20let%20color%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3D19%3Bi--%3BmainCanvasContext.stroke())%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.beginPath()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20color%3D%60hsla(%24%7Bi*9%2Btime*99%7D%2C99%25%2C%24%7BshadowRenderPass%3F0%3A50%7D%25%2C%24%7BshadowRenderPass%3F.5%3A1%7D)%60%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.strokeStyle%3Dcolor%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for(let%20j%3D8%3Bj--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20a%3Dtime-j*PI%2F3%2B5*Math.sin(i%2F2%2Btime*2)%2F19%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20mainCanvasContext.arc(0%2C0%2Ci*this.size.x%2Ca%2Ca)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(this.type%20%3E%201%20%26%26%20!shadowRenderPass%20%20%26%26%20!this.closeTimer.IsSet())%0A%20%20%20%20%20%20%20%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20render%20warp%20or%20speed%20run%20text%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20text%20%3D%20(this.type%20%3D%3D%202)%3F%20'Warp%20'%2BwarpLevel%20%3A%20'Speed%20Run'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20DrawText(text%2C0%2C-24%2C14%2C'center'%2C1%2Ccolor%2C'%23000')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(this.type%20%3D%3D%203%20%26%26%20speedRunBestTime)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20DrawText('Best%20'%2BFormatTime(speedRunBestTime)%2C0%2C-36%2C12%2C'center'%2C1%2Ccolor%2C'%23000')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20mainCanvasContext.restore()%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20level%20builder%0A%20%20%20%20%0Afunction%20GenerateMaze(cellCount)%0A%7B%0A%20%20%20%20%2F%2F%202d%20maze%0A%20%20%20%20let%20size%20%3D%20levelMazeSize%3B%0A%20%20%20%20let%20cells%20%3D%20%5B%5D%3B%0A%20%20%20%20cells.length%20%3D%20size*size%3B%0A%20%20%20%20cells.fill(0)%3B%0A%20%20%20%20let%20GetCell%3D(x%2Cy)%3D%3Ecells%5Bx%2By*size%5D%3B%0A%20%20%20%20let%20SetCell%3D(x%2Cy%2Cv%3D1)%3D%3Ecells%5Bx%2By*size%5D%3Dv%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20set%20start%20pos%20(it%20may%20change%20when%20generating%20the%20level)%0A%20%20%20%20let%20xStart%3DRandInt(levelMazeSize)%3B%0A%20%20%20%20let%20yStart%3DRandInt(levelMazeSize)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20hub%20level%0A%20%20%20%20%20%20%20%20xStart%3DyStart%3D0%3B%0A%20%20%20%20%20%20%20%20SetCell(0%2C0)%3B%0A%20%20%20%20%20%20%20%20SetCell(1%2C0)%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(isFinalLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20boss%20level%0A%20%20%20%20%20%20%20%20xStart%3D0%3B%0A%20%20%20%20%20%20%20%20yStart%3D3%3B%0A%20%20%20%20%20%20%20%20SetCell(0%2C3)%3B%0A%20%20%20%20%20%20%20%20SetCell(1%2C3)%3B%0A%20%20%20%20%20%20%20%20SetCell(2%2C3)%3B%0A%20%20%20%20%20%20%20%20SetCell(1%2C2)%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3D4%3Bi--%3B)%0A%20%20%20%20%20%20%20%20for(let%20j%3D2%3Bj--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20SetCell(i%2Cj)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20playerStartPos%20%3D%20new%20Vector2(xStart%2C%20yStart)%3B%0A%20%20%20%20if%20(isStartLevel%20%7C%7C%20isFinalLevel)%0A%20%20%20%20%20%20%20%20return%20cells%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20depth%20first%20search%20style%20maze%20generation%0A%20%20%20%20%2F%2F%20https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMaze_generation_algorithm%23Depth-first_search%0A%20%20%20%20let%20IsOpen%3D(x%2Cy)%3D%3E(IsArrayValid(x%2Cy%2Csize)%3F%20cells%5Bx%2By*size%5D%20%3A%200)%3B%0A%20%20%20%20let%20OpenNeighborCount%3D(xo%2Cyo)%3D%3E%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20let%20n%20%3D%200%3B%0A%20%20%20%20%20%20%20%20n%20%2B%3D%20IsOpen(xo%2B1%2Cyo)%3B%0A%20%20%20%20%20%20%20%20n%20%2B%3D%20IsOpen(xo-1%2Cyo)%3B%0A%20%20%20%20%20%20%20%20n%20%2B%3D%20IsOpen(xo%2Cyo%2B1)%3B%0A%20%20%20%20%20%20%20%20n%20%2B%3D%20IsOpen(xo%2Cyo-1)%3B%0A%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20let%20CheckMove%3D(xo%2Cyo%2Cxd%2Cyd)%3D%3E%0A%20%20%20%20!(%0A%20%20%20%20%20%20%20%20!IsArrayValid(xo%2Bxd%2Cyo%2Byd%2Csize)%20%7C%7C%20%2F%2F%20must%20be%20valid%20cell%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd%2Cyo%2Byd)%20%7C%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20must%20be%20solid%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20surrounding%20cells%20in%20that%20direction%20must%20be%20solid%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd*2%2Cyo%2Byd*2)%20%7C%7C%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd*2%2Byd%2Cyo%2Byd*2%2Bxd)%20%7C%7C%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd*2-yd%2Cyo%2Byd*2-xd)%20%7C%7C%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd%2Byd%2Cyo%2Byd%2Bxd)%20%7C%7C%0A%20%20%20%20%20%20%20%20IsOpen(xo%2Bxd-yd%2Cyo%2Byd-xd)%0A%20%20%20%20)%3B%0A%20%20%20%20%0A%20%20%20%20let%20x%3DxStart%3B%0A%20%20%20%20let%20y%3DyStart%3B%0A%20%20%20%20SetCell(x%2Cy)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20generate%20a%20maze%0A%20%20%20%20let%20stack%20%3D%20%5B%5D%3B%0A%20%20%20%20let%20endCount%20%3D%200%3B%0A%20%20%20%20for(let%20i%3D0%3B%20i%3CcellCount*1.5%3B%20%2B%2Bi)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20check%20which%20neighbors%20are%20valid%20moves%0A%20%20%20%20%20%20%20%20let%20neighbors%20%3D%200%3B%0A%20%20%20%20%20%20%20%20if%20(CheckMove(x%2Cy%2C-1%2C0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bneighbors%3B%0A%20%20%20%20%20%20%20%20if%20(CheckMove(x%2Cy%2C1%2C0))%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bneighbors%3B%0A%20%20%20%20%20%20%20%20if%20(CheckMove(x%2Cy%2C0%2C-1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bneighbors%3B%0A%20%20%20%20%20%20%20%20if%20(CheckMove(x%2Cy%2C0%2C1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%2B%2Bneighbors%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(neighbors%20%26%26%20i!%3DcellCount%20%26%26%20(i%3CcellCount%20%7C%7C%20Rand()%20%3C%20.5))%0A%20%20%20%20%20%20%20%20%7B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20pick%20a%20random%20neighbor%20to%20open%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20xd%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20yd%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20r%3DRandInt(neighbors)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(CheckMove(x%2Cy%2C-1%2C0)%20%26%26%20!r--)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xd%3D-1%2Cyd%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(CheckMove(x%2Cy%2C1%2C0)%20%26%26%20!r--)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xd%3D1%2Cyd%3D0%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(CheckMove(x%2Cy%2C0%2C-1)%20%26%26%20!r--)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xd%3D0%2Cyd%3D-1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20xd%3D0%2Cyd%3D1%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20stack.push(%7Bx%3Ax%2Cy%3Ay%7D)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20SetCell(x%2B%3Dxd%2Cy%2B%3Dyd)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20if%20(stack.length)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20track%20dead%20ends%20(to%20put%20stores%20and%20powerups%20there)%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(OpenNeighborCount(x%2Cy)%3C%3D1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20SetCell(x%2Cy%2C2%2BendCount%2B%2B)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(Rand()%20%3C%20.5)%20%2F%2F%20change%20up%20start%20pos%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20playerStartPos.Set(x%2Cy)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20pop%20cell%20from%20stack%20and%20make%20current%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20c%20%3D%20stack.pop()%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%3D%20c.x%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20y%20%3D%20c.y%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20cells%3B%0A%7D%0A%0Afunction%20GenerateLevel()%0A%7B%0A%20%20%20%20%2F%2F%20randomize%20background%20color%0A%20%20%20%20levelColor%3Dnew%20Color(Rand(.1)%2CRand(.1)%2CRand(.1))%3B%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%20%20%20%20levelColor%3Dnew%20Color(.1%2C0%2C.2)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20loop%20incase%20level%20generation%20fails%0A%20%20%20%20while(!GenerateLevelInternal())%7B%7D%0A%7D%0A%0Afunction%20GenerateLevelInternal()%0A%7B%0A%20%20%20%20level%20%3D%20new%20Level()%3B%0A%20%20%20%20ClearGameObjects()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20generate%20maze%20and%20draw%20to%20level%20data%0A%20%20%20%20levelMaze%20%3D%20GenerateMaze(levelNumber)%3B%0A%20%20%20%20for(let%20x%3DlevelMazeSize%3Bx--%3B)%0A%20%20%20%20for(let%20y%3DlevelMazeSize%3By--%3B)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20if%20(!levelMaze%5Bx%2By*levelMazeSize%5D)%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20for%20each%20open%20maze%20cell%2C%20fill%20out%20a%20circle%20of%20open%20space%0A%20%20%20%20%20%20%20%20let%20pos%20%3D%20(new%20Vector2(x%2B.5%2Cy%2B.5)).Multiply(levelSize%2FlevelMazeSize)%3B%0A%20%20%20%20%20%20%20%20let%20radius%20%3D%20isFinalLevel%3F12%3A9%3B%0A%20%20%20%20%20%20%20%20level.FillCircleType(pos%2Cradius%2C1)%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3DRandInt(4)%3Bi--%3B)%20%2F%2F%20add%20extra%20randomness%0A%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleType(pos.Clone().Add(RandVector(Rand(8)))%2CRandBetween(2%2C6)%2C1%2BRandInt(2))%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20convert%20player%20pos%20to%20world%20pos%0A%20%20%20%20playerStartPos.Add(.5).Multiply(levelSize%2FlevelMazeSize)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(isFinalLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20place%20a%20ton%20of%20objects%20everywhere%0A%20%20%20%20%20%20%20%20let%20r%20%3D%20levelSize%2FlevelMazeSize%3B%0A%20%20%20%20%20%20%20%20for(let%20i%3D30%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleObject(new%20Vector2(RandIntBetween(0%2C64)%2CRandIntBetween(0%2C50))%2CRandIntBetween(4%2C14)%2C1%2BRandInt(2))%3B%20%20%0A%20%20%20%20%20%20%20%20level.FillCircleObject(playerStartPos%2C12%2C0)%3B%20%20%0A%20%20%20%20%20%20%20%20level.FillCircleType(playerStartPos.Clone().AddXY(16%2C-20)%2C12%2C1)%3B%0A%20%20%20%20%20%20%20%20level.FillCircleType(playerStartPos.Clone().AddXY(16%2C-14)%2C12%2C1)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20draw%20a%20heart%0A%20%20%20%20%20%20%20%20let%20centerPos%20%3D%20new%20Vector2(24%2C18)%3B%0A%20%20%20%20%20%20%20%20level.FillCircleType(centerPos%2C9%2C2)%3B%0A%20%20%20%20%20%20%20%20level.FillCircleObject(centerPos%2C10%2C0)%3B%0A%20%20%20%20%20%20%20%20levelCanvasContext.fillStyle%3D'%23F00'%0A%20%20%20%20%20%20%20%20levelCanvasContext.fillRect(0%2C0%2CmainCanvasSize.x%2CmainCanvasSize.y)%0A%20%20%20%20%20%20%20%20levelCanvasContext.drawImage(tileImage%2C0%2C0)%3B%0A%20%20%20%20%20%20%20%20for(let%20x%3D16%3Bx--%3B)%0A%20%20%20%20%20%20%20%20for(let%20y%3D16%3By--%3B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20levelCanvasContext.getImageData(x%2B64%2C%20y%2B80%2C%201%2C%201).data%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20level.GetDataFromPos(centerPos.Clone().AddXY(x-8%2Cy-7)).object%3Dd%5B1%5D%3F2%3Ad%5B0%5D%3F0%3A1%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(isStartLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20set%20up%20start%20level%20area%0A%20%20%20%20%20%20%20%20level.FillCircleType(playerStartPos%2C8%2C1)%3B%20%2F%2F%20start%20on%20grass%0A%20%20%20%20%20%20%20%20level.FillCircleType(playerStartPos.Clone().AddXY(16%2C0)%2C7%2C1)%3B%0A%20%20%20%20%20%20%20%20level.FillCircleObject(playerStartPos.Clone().AddXY(8%2C-2)%2C3%2C1)%3B%20%0A%20%20%20%20%20%20%20%20level.FillCircleObject(playerStartPos.Clone().AddXY(8%2C2)%2C3%2C1)%3B%20%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20place%20random%20objects%0A%20%20%20%20%20%20%20%20for(let%20i%3DlevelMazeSize*levelMazeSize*4%3Bi--%3B)%0A%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleObject(new%20Vector2(RandIntBetween(0%2C64)%2CRandIntBetween(0%2C64))%2CRandIntBetween(1%2C10)%2CRandInt(3))%3B%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20clear%20player%20start%0A%20%20%20%20%20%20%20%20level.FillCircleObject(playerStartPos%2CRandBetween(2%2C5)%2C0)%3B%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20spawn%20enemies%20with%20a%20controled%20amount%20of%20total%20power%0A%20%20%20%20%20%20%20%20let%20totalEnemyPower%20%3D%20levelNumber*5%3B%0A%20%20%20%20%20%20%20%20let%20tries%20%3D%200%3B%0A%20%20%20%20%20%20%20%20while(totalEnemyPower%3E0)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(%2B%2Btries%3E1e4)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%200%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20pick%20random%20pos%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20pos%20%3D%20new%20Vector2(RandBetween(0%2ClevelSize)%2CRandBetween(0%2ClevelSize))%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20must%20be%20open%20maze%20cell%20except%20level%201%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20m%20%3D%20levelMaze%5BMazeDataPos(pos)%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!m%20%7C%7C%20(m%3D%3D2%20%26%26%20levelNumber%3E1))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%20%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20must%20not%20be%20near%20player%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(pos.Distance(playerStartPos)%20%3C%2015)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20must%20be%20clear%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(tries%20%3E%20500)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleObject(pos%2C2%2C0)%3B%20%2F%2F%20clear%20area%20if%20necessary%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(!level.IsAreaClear(pos%2C2))%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20spawn%20enemy%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20enemyPower%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20e%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%20%3C%20.33%20%7C%7C%20levelNumber%3C%3D1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20slime%20enemy%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20healthLevel%20%3D%20RandIntBetween(1%2C3)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%20%3C%20.1%20%26%26%20levelNumber%20%3E%205)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20healthLevel%20%3D%204%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20difficulty%20%3D%20levelNumber%3C5%7C%7CRand()%3C.5%3F1%3A2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20new%20SlimeEnemy(pos%2ChealthLevel%2Cdifficulty)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enemyPower%20%3D%20difficulty*healthLevel%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20if%20(levelNumber%20!%3D%203%20%26%26%20(Rand()%20%3C%20.5%20%7C%7C%20levelNumber%3C%3D2))%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20jumping%20enemy%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20isBig%20%3D%20Rand()%20%3C%20.1%20%26%26%20levelNumber%20%3E%203%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20new%20JumpingEnemy(pos%2CisBig)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enemyPower%20%3D%20isBig%3F6%3A2%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%2F%2F%20shield%20enemy%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20isBig%20%3D%20Rand()%20%3C%20.1%20%26%26%20levelNumber%20%3E%204%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%20%3D%20new%20ShieldEnemy(pos%2C0%2CisBig)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enemyPower%20%3D%20isBig%3F9%3A3%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(levelNumber%20%3E%204%20%26%26%20Rand()%3C.1)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20random%20invisible%20enemy%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e.isInvisible%20%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20enemyPower%20*%3D%202%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20totalEnemyPower%20-%3D%20enemyPower%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20spawn%20stores%20and%20other%20special%20objects%0A%20%20%20%20if%20(isStartLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20title%20screen%0A%20%20%20%20%20%20%20%20new%20Store(new%20Vector2(24%2C3.5))%3B%0A%20%20%20%20%20%20%20%20new%20ShieldEnemy(playerStartPos.Clone()%2C%201)%3B%0A%20%20%20%20%20%20%20%20new%20Pickup(playerStartPos.Clone().Add(new%20Vector2(16%2C0))%2C%202)%3B%0A%20%20%20%20%20%20%20%20levelExit%20%3D%20new%20LevelExit(new%20Vector2(24%2C13))%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20(warpLevel%3E1)%0A%20%20%20%20%20%20%20%20%20%20%20%20new%20LevelExit(new%20Vector2(29.5%2C8)%2C2)%3B%20%2F%2F%20warp%0A%20%20%20%20%20%20%20%20if%20(localStorage.kbap_won)%0A%20%20%20%20%20%20%20%20%20%20%20%20new%20LevelExit(new%20Vector2(29.5%2C13)%2C3)%3B%20%2F%2F%20speed%20run%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(isFinalLevel)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20boss%20level%0A%20%20%20%20%20%20%20%20new%20Store(new%20Vector2(43%2C47))%3B%0A%20%20%20%20%20%20%20%20new%20ShieldEnemy(playerStartPos.Clone().Add(new%20Vector2(.5%2C0))%2C%201)%3B%0A%20%20%20%20%20%20%20%20new%20Pickup(new%20Vector2(24%2C19.5)%2C%202)%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20spawn%20stores%20and%20special%20powerups%0A%20%20%20%20%20%20%20%20for(let%20x%3DlevelMazeSize%3Bx--%3B)%0A%20%20%20%20%20%20%20%20for(let%20y%3DlevelMazeSize%3By--%3B)%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20let%20m%20%3D%20levelMaze%5Bx%2By*levelMazeSize%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(m%3D%3D2%20%26%26%20levelNumber%20%3E%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20p%20%3D%20new%20Vector2(x%2B.5%2Cy%2B.5).Multiply(levelSize%2FlevelMazeSize)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20let%20d%20%3D%20p.Distance(playerStartPos)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(d%3E30%26%26Rand()%3C.3)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20random%20powerup%20spawn%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20(Rand()%3E.5)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20Pickup(p%2C%202)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20Boomerang(p)%3B%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleType(p%2CRandIntBetween(2%2C4)%2C1)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20level.FillCircleObject(p%2CRandIntBetween(3%2C5)%2C0)%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20new%20Store(p)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20new%20LevelExit(playerStartPos%2C1)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20draw%20the%20level%0A%20%20%20%20level.ClearBorder()%3B%0A%20%20%20%20level.ApplyTiling()%3B%0A%20%20%20%20level.Redraw()%3B%0A%20%20%20%20%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20level%20transition%20system%0A%0Alet%20transitionTimer%20%3D%20new%20Timer()%3B%0Alet%20transitionCanvas%20%3D%20c2%3B%0Alet%20transitionCanvasContext%20%3D%20transitionCanvas.getContext('2d')%3B%0Afunction%20StartTransiton()%0A%7B%0A%20%20%20%20%2F%2F%20copy%20main%20canvas%20to%20transition%20canvas%0A%20%20%20%20transitionTimer.Set()%3B%0A%20%20%20%20transitionCanvas.width%20%3D%20mainCanvasSize.x%3B%0A%20%20%20%20transitionCanvas.height%20%3D%20mainCanvasSize.y%3B%0A%20%20%20%20transitionCanvasContext.drawImage(mainCanvas%2C0%2C0)%3B%0A%7D%0A%0Afunction%20UpdateTransiton()%0A%7B%0A%20%20%20%20let%20transitionTime%20%3D%20transitionTimer.Get()%3B%0A%20%20%20%20if%20(transitionTime%20%3E%202)%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20render%20stored%20main%20canvas%20with%20circle%20transition%20effect%0A%20%20%20%20mainCanvasContext.save()%3B%0A%20%20%20%20mainCanvasContext.beginPath()%3B%0A%20%20%20%20let%20r%20%3D%20transitionTime*mainCanvasSize.x%2F2%3B%0A%20%20%20%20mainCanvasContext.rect(0%2C0%2CmainCanvasSize.x%2CmainCanvasSize.y)%3B%0A%20%20%20%20mainCanvasContext.arc(mainCanvasSize.x%2F2%2CmainCanvasSize.y%2F2%2Cr%2C0%2C7)%3B%0A%20%20%20%20mainCanvasContext.clip('evenodd')%3B%0A%20%20%20%20mainCanvasContext.drawImage(transitionCanvas%2C0%2C0)%3B%0A%20%20%20%20mainCanvasContext.restore()%3B%0A%7D%0A%0A%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%0A%2F%2F%20ZzFXmicro%20-%20Zuper%20Zmall%20Zound%20Zynth%20-%20MIT%20License%20-%20Copyright%202019%20Frank%20Force%0Alet%20zzfx_v%3D.2%3B%0Alet%20zzfx_x%3D0%3B%0Alet%20zzfx%3D(e%2Cf%2Ca%2Cb%3D1%2Cd%3D.1%2Cg%3D0%2Ch%3D0%2Ck%3D0%2Cl%3D0)%3D%3E%7Bif(!zzfx_x)return%3Blet%20S%3D44100%3Ba*%3D2*PI%2FS%3Ba*%3D1%2BRandBetween(-f%2Cf)%3Bg*%3D1E3*PI%2F(S**2)%3Bb%3DS*b%7C0%3Bd%3Dd*b%7C0%3Bk*%3D2*PI%2FS%3Bl*%3DPI%3Bf%3D%5B%5D%3Bfor(let%20m%3D0%2Cn%3D0%2Cc%3D0%3Bc%3Cb%3B%2B%2Bc)f%5Bc%5D%3De*zzfx_v*Math.cos(m*a*Math.cos(n*k%2Bl))*(c%3Cd%3Fc%2Fd%3A1-(c-d)%2F(b-d))%2Cm%2B%3D1%2BRandBetween(-h%2Ch)%2Cn%2B%3D1%2BRandBetween(-h%2Ch)%2Ca%2B%3Dg%3Be%3Dzzfx_x.createBuffer(1%2Cb%2CS)%3Ba%3Dzzfx_x.createBufferSource()%3Be.getChannelData(0).set(f)%3Ba.buffer%3De%3Ba.connect(zzfx_x.destination)%3Ba.start()%3Breturn%20a%7D%0A%0Alet%20beatTimer%20%3D%20new%20Timer()%3B%0Alet%20beatCount%20%3D%200%3B%0Alet%20lastNote%3B%0Afunction%20UpdateAudio()%0A%7B%0A%20%20%20%20if%20(!zzfx_x%20%26%26%20MouseWasPressed()%20%26%26%20soundEnable)%0A%20%20%20%20%20%20%20%20zzfx_x%20%3D%20new%20AudioContext%3B%0A%0A%20%20%20%20if%20(coinSoundTimer.IsSet()%20%26%26%20coinSoundTimer.Elapsed())%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20coin%20sound%20plays%20twice%20quickly%20with%20higher%20pitch%20the%20second%20time%0A%20%20%20%20%20%20%20%20PlaySound(10%2C%20800)%0A%20%20%20%20%20%20%20%20coinSoundTimer.UnSet()%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20if%20(!(isStartLevel%20%7C%7C%20winTimer.IsSet()))%0A%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%2F%2F%20update%20music%0A%20%20%20%20let%20scale%20%3D%20%5B-5%2C0%2C2%2C4%2C7%2C12%2C-5%2C-8%5D%3B%20%2F%2F%20major%20pentatonic%20scale%0A%20%20%20%20if%20(beatTimer.Elapsed())%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%2B%2BbeatCount%3B%0A%20%20%20%20%20%20%20%20beatTimer.Set(.5)%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20melody%0A%20%20%20%20%20%20%20%20if%20(beatCount%3E15%20%26%26%20(!(beatCount%261)%20%7C%7C%20RandInt(2)))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(beatCount%258%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastNote%20%3D%201%3B%20%2F%2F%20return%20to%20root%20note%20every%208%20beats%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20play%20the%20note%0A%20%20%20%20%20%20%20%20%20%20%20%20zzfx(.4%2C0%2C220*2**(scale%5BlastNote%5D%2F12)%2C%20(RandInt(2)%2B1)%2F2%2C%20.05%2C%200%2C%20.4)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20random%20walk%20to%20another%20note%20in%20the%20scale%0A%20%20%20%20%20%20%20%20%20%20%20%20lastNote%20%3D%20(lastNote%20%2B%20(RandInt(6)-2)%2Bscale.length)%25scale.length%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20precussion%0A%20%20%20%20%20%20%20%20if%20(beatCount%252%3D%3D0%7C%7CbeatCount%2618%7C%7C!RandInt(20))%0A%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(beatCount%254%3D%3D0)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zzfx(.3%2C.2%2C1e3%2C.08%2C.05%2C.8%2C21%2C51)%3B%20%2F%2F%20ZzFX%20%20highhat%0A%20%20%20%20%20%20%20%20%20%20%20%20else%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zzfx(.8%2C.2%2C150%2C.04%2C.002%2C.1%2C1%2C.5%2C.15)%3B%20%2F%2F%20ZzFX%2017553%20kick%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A%0Afunction%20PlaySound(sound%2C%20p%3D0)%0A%7B%0A%20%20%20%20switch(sound)%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20case%201%3A%20%2F%2F%20player%20hit%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C4504%2C.3%2C.1%2C-30%2C.5%2C.5%2C.33)%3B%20%2F%2F%20ZzFX%2036695%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%202%3A%20%2F%2F%20player%20die%0A%20%20%20%20%20%20%20%20zzfx(.7%2C0%2C500%2C4%2C.01%2C-0.2%2C3%2C3%2C0)%3B%20%2F%2F%20ZzFX%2023250%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%203%3A%20%2F%2F%20get%20heart%0A%20%20%20%20%20%20%20%20zzfx(1%2C0%2C1504%2C.3%2C.17%2C1.7%2C.5%2C.4%2C.33)%3B%20%2F%2F%20ZzFX%2036695%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%204%3A%20%2F%2F%20get%20heart%20container%0A%20%20%20%20%20%20%20%20zzfx(1%2C0%2C805%2C1.1%2C.71%2C.5%2C1.5%2C.5)%3B%20%20%2F%2F%20ZzFX%2016886%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%205%3A%20%2F%2F%20boomerang%20cut%0A%20%20%20%20%20%20%20%20zzfx(.3%2C.2%2C370%2C.2%2C.1%2C3.9%2C13%2C27%2C.12)%3B%20%2F%2F%20ZzFX%2023473%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%206%3A%20%2F%2F%20boomerang%20catch%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C0%2C.2%2C.23%2C2%2C.4%2C.6%2C.9)%3B%20%2F%2F%20ZzFX%2020183%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%207%3A%20%2F%2F%20boomerang%20throw%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C53%2C.2%2C.26%2C0%2C.1%2C7.5%2C.58)%3B%20%2F%2F%20ZzFX%2024904%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%208%3A%20%2F%2F%20enemy%20hit%0A%20%20%20%20%20%20%20%20zzfx(1%2C.2%2C370%2C.1%2C.23%2C4.5%2C2.8%2C27.4%2C.12)%3B%20%2F%2F%20ZzFX%2023473%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%209%3A%20%2F%2F%20enemy%20kill%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C1138%2C.2%2C.02%2C0%2C4%2C1.2%2C.1)%3B%20%2F%2F%20ZzFX%2010015%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2010%3A%20%2F%2F%20coin%0A%20%20%20%20%20%20%20%20if%20(!coinSoundTimer.IsSet())%0A%20%20%20%20%20%20%20%20%20%20%20%20coinSoundTimer.Set(.05)%3B%20%2F%2F%20trigger%20coin%20sound%20to%20play%20again%0A%20%20%20%20%20%20%20%20zzfx(1%2C.01%2C800%2Bp%2C.2%2C.05)%3B%20%2F%2F%20ZzFX%2098600%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20case%2011%3A%20%2F%2F%20low%20health%0A%20%20%20%20%20%20%20%20zzfx(.4%2C.1%2C418%2C.1%2C.79%2C5%2C0%2C1.9%2C.74)%3B%20%2F%2F%20ZzFX%207364%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2012%3A%20%2F%2F%20dash%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C319%2C.4%2C.08%2C6.6%2C3.2%2C2.6%2C.59)%3B%20%2F%2F%20ZzFX%2079527%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2013%3A%20%2F%2F%20teleport%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C7%2C1%2C.97%2C0%2C.6%2C21.7%2C.5)%3B%20%2F%2F%20ZzFX%2060532%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2014%3A%20%2F%2F%20boomerang%20hit%20solid%0A%20%20%20%20%20%20%20%20zzfx(.8%2C.1%2C70%2C.1%2C.23%2C4.5%2C2.8%2C27%2C.12)%3B%20%2F%2F%20ZzFX%2023473%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2015%3A%20%2F%2F%20boomerang%20reflect%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C800%2C.2%2C.02%2C-0.3)%3B%20%2F%2F%20ZzFX%2014772%0A%20%20%20%20%20%20%20%20break%3B%0A%0A%20%20%20%20%20%20%20%20case%2016%3A%20%2F%2F%20dodge%20recharge%0A%20%20%20%20%20%20%20%20zzfx(1%2C.1%2C0%2C.1%2C.1%2C1%2C.1%2C100)%3B%20%2F%2F%20ZzFX%2088949%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20load%20texture%20and%20kick%20off%20init!%0Alet%20tileImage%20%3D%20new%20Image()%3B%0AtileImage.onload%3D_%3D%3EInit()%3B%0AtileImage.src%20%3D%20'https%3A%2F%2Fgitlab.com%2F27jhouse%2Foasis%2F-%2Fraw%2Fmain%2Ftiles.png'%3B%7D)()%3B%7D)()%3B"
        >BounceBack.SPG</a
      >
      <br />
      <a
        href="javascript:(function()%7Bdocument.body.innerHTML%20%3D%20%60%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3Cmeta%20charset%3D%22utf-8%22%3E%3Cstyle%3Ebody%7Bmargin%3A0%3Bbackground%3A%23222%7D.overlay%2Cbody%7Bdisplay%3Aflex%3Bwidth%3A100vw%3Bheight%3A100vh%3Boverflow%3Ahidden%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bcolor%3A%23eee%3Bbackground%3A%23222%3Bfont-family%3Asans-serif%7D.overlay%7Bposition%3Afixed%3Bdisplay%3Anone%7Dbody.loading%20.overlay%7Bdisplay%3Aflex%7Dcanvas%7Bwidth%3A100%25%3Bheight%3A100%25%3Bobject-fit%3Acontain%7D%3C%2Fstyle%3E%3C%2Fhead%3E%3Cbody%20class%3D%22loading%22%3E%3Ccanvas%20width%3D%221920%22%20height%3D%221080%22%3E%3C%2Fcanvas%3E%3Cdiv%20class%3D%22overlay%22%3EGenerating%20assets...%3C%2Fdiv%3E%3C%2Fbody%3E%3C%2Fhtml%3E%60%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20window.MARKUP_TARGET_HOST%3D%22js13kgames.com%22%3B%0A%20%20%20%20%20%20%20%20window.MARKUP_TARGET_PROTOCOL%3D%22https%3A%22%3B%0A%20%20%20%20%20%20%20%20window.markupWindowParent%3Dwindow.parent%3B%0A%20%20%20%20%20%20%20%20window.markupTop%3Dwindow.top%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%0A'use%20strict'%3Blet%20g%3D1%2F60%2Ch%2Ck%2Cl%2Cm%3Bvar%20n%3Dnull%2Caa%3Dnull%2Cba%3Dnull%2Cq%3Dnull%3Blet%20ca%3D0%3Bfunction%20da(a)%7Ba%3D(240%2B70*a)%25360%3Bn%3D%60hsl(%24%7Ba%7D%2C%20%24%7B0%7D%25%2C%20%24%7B93%7D%25)%60%3Ba%2B%3D20%3Baa%3D%60hsl(%24%7Ba%7D%2C%20%24%7B1%7D%25%2C%20%24%7B70%7D%25)%60%3Ba%2B%3D20%3Bba%3D%60hsl(%24%7Ba%7D%2C%20%24%7B5%7D%25%2C%20%24%7B49%7D%25)%60%3Bq%3D%60hsl(%24%7Ba%2B20%7D%2C%20%24%7B21%7D%25%2C%20%24%7B17%7D%25)%60%7Dvar%20t%3D%7B%7D%2Cu%3D%7B%7D%3Bfunction%20fa()%7B%5B1%2C4%2C2%2C8%2C16%2C32%5D.forEach((a)%3D%3E%7Bu%5Ba%5D%3Dt%5Ba%5D%7D)%7Dlet%20ha%3D%7B37%3A1%2C39%3A4%2C38%3A2%2C40%3A8%2C16%3A16%2C90%3A32%2C32%3A32%7D%3Bdocument.addEventListener(%22keydown%22%2C(%7BkeyCode%3Aa%7D)%3D%3E%7Bif(a%3Dha%5Ba%5D)u%5Ba%5D%3Dt%5Ba%5D%2Ct%5Ba%5D%3D!0%7D%2C!1)%3B%0Adocument.addEventListener(%22keyup%22%2C(%7BkeyCode%3Aa%7D)%3D%3E%7Bif(a%3Dha%5Ba%5D)u%5Ba%5D%3Dt%5Ba%5D%2Ct%5Ba%5D%3D!1%7D%2C!1)%3B%0Avar%20ia%3D%7Bma%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhLAAcAKIAAOA1%2F2wx8juz%2FznnWv%2BzO%2F%2F%2F%2F9PT0%2F%2F%2F%2FyH5BAEAAAcALAAAAAAsABwAAAP%2FeLrQ%2B3DIQQh8pdzb3J5TNWxHlpFMB1wgJY6XeW5doEbgK22yZj4qWyOwaFFAi55SlqoBbMVcS7GsEJTObIDYIkypPWulFxQ%2Bt1zj7mEIi68n1fB5Tk9QB4PeJCbL6WhEeCQyYz0HQzaKaCx3KEuHiHOBjV8xkAV6EJQfajxMepqDnZ4QbRkGo6NSSKaieAKxg6xrqhCxsnhdXjBgPyi4ubo5Ir6%2FJMEBuKshFoiRG8qx0sK2Ch2YBSsHAsrU1ShfDdnaW9PJy5XifmSBuObpD7QYfnJo3fjBAjgSvLUlWOzd%2BxbvQLNWVLBlAKDthjtv0nDo6HXtT8MOCx4WNOgCDyEQB3%2B2PeD0gZc1OQsSAAA7%22%2CY%3A%5B%7Bx%3A0%2Cy%3A0%2Ci%3A13%2Ch%3A13%2Cj%3A11%2C%0Al%3A11%7D%2C%7Bx%3A14%2Cy%3A0%2Ci%3A13%2Ch%3A9%2Cj%3A7%2Cl%3A1%7D%2C%7Bx%3A28%2Cy%3A0%2Ci%3A16%2Ch%3A15%2Cj%3A9%2Cl%3A8%7D%2C%7Bx%3A17%2Cy%3A10%2Ci%3A11%2Ch%3A9%2Cj%3A10%2Cl%3A8%7D%2C%7Bx%3A0%2Cy%3A15%2Ci%3A16%2Ch%3A13%2Cj%3A6%2Cl%3A12%7D%2C%7Bx%3A16%2Cy%3A20%2Ci%3A12%2Ch%3A8%2Cj%3A2%2Cl%3A7%7D%2C%7Bx%3A29%2Cy%3A16%2Ci%3A15%2Ch%3A12%2Cj%3A8%2Cl%3A6%7D%5D%7D%2Cja%3D%7Bma%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhswAFAIAAAAAAAP%2F%2F%2FyH5BAEAAAEALAAAAACzAAUAAAKRDB52kIrL3IOJRlNRfo3d2mGgs11L2Z2QF5oi5sZU1tR2qcGtHfN%2B7Rr5IkSe5wjqJXfLW1C3ZEGfL8Xt%2BlodNZ8sadOanITAb1XHSoe5a1PO20TD4%2BcuFjiG6oXSUDn%2BpFT0N9XXl8RBNhckpbb3YecEGSkzZmFpIZkokmfZZgjnabS5BYlnyhSYIor3YxVQAAA7%22%7D%2Cka%3D%7Bma%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhGwADAIAAABgQK%2F%2F%2F%2FyH5BAEAAAEALAAAAAAbAAMAAAIQjA%2BRaLkK25lsvUufjC6iAgA7%22%2C%0AY%3A%5B%7Bx%3A0%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A4%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A8%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A12%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A16%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A20%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%2C%7Bx%3A24%2Cy%3A0%2Ci%3A3%2Ch%3A3%2Cj%3A1%2Cl%3A1%7D%5D%7D%2Cla%3D%7Bma%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhRgANAJEAAP%2FyqtSGIf%2F%2F%2FwAAACH5BAEAAAIALAAAAABGAA0AAAKnlBV5y53RomRvxgAydIpmsFHdUpFfSI5GAqLrKbYpppn1warvjdAgJ8P5XL3gCjNi8YTGR4nJcz57w2OVKk3BEJ8ttuTzIrO0LLf7szp33U349v4p0fP2GS3Hu%2FXsbXyvF5eHN2h358fX5%2FIGUSf315h4iBJGaUhFp2izVLmZdhh1CZrGiCNa%2BpLDphQy9jmEZMoqG1uUmVpbdtba8lpTy6VKS3qiWwAAOw%3D%3D%22%2C%0AY%3A%5B%7Bx%3A1%2Cy%3A0%2Ci%3A8%2Ch%3A13%2Cj%3A4%2Cl%3A13%7D%2C%7Bx%3A10%2Cy%3A0%2Ci%3A9%2Ch%3A13%2Cj%3A5%2Cl%3A13%7D%2C%7Bx%3A21%2Cy%3A0%2Ci%3A8%2Ch%3A13%2Cj%3A4%2Cl%3A13%7D%2C%7Bx%3A30%2Cy%3A0%2Ci%3A10%2Ch%3A13%2Cj%3A5%2Cl%3A13%7D%2C%7Bx%3A40%2Cy%3A0%2Ci%3A10%2Ch%3A13%2Cj%3A5%2Cl%3A13%7D%2C%7Bx%3A50%2Cy%3A0%2Ci%3A10%2Ch%3A13%2Cj%3A5%2Cl%3A13%7D%2C%7Bx%3A60%2Cy%3A0%2Ci%3A10%2Ch%3A13%2Cj%3A5%2Cl%3A13%7D%5D%7D%2Cma%3D%7Bma%3A%22data%3Aimage%2Fgif%3Bbase64%2CR0lGODlhCQAIAJEAAJeXl%2F%2F%2F%2FwAAAAAAACH5BAEAAAIALAAAAAAJAAgAAAIUhG8CwR3G0FNtTRqvslps5oWeUQAAOw%3D%3D%22%2CY%3A%5B%7Bx%3A0%2Cy%3A0%2Ci%3A9%2Ch%3A8%2Cj%3A10%2Cl%3A8%7D%5D%7D%3Blet%20v%3Dnew%20AudioContext%2Cw%3Dv.createDynamicsCompressor()%3Bw.knee.setValueAtTime(40%2C0)%3Bw.threshold.setValueAtTime(-12%2C0)%3Bw.connect(v.destination)%3B%0Alet%20x%3Bfunction%20y(a)%7Breturn%20Math.sin(2*Math.PI*a)%7Dfunction%20z()%7Breturn%202*Math.random()-1%7Dfunction%20A(a%2Cb)%7Bfor(let%20c%3D0%3Bc%3Cb.length-1%3Bc%2B%2B)%7Blet%20%5Bd%2Ce%2Cf%3D1%5D%3Db%5Bc%5D%2C%5Bp%2Cr%5D%3Db%5Bc%2B1%5D%3Bif(d%3C%3Da%26%26a%3Cp)return%20a%3D(a-d)%2F(p-d)%2Ca%3D1%3Cf%3FMath.pow(a%2Cf)%3A1-Math.pow(1-a%2C1%2Ff)%2Ce%2Ba*(r-e)%7Dreturn%20b%5Bb.length-1%5D%5B1%5D%7Dfunction%20B(a)%7Breturn%22number%22%3D%3D%3Dtypeof%20a%3F%5B%5B0%2Ca%5D%2C%5B1%2Ca%5D%5D%3Aa%7Dfunction%20na(a%2Cb)%7Ba%3DMath.tan(Math.PI*a%2Fv.sampleRate)%3Blet%20c%3Da*a%3Bb%3D1%2Fb%3Blet%20d%3D1%2F(1%2Bb*a%2Bc)%3Breturn%5Bd%2F1%2C-2*d%2Cd%2F1%2C2*d*(c-1)%2Cd*(1-b*a%2Bc)%5D%7D%0Afunction%20oa(a%2Cb)%7Ba%3D1%2FMath.tan(Math.PI*a%2Fv.sampleRate)%3Blet%20c%3Da*a%3Bb%3D1%2Fb%3Blet%20d%3D1%2F(1%2Bb*a%2Bc)%3Breturn%5Bd%2F1%2C2*d%2Cd%2F1%2C2*d*(1-c)%2Cd*(1-b*a%2Bc)%5D%7Dfunction%20pa(a%2Cb)%7Ba%3D1%2FMath.tan(Math.PI*a%2Fv.sampleRate)%3Blet%20c%3Da*a%3Bb%3D1%2Fb%3Blet%20d%3D1%2F(1%2Bb*a%2Bc)%3Breturn%5Bd*a*b%2C0%2C-d*a*b%2C2*d*(1-c)%2Cd*(1-b*a%2Bc)%5D%7Dfunction%20qa(a%2Cb%2Cc%2Cd)%7Blet%20e%3D0%2Cf%3D0%3Bfor(let%20p%3D0%3Bp%3Ca.length%3B%2B%2Bp)%7Blet%20r%3Db(A(p%2F(a.length-1)%2Cc)%2CA(p%2F(a.length-1)%2Cd))%2CO%3Da%5Bp%5D%2Cea%3DO*r%5B0%5D%2Be%3Ba%5Bp%5D%3Dea%3Be%3DO*r%5B1%5D-ea*r%5B3%5D%2Bf%3Bf%3DO*r%5B2%5D-ea*r%5B4%5D%7Dreturn%20a%7Dfunction%20ra(a%2Cb)%7Breturn%20qa(a%2Coa%2CB(b)%2CB(Math.SQRT1_2))%7D%0Afunction%20sa(a%2Cb)%7Breturn%20qa(a%2Cna%2CB(b)%2CB(Math.SQRT1_2))%7Dfunction%20ta(a%2Cb%2Cc%3DMath.SQRT1_2)%7Breturn%20qa(a%2Cpa%2CB(b)%2CB(c))%7Dfunction%20ua(a)%7Bfor(let%20b%3D0%3Bb%3Ca.length%3Bb%2B%2B)a%5Bb%5D*%3D3%2Ca%5Bb%5D%3D-1%3Ea%5Bb%5D%3F-1%3A1%3Ca%5Bb%5D%3F1%3AMath.sin(a%5Bb%5D*Math.PI%2F2)%2Ca%5Bb%5D%2F%3D3%3Breturn%20a%7Dfunction%20va(a%2Cb)%7Blet%20c%3D0%3Ba.forEach((a)%3D%3E%7Bc%3DMath.max(c%2Ca.length)%7D)%3Blet%20d%3Dnew%20Float32Array(c)%3Ba.forEach((c%2Cf)%3D%3E%7Bfor(let%20e%3D0%3Be%3Cc.length%3Be%2B%2B)b(d%2Cf%2Cc%2Ce%2Ca.length)%7D)%3Breturn%20d%7Dfunction%20wa(a)%7Breturn%20va(a%2C(a%2Cc%2Cd%2Ce%2Cf)%3D%3E%7Ba%5Be%5D%2B%3Dd%5Be%5D%2Ff%7D)%7D%0Afunction%20xa(a)%7Breturn%20va(a%2C(a%2Cc%2Cd%2Ce%2Cf)%3D%3E%7B0%3D%3D%3Dc%26%26(a%5Be%5D%3D1)%3Ba%5Be%5D*%3Dd%5Be%5D%2Ff%7D)%7Dfunction%20C(a%2Cb)%7Ba%3Dnew%20Float32Array(a*v.sampleRate)%3Bfor(let%20c%3D0%3Bc%3Ca.length%3Bc%2B%2B)a%5Bc%5D%3Db(c%2Fa.length%2Cc%2Fv.sampleRate)%3Breturn%20a%7Dfunction%20D(a%2Cb)%7Bfor(let%20c%3D0%3Bc%3Ca.length%3Bc%2B%2B)a%5Bc%5D*%3DA(c%2Fa.length%2Cb)%3Breturn%20a%7D%0Afunction%20ya()%7Blet%20a%3D%5B%5B0%2C.01%2C2%5D%2C%5B1%2C0%5D%5D%2Cb%3Dz()%3Breturn%20D(wa(%5Bsa(C(.3%2Cfunction()%7BMath.random()%3C5E3%2Fv.sampleRate%26%26(b%3Dz())%3Breturn%20b%7D)%2C900)%2Cta(C(.3%2Cfunction(c)%7BMath.random()%3CA(c%2Ca)%26%26(b%3Dz())%3Breturn%20b%7D)%2C100)%5D)%2C%5B%5B0%2C0%5D%2C%5B.1%2C1%2C.8%5D%2C%5B.2%2C.3%2C.9%5D%2C%5B1%2C0%5D%5D)%7Dfunction%20za()%7Blet%20a%3D0%2Cb%3D%5B%5B0%2C40%2C.2%5D%2C%5B1%2C20%5D%5D%2Cc%3Dz()%3Breturn%20xa(%5BC(.2%2Cfunction(c)%7Ba%2B%3DA(c%2Cb)%2Fv.sampleRate%3Breturn%2040*(2*Math.abs(a%251*2-1)-1)%7D)%2CD(ua(C(.2%2Cfunction()%7BMath.random()%3C500%2Fv.sampleRate%26%26(c%3Dz())%3Breturn%20c%7D))%2C%5B%5B0%2C1%2C.5%5D%2C%5B1%2C0%5D%5D)%5D)%7D%0Afunction%20Aa()%7Breturn%20ta(D(C(.2%2Cz)%2C%5B%5B0%2C0%2C.5%5D%2C%5B.1%2C.5%2C.2%5D%2C%5B1%2C0%5D%5D)%2C2E3)%7Dfunction%20Ba()%7Blet%20a%3Dz()%2Cb%3D0%2Cc%3D%5B%5B0%2C2E3%2C.2%5D%2C%5B1%2C200%5D%5D%3Breturn%20D(C(.3%2Cfunction(d)%7B1%3C%3Db%26%26(a%3Dz()%2C--b)%3Bb%2B%3DA(d%2Cc)%2Fv.sampleRate%3Breturn%20a%7D)%2C%5B%5B0%2C.5%2C.5%5D%2C%5B1%2C0%5D%5D)%7Dfunction%20Ca()%7Blet%20a%3D0%2Cb%3D%5B%5B0%2C440%2C.2%5D%2C%5B1%2C2200%5D%5D%3Breturn%20D(C(.5%2Cfunction(c)%7Ba%2B%3DA(c%2Cb)%2Fv.sampleRate%3Breturn(2*Math.abs(a%251*2-1)-1%2B(a%251*2-1))%2F2%7D)%2C%5B%5B0%2C0%2C.5%5D%2C%5B.1%2C1%2C.5%5D%2C%5B1%2C0%5D%5D)%7D%0Afunction%20Da()%7Bfunction%20a(a)%7Blet%20b%3D0%2Cc%3D%5B%5D%3Bdo%20c.push(%5Bb%2Ca%3F1%3A.45%5D)%2Ca%3D!a%2Cb%2B%3D.1875%2Cc.push(%5Bb-1E-7%2C0%5D)%3Bwhile(1%3E%3Db)%3Breturn%20c%7Dlet%20b%3Da(!0)%2Cc%3Da(!1)%2Cd%3D%5B%5B0%2C0%2C.5%5D%2C%5B.05%2C1%2C.5%5D%2C%5B1%2C0%5D%5D%3Breturn%5BD(D(C(4%2Cz)%2Cb)%2Cd)%2CD(D(C(4%2Cz)%2Cc)%2Cd)%5D%7Dlet%20E%3D(a)%3D%3E0%3Ca%3F1%3A0%3Ea%3F-1%3A0%2CF%3D(a%2Cb%2Cc)%3D%3Ea%3Eb%3FMath.max(a-c%2Cb)%3AMath.min(a%2Bc%2Cb)%3Bfunction%20G(a%2Cb)%7Breturn%20a.x%2Ba.width%3Eb.x%26%26a.x%3Cb.x%2Bb.width%26%26a.y%2Ba.height%3Eb.y%26%26a.y%3Cb.y%2Bb.height%7Dfunction%20H(a)%7Breturn%20Math.floor(a*Math.random())%7Dlet%20I%3D(a%2Cb%2Cc%2Cd%2Ce)%3D%3E%7Bfor(%3Bb%3C%3Dd%3Bb%2B%2B)for(let%20d%3Da%3Bd%3C%3Dc%3Bd%2B%2B)e(d%2Cb)%7D%3B%0Aasync%20function%20J(a%2Cb%2Cc)%7Blet%20d%3Ddocument.createElement(%22canvas%22)%3Bd.width%3Da%3Bd.height%3Db%3Bawait%20c(d.getContext(%222d%22))%3Blet%20e%3Dawait%20new%20Promise((a)%3D%3Ed.toBlob(a))%3Breturn%20new%20Promise((a)%3D%3E%7Blet%20b%3Dnew%20Image%3Bb.onload%3D()%3D%3Ea(b)%3Bb.src%3DURL.createObjectURL(e)%7D)%7Dfunction%20Ea(a%2Cb)%7Blet%20%5B%2Cc%2Cd%5D%3D%2F%5E(%5Cw%2B)%5C((.*)%5C)%24%2F.exec(a)%3Breturn%60%24%7Bc%7D(%24%7Bd%7D%2C%24%7Bb%7D)%60%7Dasync%20function%20K()%7Bawait%20new%20Promise((a)%3D%3ErequestAnimationFrame(a))%7D%0Afunction%20L(a%2Cb%2Cc%2Cd)%7Blet%20e%3D%7B%7D%3Ba.forEach((a)%3D%3E%7Bvar%20f%3Da.slice(1).join(%22%7C%22)%3Be%5Bf%5D%7C%7C(e%5Bf%5D%3Dc(440*Math.pow(2%2Ca%5B1%5D%2F12)%2C...a.slice(2)))%3Bf%3De%5Bf%5D%3Bvar%20r%3Db%3Ba%3DMath.round(v.sampleRate*a%5B0%5D*60%2Fd)%3BArray.isArray(f)%7C%7C(f%3D%5Bf%5D)%3BArray.isArray(r)%7C%7C(r%3D%5Br%5D)%3Bfor(let%20b%3D0%3Bb%3Cr.length%3Bb%2B%2B)%7Blet%20c%3Df%5Bb%25f.length%5D%2Cd%3Dr%5Bb%25r.length%5D%2Ce%3DMath.min(a%2Bc.length%2Cd.length)%3Bfor(let%20b%3Da%3Bb%3Ce%3Bb%2B%2B)d%5Bb%5D%2B%3Dc%5Bb-a%5D%7D%7D)%7Dfunction%20M(a%2Cb%2Cc)%7Blet%20d%3D%5B%5D%3Bfor(let%20e%3D0%3Be%3Cc%3Be%2B%2B)a.forEach((%5Ba%2C...c%5D)%3D%3E%7Bd.push(%5Ba%2Bb*e%2C...c%5D)%7D)%3Breturn%20d%7D%0Afunction%20N(a%2Cb)%7Breturn%20a.map((a%2Cd)%3D%3E%5Ba%2Cb%5Bd%5D%5D)%7Dfunction%20P(a%2Cb)%7Ba.forEach((a)%3D%3E%7Ba%5B0%5D%2B%3Db%7D)%3Breturn%20a%7Dasync%20function%20Fa(a%2Cb)%7Blet%20c%3Dv.createBufferSource()%3Bc.loop%3D!0%3Bb%3Dv.createBuffer(1%2Cb%2Cv.sampleRate)%3Ba(b.getChannelData(0)%2C120)%3Bc.buffer%3Db%3Bawait%20K()%3Breturn%20c%7D%0Aclass%20Ga%7Bconstructor(a)%7Blet%20b%3Dv.createGain()%3Bthis.Pb%3Da.map((a)%3D%3E%7Blet%20c%3Da.source%2Ce%3Dv.createGain()%3Be.gain.value%3Da.volume%3Bc.connect(e)%3Be.connect(b)%3Bif(a.W)%7Blet%20b%3Dv.createGain()%3Bb.gain.value%3Da.W%3Be.connect(b)%3Bb.connect(x)%7Dreturn%7Bsource%3Ac%2CAc%3Ae.gain%7D%7D)%3Bb.connect(w)%7Dplay()%7Bthis.Pb.forEach((a)%3D%3E%7Ba.source.start()%7D)%7D%7D%0Afunction%20Ha(a)%7Blet%20b%3Da%2Fv.sampleRate%2Cc%3D0%2Cd%3D0%2Ce%3Breturn%20D(C(3%2Cfunction()%7Be%3DMath.round((1*y(c)%2B1*y(c%2F2)%2B.1*y(2*c)%2B.001*y(3*c)%2B1E-4*y(4*c))%2F2.111*5)%2F5%3Bc%2B%3Db%3Bd%2B%3D1%2Fv.sampleRate%3B1.25E-4%3C%3Dd%26%26(c%2B%3Dz()*b*.6%2Cd-%3D1.25E-4)%3Breturn%20e%7D)%2C%5B%5B0%2C0%2C.5%5D%2C%5B.001%2C1%2C.1%5D%2C%5B1%2C0%5D%5D)%7D%0Afunction%20Ia(a%2Cb)%7Bvar%20c%3Dnew%20Float32Array(32%2Fb*60*v.sampleRate)%3Bvar%20d%3D%5B0%2C.75%2C1.5%2C2%2C2.75%2C3.5%2C4%2C4.75%2C5.5%2C6%2C6.75%2C7.5%5D%3Bd%3D%5B...N(d%2C%5B4%2C7%2C11%2C4%2C7%2C11%2C12%2C11%2C4%2C12%2C11%2C4%5D)%2C...P(N(d%2C%5B4%2C7%2C11%2C4%2C7%2C11%2C12%2C11%2C4%2C12%2C11%2C4%5D)%2C8)%2C...P(N(d%2C%5B4%2C5%2C12%2C4%2C5%2C12%2C12%2C11%2C4%2C12%2C11%2C4%5D)%2C16)%2C...P(N(d%2C%5B2%2C7%2C11%2C2%2C7%2C11%2C12%2C11%2C2%2C12%2C11%2C2%5D)%2C24)%5D%3Bd.push(%5B30.5%2C14%5D)%3BL(d%2Cc%2CHa%2Cb)%3Ba.set(c%2C0)%3Ba.set(c%2Cc.length)%3Ba.set(c%2C2*c.length)%3Ba.set(c%2C3*c.length)%3Bc%3D%5B%5B0%2C16%5D%2C%5B4%2C17%5D%2C%5B6%2C19%5D%2C%5B8%2C21%5D%2C%5B16%2C24%5D%2C%5B20%2C23%5D%2C%5B22%2C24%5D%2C%5B24%2C19%5D%5D%3Bfor(let%20a%3D0%2Cb%3Dc.length%3Ba%3Cb%3Ba%2B%2B)%7Bvar%20%5Be%2Cf%2C...p%5D%3D%0Ac%5Ba%5D%3Bc.push(%5Be%2Cf%2B12%2C...p%5D)%7Dc%3DP(c%2C32)%3BL(c%2Ca%2CHa%2Cb)%7Dfunction%20Ja(a%2Cb)%7B%7Blet%20a%3Dnew%20Float32Array(32%2Fb*60*v.sampleRate)%3Bvar%20c%3D%5B.5%2C1.25%5D%2Cd%3DN(c%2C%5B-12%2C-12%5D)%3Blet%20f%3DN(c%2C%5B-15%2C-15%5D)%2Cp%3DN(c%2C%5B-19%2C-19%5D)%3Bc%3DN(c%2C%5B-17%2C-17%5D)%3Bd%3D%5B...M(d%2C2%2C4)%2C...P(M(f%2C2%2C4)%2C8)%2C...P(M(p%2C2%2C4)%2C16)%2C...P(M(c%2C2%2C4)%2C24)%5D%3BL(d%2Ca%2CHa%2Cb)%3Bb%3Da%7Da.set(b%2C0)%3Ba.set(b%2Cb.length)%3Ba.set(b%2C2*b.length)%3Ba.set(b%2C3*b.length)%7D%0Afunction%20Ka(a%2Cb)%7Bb%2B%3D.2%3Blet%20c%3Da%2Fv.sampleRate%2Cd%3D%5B%5B0%2C-.5%2C2%5D%2C%5B.1%2C1%2C2%5D%2C%5B1%2C-1%5D%5D%2Ce%3D0%2Cf%3D1%2F1.01%3Ba%3D%5B%5B0%2C0%5D%2C%5B.1%2Fb%2C1%5D%2C%5B(b-.2)%2Fb%2C.5%5D%2C%5B1%2C0%5D%5D%3Blet%20p%3D%5B%5B0%2C200%2C.5%5D%2C%5B.1%2Fb%2C2E3%2C.5%5D%2C%5B(b-.2)%2Fb%2C1E3%2C.5%5D%2C%5B1%2C200%5D%5D%3Breturn%20ra(D(C(b%2Cfunction()%7Blet%20a%3DA(e%251%2Cd)%2F2%3Ba%2B%3DA(1.01*e%251%2Cd)%2F3%3Ba%2B%3DA(e*f%251%2Cd)%2F6%3Be%2B%3Dc%3Breturn%20a%7D)%2Ca)%2Cp)%7D%0Afunction%20La(a%2Cb)%7Bvar%20c%3D60%2Fb%3Bc%3DP(%5B%5B0%2C-8%2C4*c%5D%2C%5B4%2C-7%2C2*c%5D%2C%5B6%2C-5%2C2*c%5D%2C%5B8%2C-3%2C4*c%5D%2C%5B12%2C-1%2C2*c%5D%2C%5B14%2C0%2C2*c%5D%2C%5B16%2C0%2C4*c%5D%2C%5B20%2C-1%2C2*c%5D%2C%5B22%2C0%2C2*c%5D%2C%5B24%2C2%2C3*c%5D%2C%5B27%2C0%2C1*c%5D%2C%5B28%2C-1%2C4*c%5D%5D%2C64).concat(P(%5B%5B0%2C0%2C4*c%5D%2C%5B0%2C4%2C4*c%5D%2C%5B4%2C-1%2C2*c%5D%2C%5B4%2C2%2C2*c%5D%2C%5B6%2C-3%2C2*c%5D%2C%5B6%2C0%2C2*c%5D%2C%5B8%2C-3%2C4*c%5D%2C%5B8%2C0%2C4*c%5D%2C%5B12%2C-3%2C2*c%5D%2C%5B12%2C0%2C2*c%5D%2C%5B14%2C-5%2C2*c%5D%2C%5B14%2C-1%2C2*c%5D%2C%5B16%2C-7%2C4*c%5D%2C%5B16%2C-3%2C4*c%5D%2C%5B20%2C-5%2C2*c%5D%2C%5B20%2C-1%2C2*c%5D%2C%5B22%2C-3%2C2*c%5D%2C%5B22%2C0%2C2*c%5D%2C%5B24%2C-5%2C4*c%5D%2C%5B24%2C0%2C4*c%5D%2C%5B28%2C-5%2C4*c%5D%2C%5B28%2C-1%2C4*c%5D%5D%2C96))%3BL(c%2Ca%2CKa%2Cb)%7D%0Afunction%20Ma()%7Blet%20a%3D%5B%5B0%2C400%2C.07%5D%2C%5B1%2C80%5D%5D%2Cb%3D0%2Cc%2Cd%3DC(.4%2Cfunction(d)%7Bc%3Dy(b)%3Bb%2B%3DA(d%2Ca)%2Fv.sampleRate%3Breturn%20c%7D)%2Ce%3Dta(C(.4%2Cz)%2C3E3%2C1)%3Breturn%20sa(D(wa(%5Bd%2Ce%5D)%2C%5B%5B0%2C1%2C.2%5D%2C%5B1%2C0%5D%5D)%2C400)%7Dfunction%20Na(a%2Cb)%7Blet%20c%3DP(M(%5B%5B1%5D%2C%5B3%5D%2C%5B5%5D%2C%5B7%5D%2C%5B7.75%5D%5D%2C8%2C8)%2C64)%3BL(c%2Ca%2CMa%2Cb)%7Dfunction%20Oa()%7Blet%20a%3D%5B%5B0%2C380%2C.1%5D%2C%5B.8%2C30%5D%5D%2Cb%3D0%2Cc%3Breturn%20D(C(.4%2Cfunction(d)%7Bc%3D(y(b)%2B(2*Math.abs(b%251*2-1)-1))%2F2%3Bb%2B%3DA(d%2Ca)%2Fv.sampleRate%3Breturn%20c%7D)%2C%5B%5B0%2C0%5D%2C%5B.01%2C1%2C.2%5D%2C%5B1%2C0%5D%5D)%7Dfunction%20Pa(a%2Cb)%7Blet%20c%3DP(M(%5B%5B0%5D%2C%5B2.5%5D%2C%5B4%5D%2C%5B5.5%5D%2C%5B6.5%5D%5D%2C8%2C8)%2C64)%3BL(c%2Ca%2COa%2Cb)%7D%0Afunction%20Qa(a%2Cb)%7Ba%3D%5B%5B0%2Cb%2C.2%5D%2C%5B1%2C0%5D%5D%3Breturn%20D(sa(C(.4%2Cz)%2C3E3)%2Ca)%7Dfunction%20Ra(a%2Cb)%7Blet%20c%3DP(M(%5B%5B0%2C0%2C.25%5D%2C%5B.5%2C0%2C1%5D%5D%2C1%2C64)%2C64)%3Bc%3D%5B...c%2C...P(M(%5B%5B14.25%2C0%2C.5%5D%2C%5B15.25%2C0%2C.5%5D%5D%2C16%2C4)%2C64)%5D%3BL(c%2Ca%2CQa%2Cb)%7Dfunction%20Q(a)%7Breturn%20Math.pow(10%2Ca%2F20)%7D%0Aasync%20function%20Sa()%7Blet%20a%3D7680*v.sampleRate%2F120%2C%5Bb%2Cc%2Cd%2Ce%2Cf%2Cp%5D%3Dawait%20Promise.all(%5BIa%2CJa%2CLa%2CNa%2CPa%2CRa%5D.map((b)%3D%3EFa(b%2Ca)))%3Breturn%20new%20Ga(%5B%7Bsource%3Ab%2Cvolume%3AQ(-14)%2CW%3A1%7D%2C%7Bsource%3Ac%2Cvolume%3AQ(-14)%2CW%3A1%7D%2C%7Bsource%3Ad%2Cvolume%3AQ(-14)%2CW%3A1%7D%2C%7Bsource%3Ae%2Cvolume%3AQ(-7.1)%2CW%3AQ(-6)%7D%2C%7Bsource%3Af%2Cvolume%3AQ(-4.9)%2CW%3A0%7D%2C%7Bsource%3Ap%2Cvolume%3AQ(-23)%2CW%3A0%7D%5D)%7Dlet%20Ta%2CUa%2CVa%2CWa%2CXa%2CYa%2CZa%2C%24a%2Cab%2Cbb%2Ccb%3Basync%20function%20db(a)%7Ba%3Da()%3Blet%20b%3Dv.createBuffer(1%2Ca.length%2Cv.sampleRate)%3Bb.getChannelData(0).set(a)%3Bawait%20K()%3Breturn%20b%7D%0Aasync%20function%20eb()%7Blet%20a%3Dv.createConvolver()%2Cb%3DDa()%2Cc%3Dv.createBuffer(2%2Cb%5B0%5D.length%2Cv.sampleRate)%3Bc.getChannelData(0).set(b%5B0%5D)%3Bc.getChannelData(1).set(b%5B1%5D)%3Ba.buffer%3Dc%3Bx%3Da%3Bx.connect(w)%3Bawait%20K()%7Dfunction%20fb(a)%7Breturn%20new%20Promise((b)%3D%3E%7Blet%20c%3Dnew%20Image%3Bc.onload%3D()%3D%3E%7Ba.C%3Dc%3Bb(a)%7D%3Bc.src%3Da.ma%7D)%7D%0Aasync%20function%20gb()%7B%5BTa%2CUa%2CVa%2CWa%2CXa%5D%3Dawait%20Promise.all(%5Bia%2Cja%2Cka%2Cla%2Cma%5D.map(fb))%3Bawait%20K()%3B%5BYa%2CZa%2C%24a%2Cab%2Cbb%5D%3Dawait%20Promise.all(%5Bya%2Cza%2CAa%2CBa%2CCa%5D.map(db))%3Beb()%3Bcb%3Dawait%20Sa()%3Bdocument.body.classList.remove(%22loading%22)%7Dlet%20R%3Ddocument.querySelector(%22canvas%22)%2CS%3DR.getContext(%222d%22)%3BS.imageSmoothingEnabled%3D!1%3Bvar%20T%3D%5B1%2C0%2C0%2C1%2C0%2C0%5D%3Bfunction%20U(a)%7Ba%3D100*m.scale%2Fa%3BT%5B0%5D%3Da%3BT%5B3%5D%3Da%3BT%5B4%5D%3DR.width%2F2-m.x*a%3BT%5B5%5D%3DR.height%2F2-m.y*a%3BS.setTransform(...T)%7Dfunction%20V()%7BS.globalAlpha%3D1%7Dfunction%20W(...a)%7BS.drawImage(...a)%7D%0Afunction%20X(a%2Cb%2Cc%2Cd%2Ce)%7BS.fillStyle%3Da%3BS.fillRect(b%2Cc%2Cd%2Ce)%7Dfunction%20hb(a%2Cb%2Cc%2Cd%2Ce)%7BS.beginPath()%3BS.arc(c%2Cd%2Ce%2C0%2C2*Math.PI)%3Ba%26%26(S.fillStyle%3Da%2CS.fill())%3Bb%26%26(S.strokeStyle%3Db%2CS.stroke())%7Dfunction%20ib(a%2Cb%2Cc%2Cd%3D0%2Ce%3D1%2Cf%3D1%2Cp%3D0)%7Bjb(b%2Cc%2C()%3D%3E%7BS.rotate(p)%3BS.scale(e%2Cf)%3Blet%20b%3Da.Y%5Bd%5D%3BW(a.C%2Cb.x%2Cb.y%2Cb.i%2Cb.h%2C-b.j%2C-b.l%2Cb.i%2Cb.h)%7D)%7Dfunction%20jb(a%2Cb%2Cc)%7BS.save()%3BS.translate(a%2Cb)%3Bc()%3BS.restore()%7D%0Aclass%20kb%7Bconstructor(a%2Cb)%7Bthis.B%3Da%3Bthis.w%3Db%7Ds(a%2C...b)%7Bthis.B%5Bthis.w%5D.vb%26%26this.B%5Bthis.w%5D.vb(this)%3Bthis.w%3Da%3Bthis.B%5Bthis.w%5D.N%26%26this.B%5Bthis.w%5D.N(...b)%7Df()%7Bthis.B%5Bthis.w%5D.A%26%26this.B%5Bthis.w%5D.A(this)%7D%7D%0Aclass%20lb%20extends%20kb%7Bconstructor(a)%7Bsuper(%7B%5B0%5D%3A%7BA%3A()%3D%3E%7Bthis.alpha%3D0%7D%7D%2C%5B1%5D%3A%7BN%3A(b)%3D%3E%7Bthis.g%3D0%3Blet%20c%3D-.5%2BMath.random()%2B(1%3D%3D%3Db.I%3FMath.PI%3A0)%3Ba.x%3Da.Kb%3Db.x%2B20*Math.cos(c)%3Ba.y%3Da.Lb%3Db.y%2B20*Math.sin(c)%3Ba.rotation%3D0%3Ba.M%3Db%7D%2CA%3A()%3D%3E%7Bthis.g%2B%3Dg%3Blet%20b%3D.1%2B3*g%2Cc%3Dthis.g%2Fb%3Bc*%3D2-c%3Blet%20d%3Da.M.y%2Ba.Ga%3Ba.x%3Da.Kb%2B(a.M.x%2Ba.hb-a.Kb)*c%3Ba.y%3Da.Lb%2B(d-a.Lb)*c%3Ba.alpha%3Dc%3Bthis.g%3E%3Db%26%26this.s(2)%7D%7D%2C%5B2%5D%3A%7BA%3A()%3D%3E%7Ba.x%3Da.M.x%2Ba.hb%3Ba.y%3Da.M.y%2Ba.Ga%3Ba.rotation%3D0%7D%7D%2C%5B3%5D%3A%7BN%3A()%3D%3E%7Bthis.g%3D20%3Ba.rotation%3DMath.PI%2F2%7D%2CA%3A()%3D%3E%7Ba.x%3Da.M.x%2Ba.hb%3Ba.y%3Da.M.y%2Ba.Ga%3Blet%20b%3D%0Athis.g%2F20%3Ba.rotation%3D-E(a.I)*Math.PI%2F2*b*b%3Bthis.g--%3B0%3D%3Dthis.g%26%26this.s(2)%7D%7D%2C%5B4%5D%3A%7BN%3A(b%2Cc)%3D%3E%7Ba.M%3Dnull%3Bthis.a%3Db%3Bthis.b%3Dc%3Bthis.mc%3D4*Math.random()-2%7D%2CA%3A()%3D%3E%7Ba.x%2B%3Dthis.a*g%3Ba.y%2B%3Dthis.b*g%3Ba.rotation%2B%3Dthis.mc*g%3Ba.alpha%3DF(a.alpha%2C0%2C2*g)%3B0%3E%3Da.alpha%26%26this.s(0)%7D%7D%7D%2C0)%7D%7D%0Aclass%20mb%7Bconstructor(a)%7Bthis.y%3Dthis.x%3D0%3Bthis.I%3Dthis.X%3Da%3Bthis.rotation%3D0%3Bthis.hb%3D-2*a%3Bthis.Ga%3D-6%3Bthis.alpha%3D0%3Bthis.B%3Dnew%20lb(this)%7DMa(a)%7Bthis.M!%3D%3Da%26%26this.B.s(1%2Ca)%7DHa(a%2Cb)%7B0!%3D%3Dthis.B.w%26%26this.B.s(4%2Ca%2Cb)%7Df()%7Bthis.I%2B%3D(this.X-this.I)%2F5%3Bthis.B.f()%7Dbb(a)%7Bthis.M%26%26(this.Ga%3Da)%7DTa()%7Bthis.B.s(3)%7Dc()%7B0%3E%3Dthis.alpha%7C%7C(S.globalAlpha%3Dthis.alpha%2Cib(Xa%2Cthis.x%2Cthis.y%2C0%2Cthis.I%2C1%2Cthis.rotation)%2CV())%7D%7D%0Aclass%20nb%7Bconstructor()%7Bthis.m%3D%5Bnew%20mb(-1)%2Cnew%20mb(1)%5D%3Bthis.Ba%3D%5B0%2C1%5D%7DMa(a)%7Bfor(let%20b%20of%20this.m)b.Ma(a)%7DHa(a%2Cb)%7Bfor(let%20c%20of%20this.m)c.Ha(a%2Cb)%7DTa()%7Bfor(let%20a%20of%20this.m)a.Ta()%7Df()%7Bfor(let%20a%20of%20this.m)a.f()%7Dbb(a)%7Bfor(let%20b%20of%20this.m)b.bb(a)%7Dnc(a)%7Bswitch(a)%7Bcase%200%3Athis.Ba%3D%5B0%2C1%5D%3Bthis.m%5B0%5D.X%3D-1%3Bthis.m%5B1%5D.X%3D1%3Bbreak%3Bcase%20-1%3Athis.Ba%3D%5B1%2C0%5D%3Bthis.m%5B0%5D.X%3D-1%3Bthis.m%5B1%5D.X%3D-1%3Bbreak%3Bcase%201%3Athis.Ba%3D%5B0%2C1%5D%2Cthis.m%5B0%5D.X%3D1%2Cthis.m%5B1%5D.X%3D1%7D%7Dc()%7Bthis.Ba.forEach((a)%3D%3Ethis.m%5Ba%5D.c())%7D%7D%0Afunction%20Y(a%2Cb%3D1%2Cc%3D!1)%7Blet%20d%3Dv.createBufferSource()%3Bd.buffer%3Da%3Bc%26%26(a%3Dv.createGain()%2Ca.gain.value%3D2*b%2Cd.connect(a)%2Ca.connect(x))%3Bif(1!%3D%3Db)%7Blet%20a%3Dv.createGain()%3Ba.gain.setValueAtTime(b%2C0)%3Bd.connect(a)%3Bd.onended%3D()%3D%3Ea.disconnect(w)%3Ba.connect(w)%7Delse%20d.connect(w)%3Bd.start()%7D%0Aclass%20ob%7Bconstructor(a%2Cb%2Cc)%7Bthis.color%3Da%3Ba%3DMath.random()*Math.PI*2%3Bthis.x%3DMath.cos(a)*c%3Bthis.y%3DMath.sin(a)*c%3Bthis.Aa%3Db%3Bthis.alpha%3D0%3Bthis.Nb%3D1%2Fb%7Dc()%7Bthis.Aa--%3Bthis.alpha%2B%3Dthis.Nb%3B0%3E%3Dthis.Aa%7C%7C(hb(this.color%2Cnull%2Cthis.x%2Cthis.y%2Cthis.Aa)%2CS.globalAlpha%3Dthis.alpha%2Chb(%22%23888%22%2Cnull%2Cthis.x%2Cthis.y%2Cthis.Aa)%2CV())%7D%7D%0Aclass%20pb%7Bconstructor(a%2Cb)%7Bthis.x%3Da%3Bthis.y%3Db%3Bthis.g%3D0%3Bthis.Qb%3D%5B%7Bua%3Anew%20ob(%22%23d48621%22%2C18%2C0)%2CFa%3A0%7D%2C%7Bua%3Anew%20ob(%22%23fff2aa%22%2C9%2C8)%2CFa%3A.1%7D%2C%7Bua%3Anew%20ob(%22%23d48621%22%2C9%2C7)%2CFa%3A.2%7D%2C%7Bua%3Anew%20ob(%22%23fff2aa%22%2C9%2C6)%2CFa%3A.3%7D%5D%3Bm.Ja(1)%3BY(ab)%3Bk.Sa%3D2%7Df()%7Bthis.g%2B%3Dg%3B1%3C%3Dthis.g%26%26k.jc()%7Dc()%7Bjb(this.x%2Cthis.y%2C()%3D%3E%7Bthis.Qb.forEach((a)%3D%3E%7Bthis.g%3Ca.Fa%7C%7Ca.ua.c()%7D)%7D)%7D%7Dclass%20qb%7Bconstructor(a%2Cb)%7Bthis.x%3Da%3Bthis.y%3Db%3Bthis.K%3DH(Va.Y.length)%3Bthis.g%3D1%7Df()%7Bthis.g-%3Dg%3B0%3E%3Dthis.g%26%26k.gc(this)%7Dc()%7BS.globalAlpha%3D.5*this.g%3Bib(Va%2Cthis.x%2Cthis.y%2Cthis.K)%3BV()%7D%7D%0Aclass%20rb%7Bconstructor(a%2Cb)%7Bthis.color%3Da%3Bthis.alpha%3Db%3Bthis.uc%3D1-b%7Df()%7Bthis.alpha%3DF(this.alpha%2Cthis.uc%2Cg)%7Dc()%7BS.globalAlpha%3Dthis.alpha%3BX(this.color%2C0%2C0%2CR.width%2CR.height)%3BV()%7D%7Dlet%20sb%3D0%3Bclass%20tb%7Bconstructor(a%2Cb)%7Bthis.x%3Da%3Bthis.y%3Db%3Bthis.alpha%3D0%3Bthis.index%3Dsb%2B%2B%25Ta.Y.length%7Dc()%7BS.globalAlpha%3Dthis.alpha%3Bthis.alpha%2B%3D.1%3Bib(Ta%2Cthis.x%2Cthis.y%2Cthis.index)%7D%7Dlet%20ub%3D%5B1%2C2%2C3%2C5%2C8%5D%3B%0Aclass%20vb%7Bconstructor(a)%7Bthis.%24b%3Da%3Bthis.ta%3Dl.x%3Bthis.aa%3Dl.y-6%3Bthis.g%3D0%3Bthis.nb%3D%5B%5D%3Bthis.Bb%3D%5B%5D%3Bfor(a%3D0%3B5%3Ea%3Ba%2B%2B)this.Bb.push(%7Br%3A0%2Cra%3A0%7D)%7Df()%7Bthis.g%2B%2B%3Bthis.%24b%7C%7C(60%3D%3Dthis.g%26%26k.Ia(new%20rb(%22%23fff%22%2C0))%2C120%3D%3Dthis.g%26%26h.ac())%3Bif(10%3Cthis.g%26%26240%3Ethis.g)for(let%20b%3D0%3B5%3Eb%3Bb%2B%2B)%7Bvar%20a%3Dthis.Bb%5Bb%5D%3Ba.r%2B%3D2%3Ba.ra%2B%3Dub%5Bb%5D*(1-this.g%2F240)%3Blet%20c%3Dl.x%2BMath.cos(a.ra)*a.r%3Ba%3Dl.y%2BMath.sin(a.ra)*a.r%3Bk.F(c-1%2Ca-1%2C2%2C2)%26%26this.nb.push(new%20tb(c%2Ca))%7D%7Dc()%7Bthis.nb.forEach((a)%3D%3Ea.c())%3BV()%3BS.lineWidth%3D1%3Bhb(null%2C%22%23fff%22%2Cthis.ta%2Cthis.aa%2CMath.pow(this.g%2C%0A1.125))%3Bhb(null%2C%22%23fff%22%2Cthis.ta%2Cthis.aa%2CMath.pow(this.g%2C1.25))%7D%7Dlet%20wb%3DS.createRadialGradient(R.width%2F2%2CR.height%2F2%2C200%2CR.width%2F2%2CR.height%2F2%2C1E3)%3Bwb.addColorStop(0%2C%22%23eeeeee00%22)%3Bwb.addColorStop(1%2C%22%23eeeeee53%22)%3Bclass%20xb%7Bconstructor()%7Bthis.alpha%3D1%7Df()%7Bthis.alpha-%3D2*g%3B0%3Ethis.alpha%26%26k.hc(this)%7Dc()%7BS.globalAlpha%3Dthis.alpha%3BX(wb%2C0%2C0%2CR.width%2CR.height)%3BV()%7D%7Dclass%20Z%7Bconstructor(a%2Cb%2Cc%3D1%2Cd%3D1)%7Bthis.x%3D8*a%3Bthis.y%3D8*b%3Bthis.width%3D8*c%3Bthis.height%3D8*d%7Dget%20lb()%7Breturn%20this.x%2F8%7Dget%20Pa()%7Breturn%20this.y%2F8%7Df()%7B%7Dc()%7B%7D%7D%0Aclass%20yb%7Bconstructor()%7B%7Dstart(a)%7Bthis.active%3D!0%3Bthis.g%3Da%7Dstop()%7Bthis.g%3D0%3Bthis.active%3D!1%7Df()%7Bthis.active%26%26(this.g--%2C0%3E%3Dthis.g%26%26(this.active%3D!1))%7D%7Dclass%20zb%20extends%20kb%7Bconstructor(a)%7Bsuper(%7B%5B0%5D%3A%7BN%3A()%3D%3E%7Ba.va()%7D%2CA%3A()%3D%3E%7Ba.J%26%26this.s(1)%7D%7D%2C%5B1%5D%3A%7BN%3A()%3D%3E%7Ba.va()%7D%2CA%3A()%3D%3E%7Bt%5B16%5D%26%26this.s(2)%7D%7D%2C%5B2%5D%3A%7BN%3A()%3D%3E%7Bthis.Qa%3D.1%3Ba.Ob()%7D%2CA%3A()%3D%3E%7Bt%5B16%5D%3F(this.Qa-%3Dg%2C0%3E%3Dthis.Qa%26%26this.s(3))%3Athis.s(1)%7D%7D%2C%5B3%5D%3A%7BA%3A()%3D%3E%7Bt%5B16%5D%7C%7C4%3D%3D%3Da.ea.w%7C%7Cthis.s(1)%7D%7D%7D%2C0)%7DTb()%7Bthis.s(0)%7D%7D%0Aclass%20Ab%20extends%20kb%7Bconstructor(a)%7Bsuper(%7B%5B5%5D%3A%7BA%3A()%3D%3E%7Ba.J%26%26(this.La%3D0%2Ca.ic())%3Ba.Na%3Fthis.sb(a)%7C%7Ca.Va()%3Aa.Va()%7D%7D%2C%5B4%5D%3A%7BN%3A(b)%3D%3E%7Ba.Sb(b)%3Bthis.la%3D.25%3B-240%3D%3Da.b%26%26(this.la-%3D.06)%3Ba.xa.active%3Fa.m.Ta()%3A(this.La%2B%2B%2Ca.bc())%3Bk.Ia(new%20xb)%7D%2CA%3A()%3D%3E%7Bthis.la-%3Dg%3B0%3E%3Dthis.la%3Fthis.s(6)%3A0%3D%3D%3Dca%252%26%26k.L(new%20qb(a.v.x%2BMath.random()*a.%24%2Ca.v.y%2BMath.random()*a.ha))%7D%7D%2C%5B6%5D%3A%7BN%3A()%3D%3E%7Bthis.Ua%3D.08%3Ba.qc()%7D%2CA%3A()%3D%3E%7Ba.Na%26%260%3D%3D%3Dthis.La%26%26this.sb(a)%7C%7C(a.Va()%2Cthis.Ua-%3Dg%2C0%3E%3Dthis.Ua%26%26this.s(5))%7D%2Cvb%3A()%3D%3E%7B8!%3D%3Da.ka%26%26a.tc()%7D%7D%7D%2C5)%7Dsb(a)%7Bif(!a.da.active%7C%7C%0A!a.J%26%260%3Cthis.La)return!1%3Blet%20b%3D1*!!t%5B1%5D%7C2*!!t%5B2%5D%7C4*!!t%5B4%5D%7C8*!!t%5B8%5D%7C%7C2%3Bvar%20c%3D!a.F(a.x-1%2Ca.y)%2Cd%3D!a.F(a.x%2Ca.y-1)%2Ce%3D!a.F(a.x%2B1%2Ca.y)%3Bb%26%3D1*c%7C2*d%7C4*e%7C8*!a.J%3Breturn%200!%3D%3Db%26%265!%3D%3Db%26%2610!%3D%3Db%26%2615!%3D%3Db%3F(this.s(4%2Cb)%2C!0)%3A!1%7Dkb(a%2Cb)%7B4%3D%3D%3Dthis.w%26%26(a.ka%26%3D~b%2C0%3D%3D%3Da.ka%26%26this.s(6))%7D%7D%0Aclass%20Bb%20extends%20Z%7Bconstructor(a%2Cb)%7Bsuper(a%2Cb)%3Bthis.eb%3Da%3Bthis.fb%3Db%3Bthis.x%2B%3D4%3Bthis.y%2B%3D8%3Bthis.Z%3D3%3Bthis.sa%3D8%3Bthis.%24%3D6%3Bthis.ha%3D8%3Bthis.I%3D1%3Bthis.V%3Dthis.b%3Dthis.a%3D0%3Bthis.na%3D!0%3Bthis.cb%3D.5%3Bthis.ka%3Dthis.H%3Dthis.G%3D0%3Bthis.O%3Dthis.Ra%3D720%3Bthis.cc%3D320%3Bthis.da%3Dnew%20yb%3Bthis.xa%3Dnew%20yb%3Bthis.m%3Dnew%20nb%3Bthis.K%3Dthis.gb%3D0%3Bthis.ab%3Dthis.Ab%3D1%3Bthis.Oa%3Dnew%20zb(this)%3Bthis.ea%3Dnew%20Ab(this)%7Df()%7Bif(this.na)if(this.wa)%7Bthis.m.f()%3Bthis.cb%3DF(this.cb%2Cg%2Cg)%3Blet%20a%3Dg*this.cb%3Bthis.move(this.a*a%2Cthis.b*a)%7Delse%20this.y%3Ek.height%2B100%3Fthis.ba()%3A((this.J%3D%0Athis.F(this.x%2Cthis.y%2B1)%26%26!this.ja(this.x%2Cthis.y%2B1%2C%7Bqa%3A2%7D))%26%26this.xa.start(4)%2Ct%5B32%5D%26%26!u%5B32%5D%26%26this.da.start(4)%2Ct%5B32%5D%7C%7Cthis.da.stop()%2Cthis.Oa.f()%2Cthis.ea.f()%2C0!%3D%3Dthis.a%26%26(this.I%3DE(this.a))%2Cthis.move(this.a*g%2Cthis.b*g)%2Cthis.da.f()%2Cthis.xa.f()%2Cthis.xc()%2Cthis.m.f())%3Belse%20this.mb.f()%2Cthis.m.f()%7Dxc()%7Bthis.K%3D0%3Bthis.m.nc(E(this.a))%3B4%3D%3D%3Dthis.ea.w%3Fthis.K%3D0%3D%3D%3Dthis.a%3F0%3A3%3Athis.J%3F100%3CMath.abs(this.a)%26%26(this.K%3DMath.floor(this.gb)%252%2B1%2Cthis.gb%2B%3D.1)%3A100%3CMath.abs(this.a)%3F(this.K%3D1%2C100%3Cthis.b%26%26(this.K%3D4))%3Athis.K%3D100%3Cthis.b%3F%0A5%3A0%3Blet%20a%3D0%3Ethis.b%3FMath.min(.1%2C-this.b%2F100)%3A0%3Bthis.Ab%3D1-a%3Bthis.ab%3D1%2B2*a%3Bthis.m.bb(%5B-8%2C-7%2C-8%2C-7%2C-7%2C-8%2C-7%5D%5Bthis.K%5D)*this.ab%7DOb()%7Bthis.m.Ma(this)%7Dva()%7Bthis.m.Ha(-(Math.max(10%2CMath.abs(this.a%2F8))*E(this.a%7C%7Cthis.I))%2C-this.b%2F8)%7Dbc()%7Bthis.va()%3Bthis.Oa.Tb()%7DSb(a)%7Bthis.ka%3Da%3Bthis.b%3Dthis.a%3D0%3Ba%261%26%26this.a--%3Ba%262%26%26this.b--%3Ba%264%26%26this.a%2B%2B%3Ba%268%26%26this.b%2B%2B%3B0!%3D%3Dthis.a%26%260!%3D%3Dthis.b%3F(this.a*%3D170%2Cthis.b*%3D170)%3A(this.a*%3D240%2Cthis.b*%3D240)%3B240%3D%3Dthis.b%26%26(this.b%3D320)%3BY(Ya)%7DVa()%7Blet%20a%3D160*(-!!t%5B1%5D%2B!!t%5B4%5D)%2Cb%3Dthis.J%3F1%3A.5%3B0%3D%3D%3Da%3Fthis.a%3D%0AF(this.a%2Ca%2C800*b*g)%3A0%3D%3D%3Dthis.a%3Fthis.a%3Dthis.J%3F.1*a%3AF(this.a%2Ca%2C800*b*g)%3A(0%3Ca%3F1%3A0%3Ea%3F-1%3A0)%3D%3D%3DE(this.a)%3Fthis.a%3DF(this.a%2Ca%2C800*b*g)%3A(0%3Ca%3F1%3A0%3Ea%3F-1%3A0)!%3D%3DE(this.a)%26%26(this.a%3DF(this.a%2Ca%2C3200*b*g))%3B!this.Na%26%26this.xa.active%26%26this.da.active%26%26(this.b%3D-128%2Cthis.V%3D.4%2Cthis.da.stop()%2CY(%24a))%3Bif(!this.J)if(this.V-%3Dg%2C0%3Cthis.V%26%26t%5B32%5D)this.b%2B%3D160*g%3Belse%20if(0%3E%3Dthis.V%7C%7C!t%5B32%5D)this.b%3DF(this.b%2Cthis.cc%2Cthis.O*g)%2Cthis.V%3D0%7Dmove(a%2Cb)%7Blet%20c%3D(b)%3D%3E%7Bb.qa%262%26%26.5%3C%3DMath.abs(a)%3Fthis.ba()%3Athis.ec(b.a)%7D%2Cd%3D(a)%3D%3E%7Ba.qa%262%3Fthis.ba()%3Athis.fc(a.b)%7D%3B%0AMath.abs(a)%3EMath.abs(b)%3F(this.Ya(a%2Cc)%2Cthis.Za(b%2Cd))%3A(this.Za(b%2Cd)%2Cthis.Ya(a%2Cc))%7Dec(a%3D0)%7Ba%3D(0%3Ca%3F1%3A0%3Ea%3F-1%3A0)%3D%3D%3DE(this.a)%3Fa%3A0%3Blet%20b%3DMath.abs(a-Math.abs(this.a))%3Bthis.a%3Da%3B200%3C%3Db%26%26(this.Eb()%2Cthis.ea.kb(this%2C5))%7Dfc(a%3D0)%7Ba%3D(0%3Ca%3F1%3A0%3Ea%3F-1%3A0)%3D%3D%3DE(this.b)%3Fa%3A0%3Bif(230%3C%3DMath.abs(a-Math.abs(this.b))%7C%7C-200%3Ethis.b)%7Bthis.Eb()%3Bfor(let%20a%3D-2%3B2%3E%3Da%3Ba%2B%2B)k.L(new%20qb(this.x%2B4*a%2Cthis.y-1-2*Math.random()))%3Bk.Sa%3D320%3D%3DMath.abs(this.b)%3F2%3A1%3Bthis.V%3D0%3Bthis.ea.kb(this%2C10)%7Dthis.b%3Da%7DEb()%7Bm.Ja(.4)%3BY(Za%2C.2)%7Dic()%7Bthis.O%3Dthis.Ra%7Dqc()%7Bthis.O%3D%0A0%7Dtc()%7Bthis.O%3Dthis.Ra%7DYa(a%2Cb)%7Bthis.G%2B%3Da%3Ba%3DMath.round(this.G)%3Bif(0!%3D%3Da)%7Bthis.G-%3Da%3Blet%20c%3D0%3Ca%3F1%3A0%3Ea%3F-1%3A0%3Bfor(%3B0!%3D%3Da%3B)%7Blet%20d%3Dthis.F(this.x%2Bc%2Cthis.y)%3Bif(d)%7Bb%26%26b(d)%3Bbreak%7Delse%20this.x%2B%3Dc%2Ca-%3Dc%7D%7D%7DZa(a%2Cb)%7Bthis.H%2B%3Da%3Ba%3DMath.round(this.H)%3Bif(0!%3D%3Da)%7Bthis.H-%3Da%3Blet%20c%3D0%3Ca%3F1%3A0%3Ea%3F-1%3A0%3Bfor(%3B0!%3D%3Da%3B)%7Blet%20d%3Dthis.F(this.x%2Cthis.y%2Bc)%3Bif(d)%7Bb%26%26b(d)%3Bbreak%7Delse%20this.y%2B%3Dc%2Ca-%3Dc%7D%7D%7Dja(a%2Cb%2Cc)%7Breturn%20k.ja(a-this.Z%2Cb-this.sa%2Cthis.%24%2Cthis.ha%2Cc)%7DF(a%2Cb)%7Breturn%20k.F(a-this.Z%2Cb-this.sa%2Cthis.%24%2Cthis.ha)%7Dget%20v()%7Breturn%7Bx%3Athis.x-this.Z%2Cy%3Athis.y-%0Athis.sa%2Cwidth%3Athis.%24%2Cheight%3Athis.ha%2Cta%3Athis.x-this.Z%2Bthis.%24%2F2%2Caa%3Athis.y-this.sa%2Bthis.ha%2F2%7D%7Dget%20Na()%7Breturn%203%3D%3D%3Dthis.Oa.w%7Dget%20tb()%7Breturn%204%3D%3D%3Dthis.ea.w%7Dub(a)%7Breturn%20a.y%3D%3D%3Dthis.y%26%26this.x-this.Z%2Bthis.%24%3Ea.x%26%26this.x-this.Z%3Ca.x%2Ba.width%7Dc()%7Bthis.m.c()%3Bthis.na%3Fib(Wa%2Cthis.x%2Cthis.y%2Cthis.K%2Cthis.I*this.Ab%2Cthis.ab)%3Athis.mb.c()%7Dba()%7Bthis.na%26%26(this.na%3D!1%2Cthis.mb%3Dnew%20pb(this.x%2Cthis.v.aa)%2Cthis.va())%7Doc()%7Bthis.wa%7C%7C(this.wa%3D!0%2Cthis.Ub%3Dnew%20vb%2Ck.L(this.Ub)%2Cm.Ja(1)%2CY(bb%2C.2%2C!0))%7D%7D%0Aclass%20Cb%7Bconstructor()%7Bthis.o%3D%7B%7D%7DKa(a)%7Bthis.o%5Ba.x%2B%22%3B%22%2Ba.y%5D%3Da%7Du(a%2Cb%2Cc%3D0)%7Breturn(a%3Dthis.o%5Ba%2B%22%3B%22%2Bb%5D)%3Fc%3Fa.qa%26c%3Fa%3Anull%3Aa%3Anull%7Dob(a)%7Bfor(let%20b%20in%20this.o)a(this.o%5Bb%5D)%7D%7D%0Aclass%20Db%7Bconstructor(a)%7Bthis.ia%3D%7B%7D%3Bthis.o%3Da%7Dasync%20pa()%7Bthis.o.ob((a)%3D%3E%7Blet%20b%3DMath.floor(a.x%2F60)%2Cc%3DMath.floor(a.y%2F60)%2Cd%3Db%2B%22%3B%22%2Bc%3Bthis.ia%5Bd%5D%3Dthis.ia%5Bd%5D%7C%7C%7Bx%3Ab%2Cy%3Ac%2Co%3A%5B%5D%7D%3Bthis.ia%5Bd%5D.o.push(a)%7D)%3Bawait%20Promise.all(Object.values(this.ia).map((a)%3D%3Ethis.dc(a)))%7Dasync%20dc(a)%7Ba.C%3Dawait%20J(480%2C480%2C(b)%3D%3E%7Bb.translate(480*-a.x%2C480*-a.y)%3Ba.o.forEach((a)%3D%3Ea.c(this.o%2Cb))%7D)%7Dc()%7BI(Math.floor(m.Ib(0)%2F8%2F60)%2CMath.floor(m.Jb(0)%2F8%2F60)%2CMath.floor(m.Ib(R.width-1)%2F8%2F60)%2CMath.floor(m.Jb(R.height-1)%2F8%2F60)%2C(a%2Cb)%3D%3E%7Blet%20c%3Dthis.ia%5B%60%24%7Ba%7D%3B%24%7Bb%7D%60%5D%3B%0Ac%26%26W(c.C%2C480*a%2C480*b)%7D)%7D%7D%0Aclass%20Eb%7Bconstructor(a%2Cb)%7Bthis.z%3Da%3Bthis.color%3Db%3Ba%3DS.createRadialGradient(R.width%2F2%2CR.height%2F2%2C400%2CR.width%2F2%2CR.height%2F2%2C1100)%3Ba.addColorStop(0%2CEa(b%2C0))%3Ba.addColorStop(1%2Cb)%3Bthis.Xb%3Da%7Dasync%20pa()%7Bthis.C%3Dawait%20J(80%2C80%2C(a)%3D%3E%7Ba.fillStyle%3Dthis.color%3Ba.beginPath()%3Bfor(let%20b%3D0%3B80%3Eb%3Bb%2B%2B)%7Blet%20b%3D1%2BH(8)%2Cd%3D1%2BH(8)%3Ba.rect(H(80-b)%2CH(80-d)%2Cb%2Cd)%7Da.fill()%7D)%7Dc()%7Blet%20%7Bz%3Aa%2CC%3Ab%2CXb%3Ac%7D%3Dthis%3BU(a)%3Blet%20d%3Da%2F15*80%3BI(Math.floor(-T%5B4%5D%2FT%5B0%5D%2Fd)%2CMath.floor(-T%5B5%5D%2FT%5B3%5D%2Fd)%2CMath.floor((R.width%2FT%5B0%5D-T%5B4%5D%2FT%5B0%5D)%2Fd)%2CMath.floor((R.height%2FT%5B3%5D-%0AT%5B5%5D%2FT%5B3%5D)%2Fd)%2C(a%2Cc)%3D%3E%7BW(b%2Ca*d%2Cc*d%2Cd%2Cd)%7D)%3BS.setTransform(1%2C0%2C0%2C1%2C0%2C0)%3BX(c%2C0%2C0%2CR.width%2CR.height)%7D%7Dclass%20Fb%7Basync%20pa()%7Bthis.P%3D%5Bnew%20Eb(900%2Caa)%2Cnew%20Eb(300%2Cba)%5D%3Bawait%20Promise.all(this.P.map((a)%3D%3Ea.pa()))%7Dc()%7BX(n%2C0%2C0%2CR.width%2CR.height)%3Bthis.P.forEach((a)%3D%3Ea.c())%7D%7D%0Aclass%20Gb%7Bconstructor()%7Bthis.o%3Dnew%20Cb%3Bthis.Fb%3Dnew%20Set%3Bthis.P%3D%7B%5B120%5D%3Anew%20Set%2C%5B100%5D%3Anew%20Set%2C%5B50%5D%3Anew%20Set%7D%3Bthis.ya%3Dnew%20Set%3Bthis.D%3Dnew%20Set%3Bthis.Hb%3Dnew%20Db(this.o)%3Bthis.jb%3Dnew%20Fb%3Bthis.Ia(new%20rb(%22%23fff%22%2C1))%7Dasync%20Zb()%7Bawait%20this.jb.pa()%3Bawait%20this.Hb.pa()%3Bfor(let%20a%20of%20this.D)a.U%26%26await%20a.U()%7Dvc()%7Bthis.height%3Dthis.width%3D0%3Bthis.o.ob((a)%3D%3E%7Bthis.width%3DMath.max(this.width%2C8*a.x)%3Bthis.height%3DMath.max(this.height%2C8*a.y)%7D)%7Dpc(a)%7Bl%3Da%3Bthis.xb%3Da.eb%3Bthis.yb%3Da.fb%7Djc()%7Bfor(let%20a%20of%20this.D)a.reset%26%26a.reset()%3Bl%3Dnew%20Bb(this.xb%2C%0Athis.yb)%7DL(a%2Cb%3D100)%7Bthis.P%5Bb%5D.add(a)%3Bthis.D.add(a)%3Ba.Mb%3Db%7Dgc(a)%7Bthis.D.delete(a)%3Bthis.P%5Ba.Mb%5D.delete(a)%7Dib(a)%7Bthis.Fb.add(a)%3Bthis.L(a)%7DKa(a)%7Bthis.o.Ka(a)%7DIa(a)%7Bthis.ya.add(a)%7Dhc(a)%7Bthis.ya.delete(a)%7Dja(a%2Cb%2Cc%2Cd%2C%7Bqa%3Ae%3D7%2CWa%3Af%3Dnull%7D%3D%7B%7D)%7Bif(e%261%26%26(f%3Dthis.F(a%2Cb%2Cc%2Cd%2C%7BWa%3Af%7D)))return%20f%3Bvar%20p%3DMath.floor(a%2F8)%3Bf%3DMath.floor(b%2F8)%3Ba%3DMath.floor((a%2Bc-1)%2F8)%3Bb%3DMath.floor((b%2Bd-1)%2F8)%3Bfor(d%3Dp%3Bd%3C%3Da%3Bd%2B%2B)for(c%3Df%3Bc%3C%3Db%3Bc%2B%2B)if(p%3Dthis.o.u(d%2Cc%2Ce))return%20p%3Breturn%20null%7DF(a%2Cb%2Cc%2Cd%2C%7BWa%3Ae%3Dnull%7D%3D%7B%7D)%7Bvar%20f%3DMath.floor(a%2F8)%3Blet%20p%3DMath.floor(b%2F%0A8)%2Cr%3DMath.floor((a%2Bc-1)%2F8)%2CO%3DMath.floor((b%2Bd-1)%2F8)%3Bfor(%3Bf%3C%3Dr%3Bf%2B%2B)for(let%20a%3Dp%3Ba%3C%3DO%3Ba%2B%2B)%7Blet%20b%3Dthis.o.u(f%2Ca%2C1)%3Bif(b)return%20b%7Dfor(let%20f%20of%20this.Fb)if(f!%3D%3De%26%26f.T%26%26G(%7Bx%3Aa%2Cy%3Ab%2Cwidth%3Ac%2Cheight%3Ad%7D%2Cf))return%20f%3Breturn%20null%7Df()%7Bif(this.Sa)this.Sa--%3Belse%7Bfor(let%20a%20of%20this.D)a.f()%3Bl%26%26l.f()%3Bfor(let%20a%20of%20this.ya)a.f()%3Bm.f()%7D%7Dc()%7BS.setTransform(1%2C0%2C0%2C1%2C0%2C0)%3Bthis.jb.c()%3BU(120)%3Bfor(let%20a%20of%20this.P%5B120%5D)a.c()%3BU(100)%3Bthis.Hb.c()%3Bfor(let%20a%20of%20this.P%5B100%5D)a.c()%3Bl%26%26l.c()%3BU(50)%3Bfor(let%20a%20of%20this.P%5B50%5D)a.c()%3BS.setTransform(1%2C%0A0%2C0%2C1%2C0%2C0)%3Bfor(let%20a%20of%20this.ya)a.c()%7D%7D%0Aclass%20Hb%7Bconstructor()%7Bthis.fa%3Dthis.Ca%3Dthis.Db%3Dthis.Cb%3Dthis.Ea%3Dthis.Da%3Dthis.R%3Dthis.Gb%3Dthis.y%3Dthis.x%3D0%3Bthis.scale%3D2%3Bthis.ca%3D1%7Df()%7Bthis.zc()%3Bthis.yc()%3Bthis.wc()%3Bthis.x%3Dthis.Gb%2Bthis.Da%3Bthis.y%3Dthis.R%2Bthis.Ea%7Dwc()%7Blet%20a%3DMath.min(6%2C8*this.fa*this.fa)%2Cb%3D2*Math.random()*Math.PI%3Bthis.Ca%26%26(this.Cb%3Da*Math.cos(b)%2Cthis.Db%3Da*Math.sin(b))%3Bthis.Ca%3D!this.Ca%3Bthis.Da%2B%3D.75*(this.Cb-this.Da)%3Bthis.Ea%2B%3D.75*(this.Db-this.Ea)%3Bthis.fa%3DF(this.fa%2C0%2Cg)%7Dyc()%7Blet%20a%3Dl.v.aa%2Cb%3Dthis.pb()%2F10%2Cc%3Dthis.pb()%2F6%2Cd%3D(b)%3D%3E%7Bthis.R%2B%3D(a%2Bb-this.R)%2F%0A8%7D%3Bl.J%3Fd(0)%3Aa%3Cthis.y-c%3Fthis.R%3Da%2Bc%3Aa%3Ethis.y%2Bc%3Fthis.R%3Da-c%3Aa%3Cthis.y-b%3Fd(b)%3Aa%3Ethis.y%2Bb%26%26d(-b)%3Bthis.R%3DMath.max(0%2CMath.min(this.R%2Ck.height))%3Bthis.Gb%3DMath.max(0%2CMath.min(l.x%2Ck.width))%7Dzc()%7Bthis.ca%3DF(this.ca%2C0%2Cg%2F4)%3Bthis.scale%3D4-2*this.ca*this.ca%7DJa(a)%7Bthis.fa%3DMath.min(1%2Cthis.fa%2Ba)%3Bthis.Ca%3D!0%7Dpb()%7Breturn%20R.height%2Fthis.scale%7DIb(a)%7Breturn(a-R.width%2F2)%2Fthis.scale%2Bthis.x%7DJb(a)%7Breturn(a-R.height%2F2)%2Fthis.scale%2Bthis.y%7D%7Dclass%20Ib%7Basync%20load()%7Bk%3Dnew%20Gb%3Bm%3Dnew%20Hb%3Bthis.Vb()%3Bawait%20k.Zb()%7D%7D%0Aclass%20Jb%7Bconstructor(a%2Cb%2Cc)%7Bthis.x%3Da%3Bthis.y%3Db%3Bthis.qa%3Dc%7D%7Dclass%20Kb%20extends%20Jb%7Bconstructor(a%2Cb)%7Bsuper(a%2Cb%2C1)%7Dc(a%2Cb)%7Ba%3D(this.x%2524%2B24)%2524%2F24%3Blet%20c%3D(this.y%2524%2B24)%2524%2F24%3Bb.globalAlpha%3D1-a*(1-a)*c*(1-c)-.01%2B.02*Math.random()%3Bb.fillStyle%3Dq%3Bb.fillRect(8*this.x%2C8*this.y%2C8%2C8)%7D%7D%0Aclass%20Lb%20extends%20Jb%7Bconstructor(a%2Cb)%7Bsuper(a%2Cb%2C3)%7DWb(a)%7Blet%20b%3Dthis.x%2Cc%3Dthis.y%2Cd%3Da.u(b%2Cc-1%2C2)%7C%7Ca.u(b%2Cc%2B1%2C2)%2Ce%3Da.u(b-1%2Cc%2C2)%7C%7Ca.u(b%2B1%2Cc%2C2)%3Breturn%20a.u(b-1%2Cc%2C1)%26%26d%3F3%3Aa.u(b%2B1%2Cc%2C1)%26%26d%3F1%3Aa.u(b%2Cc-1%2C1)%26%26e%3F0%3Aa.u(b%2Cc%2B1%2C1)%26%26e%3F2%3Aa.u(b-1%2Cc%2C1)%3F3%3Aa.u(b%2B1%2Cc%2C1)%3F1%3Aa.u(b%2Cc-1%2C1)%3F0%3Aa.u(b%2Cc%2B1%2C1)%3F2%3A0%7Dc(a%2Cb)%7Bb.fillStyle%3Dq%3Blet%20c%3D8*this.x%2Cd%3D8*this.y%3Ba%3Dthis.Wb(a)%3Bswitch(a)%7Bcase%200%3Acase%202%3Afor(var%20e%3D0%3B8%3Ee%3Be%2B%3D2)%7Bvar%20f%3De%2F2%252%3Bb.fillRect(c%2Be%2Cd%2B(2%3D%3D%3Da%3Ff%3A0)%2C1%2C8-f)%7Dbreak%3Bcase%201%3Acase%203%3Afor(e%3D0%3B8%3Ee%3Be%2B%3D2)f%3De%2F2%252%2Cb.fillRect(c%2B(1%3D%3D%3Da%3Ff%3A0)%2C%0Ad%2Be%2C8-f%2C1)%7Db.stroke()%7D%7D%0Aclass%20Mb%20extends%20Z%7Bconstructor(a%2Cb%2Cc%2Cd%2Ce%2Cf)%7Bsuper(a%2Cb%2Cc%2Cd)%3Bthis.eb%3Dthis.x%3Bthis.fb%3Dthis.y%3Bthis.rc%3De%3Bthis.sc%3Df%3Bthis.reset()%3Bthis.T%3D!0%7Dreset()%7Bthis.x%3Dthis.eb%3Bthis.y%3Dthis.fb%3Bthis.a%3Dthis.rc%3Bthis.b%3Dthis.sc%3Bthis.H%3Dthis.G%3D0%3Bthis.T%3D!0%7Dasync%20U()%7Bthis.C%3Dawait%20J(this.width%2Cthis.height%2C(a)%3D%3E%7BI(0%2C0%2Cthis.width%2F8-1%2Cthis.height%2F8-1%2C(b%2Cc)%3D%3E%7Ba.fillStyle%3DEa(q%2C.94-.01%2B.02*Math.random())%3Ba.fillRect(8*b%2C8*c%2C8%2C8)%7D)%7D)%7Df()%7Bthis.T%3D!1%3Bthis.G%2B%3Dthis.a*g%3Bthis.H%2B%3Dthis.b*g%3Blet%20a%3DMath.round(this.G)%2Cb%3DMath.round(this.H)%3Bthis.G-%3Da%3B%0Athis.H-%3Db%3Bvar%20c%3Dthis.ja(this.x%2Ba%2Cthis.y%2Bb)%3Bif(c)%7Bif(this.a%26%26E(c.a)%3D%3D%3D-E(this.a)%7C%7Cthis.b%26%26E(c.b)%3D%3D%3D-E(this.b))c.a*%3D-1%2Cc.b*%3D-1%3B0%3Cthis.a%3Fa-%3D(this.x%2Ba)%258*2%3A0%3Ethis.a%3Fa-%3D2*((this.x%2Ba)%258-8)%3Ab%3D0%3Cthis.b%3Fb-(this.y%2Bb)%258*2%3Ab-2*((this.y%2Bb)%258-8)%3Bthis.a*%3D-1%3Bthis.b*%3D-1%7Dc%3Dl.ub(this)%3Bthis.x%2B%3Da%3Bthis.y%2B%3Db%3Bl.na%26%26(c%3Fl.move(a%2C0%3Eb%7C%7C!l.tb%3Fb%3A0)%3AG(l.v%2Cthis)%26%26(a%3Fl.Ya(0%3Ca%3Fthis.x%2Bthis.width-l.v.x%3Athis.x-l.v.x-l.v.width%2C()%3D%3E%7Bl.ba()%7D)%3Ab%26%26l.Za(0%3Cb%3Fthis.y%2Bthis.height-l.v.y%3Athis.y-l.v.y-l.v.height%2C()%3D%3E%7Bl.ba()%7D)))%3Bthis.T%3D!0%7Dja(a%2Cb)%7Breturn%20k.F(a%2C%0Ab%2Cthis.width%2Cthis.height%2C%7BWa%3Athis%7D)%7Dc()%7BW(this.C%2Cthis.x%2Cthis.y)%7D%7Dlet%20Nb%3D0%2COb%3D%22%23f00%20%23fff%20%230f0%20%2300f%20%230ff%20%23ff0%20%23f0f%22.split(%22%20%22)%3B%0Aclass%20Pb%7Bconstructor(a%2Cb)%7Bthis.qb%3Da%3Bthis.rb%3Db%3Ba%3D5%2B10*Math.random()%3Bb%3D2*Math.random()*Math.PI%3Bthis.x%3Dthis.qb%2BMath.cos(b)*a%3Bthis.y%3Dthis.rb%2BMath.sin(b)*a%3Bthis.a%3D10*Math.sin(b)%3Bthis.b%3D10*-Math.cos(b)%3Bthis.O%3D500%3Bthis.color%3DOb%5BNb%2B%2B%25Ob.length%5D%7Df()%7Bthis.x%2B%3Dthis.a*g%3Bthis.y%2B%3Dthis.b*g%3Bthis.Yb(this.O%2Cthis.qb%2Cthis.rb)%3Bl.wa%26%26(this.O%3DF(this.O%2C100%2C100))%7DYb(a%2Cb%2Cc)%7Bb%3Dthis.x-b%3Bc%3Dthis.y-c%3Blet%20d%3DMath.max(1%2Cb*b%2Bc*c)%3Bthis.a%2B%3D-a*b%2Fd*g%3Bthis.b%2B%3D-a*c%2Fd*g%7D%7D%0Aclass%20Qb%20extends%20Z%7Bconstructor(a%2Cb)%7Bsuper(a%2Cb)%3Bthis.zb%3D%5B%5D%3Bfor(a%3D0%3B20%3Ea%3Ba%2B%2B)this.zb.push(new%20Pb(this.x%2B4%2Cthis.y%2B4))%3Bthis.alpha%3D1%7Df()%7Bvar%20a%3Dl.v%3Bvar%20b%3DMath.abs(this.x%2B4-a.ta)%3Ba%3DMath.abs(this.y%2B4-a.aa)%3Bb%3Db*b%2Ba*a%3B256%3Eb%26%26(l.tb%7C%7C260%3C%3Dl.b)%26%26l.oc()%3Bl.wa%26%26(this.alpha%3DF(this.alpha%2C0%2Cg))%7Dc()%7BS.globalAlpha%3Dthis.alpha%3Bfor(let%20a%3D0%3B20%3Ea%3Ba%2B%2B)%7Blet%20b%3Dthis.zb%5Ba%5D%2Cc%3DMath.round(Math.random()*Math.random()*8)%3Bfor(let%20a%3D0%3Ba%3Cc%3Ba%2B%2B)b.f()%3BX(b.color%2Cb.x-1%2Cb.y-1%2C2%2C2)%7DV()%7D%7D%0Afunction%20Rb(a)%7Blet%20b%3D0%2Cc%3D0%2Cd%3D0%2Ce%3D0%3Bfor(let%20f%3D0%3Bf%3Ca.length%3Bf%2B%2B)%22%20%22%3D%3D%3Da%5Bf%5D%3Fd%2B%3D6%3Aa%5Bf%5D.match(%2F%5Cn%7C%23%2F)%3F(d%3D0%2Ce%2B%3D6)%3A(d%2B%3D6%2Cb%3DMath.max(d%2Cb)%2Cc%3DMath.max(e%2B6%2Cc))%3Breturn%7Bwidth%3Ab%2Cheight%3Ac%7D%7Dfunction%20Sb(a)%7Blet%20%7Bwidth%3Ab%2Cheight%3Ac%7D%3DRb(a)%3Breturn%20J(b%2B1%2Cc%2B1%2C(d)%3D%3E%7Bd.fillStyle%3Dn%3Bd.fillRect(0%2C0%2Cb%2B1%2Cc%2B1)%3B%7Blet%20b%3D1%2Cc%3D1%3Bfor(let%20e%3D0%3Be%3Ca.length%3Be%2B%2B)%22%20%22%3D%3D%3Da%5Be%5D%3Fb%2B%3D6%3Aa%5Be%5D.match(%2F%5Cn%7C%23%2F)%3F(b%3D1%2Cc%2B%3D6)%3A(d.drawImage(Ua.C%2C6*(a.charCodeAt(e)-65)%2C0%2C5%2C5%2Cb%2Cc%2C5%2C5)%2Cb%2B%3D6)%7D%7D)%7D%0Aclass%20Tb%20extends%20Z%7Bconstructor(a%2Cb%2Cc)%7Bsuper(a%2Cb)%3Bthis.text%3Dc%7Dasync%20U()%7Bthis.C%3Dawait%20Sb(this.text)%7Dc()%7BW(this.C%2Cthis.x%2Cthis.y)%7D%7D%0Avar%20Ub%3D%5B%7Bga%3A%7B1%3A%5B%5B0%2C0%2C56%2C50%5D%2C%5B126%2C56%2C23%2C34%5D%2C%5B149%2C56%2C25%2C22%5D%2C%5B149%2C63%2C33%2C15%5D%2C%5B182%2C63%2C16%2C11%5D%2C%5B198%2C60%2C8%2C14%5D%2C%5B206%2C57%2C11%2C17%5D%2C%5B217%2C62%2C13%2C12%5D%2C%5B222%2C74%2C28%2C24%5D%2C%5B250%2C66%2C9%2C32%5D%2C%5B270%2C74%2C16%2C16%5D%2C%5B286%2C82%2C16%2C8%5D%2C%5B294%2C90%2C48%2C8%5D%2C%5B30%2C50%2C96%2C10%5D%2C%5B301%2C15%2C25%2C43%5D%2C%5B318%2C58%2C8%2C28%5D%2C%5B318%2C74%2C16%2C12%5D%2C%5B334%2C63%2C8%2C7%5D%2C%5B340%2C15%2C12%2C46%5D%2C%5B340%2C15%2C32%2C40%5D%2C%5B342%2C64%2C8%2C6%5D%2C%5B350%2C63%2C11%2C7%5D%2C%5B361%2C58%2C23%2C12%5D%2C%5B374%2C67%2C66%2C31%5D%2C%5B440%2C67%2C22%2C7%5D%2C%5B446%2C15%2C48%2C33%5D%2C%5B462%2C58%2C8%2C16%5D%2C%5B55%2C45%2C27%2C25%5D%2C%5B92%2C60%2C34%2C4%5D%5D%2C2%3A%5B%5B230%2C73%2C20%2C1%5D%2C%5B342%2C63%2C8%2C1%5D%2C%5B352%2C55%2C20%2C1%5D%2C%5B384%2C66%2C30%2C1%5D%5D%7D%2CD%3A%5B%5B3%2C59%2C%0A44%5D%2C%5B4%2C246%2C66%2C4%2C4%2C-60%2C0%5D%2C%5B5%2C466%2C53%5D%2C%5B6%2C157%2C46%2C%22WHAT%20IS%20THE%20CAUSE%20OF%20THIS%5E%22%5D%2C%5B6%2C180%2C59%2C%22PRESS%20SPACE%20TO%20JUMP%22%5D%2C%5B6%2C233%2C50%2C%22AND%20WHERE%20DID%20THESE%20OBSTACLES%20COME%20FROM%5E%22%5D%2C%5B6%2C295%2C78%2C%22HOLD%20SHIFT%20TO%20SUMMON%20WINGS%22%5D%2C%5B6%2C344%2C82%2C%22USING%20YOUR%20WINGS%5D%20PRESS%23SPACE%20TO%20DASH%22%5D%2C%5B6%2C451%2C57%2C%22LOOK%20AT%20THAT%5B%22%5D%2C%5B6%2C470%2C54%2C%22DASH%20THROUGH%20IT%20TO%20RELEASE%23THE%20ESSENCE%20OF%20THIS%20PARADISE%5B%22%5D%2C%5B6%2C86%2C40%2C%22PARADISE%20HAS%20BEEN%20TURNED%20OFFLINE%5C%5C%5C%5C%5C%5C%22%5D%2C%5B7%2C225%2C61%5D%2C%5B7%2C337%2C62%5D%2C%5B7%2C337%2C89%5D%2C%5B8%2C334%2C74%2C8%2C5%5D%5D%7D%2C%7Bga%3A%7B1%3A%5B%5B0%2C0%2C54%2C50%5D%2C%5B106%2C49%2C6%2C52%5D%2C%5B112%2C0%2C22%2C46%5D%2C%5B118%2C%0A49%2C6%2C52%5D%2C%5B130%2C59%2C38%2C42%5D%2C%5B136%2C50%2C8%2C51%5D%2C%5B149%2C45%2C13%2C4%5D%2C%5B153%2C0%2C38%2C37%5D%2C%5B153%2C0%2C42%2C34%5D%2C%5B168%2C45%2C11%2C56%5D%2C%5B179%2C42%2C3%2C25%5D%2C%5B179%2C79%2C13%2C22%5D%2C%5B182%2C45%2C14%2C22%5D%2C%5B196%2C39%2C3%2C28%5D%2C%5B199%2C36%2C6%2C31%5D%2C%5B205%2C47%2C14%2C20%5D%2C%5B212%2C67%2C7%2C14%5D%2C%5B213%2C0%2C11%2C38%5D%2C%5B216%2C42%2C27%2C10%5D%2C%5B219%2C75%2C7%2C15%5D%2C%5B226%2C63%2C6%2C6%5D%2C%5B226%2C80%2C6%2C6%5D%2C%5B226%2C95%2C6%2C6%5D%2C%5B232%2C69%2C7%2C6%5D%2C%5B232%2C87%2C7%2C3%5D%2C%5B239%2C58%2C34%2C22%5D%2C%5B273%2C0%2C17%2C80%5D%2C%5B37%2C50%2C17%2C16%5D%2C%5B54%2C42%2C10%2C24%5D%2C%5B60%2C0%2C74%2C24%5D%2C%5B64%2C47%2C16%2C19%5D%2C%5B80%2C34%2C8%2C67%5D%2C%5B88%2C24%2C24%2C6%5D%2C%5B88%2C55%2C42%2C46%5D%2C%5B88%2C95%2C124%2C6%5D%2C%5B94%2C38%2C7%2C7%5D%5D%2C2%3A%5B%5B101%2C38%2C1%2C7%5D%2C%5B111%2C30%2C1%2C16%5D%2C%5B112%2C46%2C22%2C1%5D%2C%5B112%2C%0A54%2C6%2C1%5D%2C%5B124%2C54%2C6%2C1%5D%2C%5B130%2C58%2C6%2C1%5D%2C%5B144%2C58%2C24%2C1%5D%2C%5B148%2C45%2C1%2C4%5D%2C%5B149%2C44%2C13%2C1%5D%2C%5B149%2C49%2C13%2C1%5D%2C%5B153%2C37%2C38%2C1%5D%2C%5B162%2C45%2C1%2C4%5D%2C%5B178%2C42%2C1%2C3%5D%2C%5B179%2C41%2C3%2C1%5D%2C%5B182%2C42%2C1%2C3%5D%2C%5B191%2C34%2C1%2C3%5D%2C%5B191%2C34%2C4%2C1%5D%2C%5B192%2C67%2C20%2C1%5D%2C%5B192%2C79%2C1%2C16%5D%2C%5B195%2C39%2C1%2C6%5D%2C%5B196%2C38%2C3%2C1%5D%2C%5B205%2C46%2C11%2C1%5D%2C%5B213%2C38%2C11%2C1%5D%2C%5B219%2C52%2C24%2C1%5D%2C%5B219%2C74%2C7%2C1%5D%2C%5B219%2C90%2C7%2C1%5D%2C%5B224%2C0%2C1%2C38%5D%2C%5B232%2C68%2C7%2C1%5D%2C%5B232%2C86%2C7%2C1%5D%2C%5B232%2C90%2C7%2C1%5D%2C%5B239%2C57%2C33%2C1%5D%2C%5B272%2C0%2C1%2C58%5D%2C%5B60%2C24%2C28%2C1%5D%2C%5B64%2C46%2C16%2C1%5D%2C%5B88%2C30%2C24%2C1%5D%2C%5B88%2C54%2C18%2C1%5D%2C%5B93%2C38%2C1%2C7%5D%2C%5B94%2C37%2C7%2C1%5D%2C%5B94%2C45%2C7%2C1%5D%5D%7D%2CD%3A%5B%5B3%2C56%2C41%5D%2C%5B5%2C182%2C75%5D%2C%5B7%2C139%2C%0A49%5D%2C%5B7%2C234%2C41%5D%2C%5B8%2C243%2C38%2C29%2C8%5D%5D%7D%2C%7Bga%3A%7B1%3A%5B%5B0%2C1%2C50%2C50%5D%2C%5B112%2C1%2C8%2C43%5D%2C%5B112%2C57%2C8%2C31%5D%2C%5B120%2C66%2C10%2C22%5D%2C%5B130%2C75%2C62%2C13%5D%2C%5B134%2C1%2C71%2C58%5D%2C%5B192%2C66%2C21%2C22%5D%2C%5B205%2C88%2C8%2C9%5D%2C%5B213%2C70%2C13%2C27%5D%2C%5B226%2C77%2C93%2C20%5D%2C%5B237%2C64%2C5%2C2%5D%2C%5B257%2C1%2C4%2C65%5D%2C%5B286%2C54%2C13%2C12%5D%2C%5B309%2C1%2C6%2C61%5D%2C%5B319%2C61%2C9%2C5%5D%2C%5B319%2C71%2C9%2C26%5D%2C%5B328%2C92%2C23%2C5%5D%2C%5B337%2C1%2C14%2C86%5D%2C%5B337%2C1%2C52%2C85%5D%2C%5B344%2C97%2C7%2C21%5D%2C%5B351%2C106%2C47%2C12%5D%2C%5B365%2C1%2C3%2C91%5D%2C%5B389%2C1%2C12%2C15%5D%2C%5B395%2C64%2C15%2C22%5D%2C%5B398%2C92%2C6%2C26%5D%2C%5B404%2C105%2C19%2C13%5D%2C%5B408%2C1%2C41%2C15%5D%2C%5B408%2C23%2C41%2C4%5D%2C%5B415%2C57%2C34%2C20%5D%2C%5B423%2C27%2C2%2C91%5D%2C%5B425%2C1%2C24%2C117%5D%2C%5B50%2C44%2C8%2C35%5D%2C%5B56%2C1%2C32%2C%0A32%5D%2C%5B58%2C50%2C9%2C29%5D%2C%5B67%2C59%2C13%2C20%5D%2C%5B73%2C33%2C7%2C16%5D%2C%5B80%2C1%2C8%2C53%5D%2C%5B80%2C60%2C8%2C19%5D%2C%5B88%2C67%2C24%2C12%5D%5D%2C2%3A%5B%5B112%2C56%2C8%2C1%5D%2C%5B226%2C76%2C93%2C1%5D%2C%5B237%2C63%2C5%2C1%5D%2C%5B286%2C53%2C13%2C1%5D%2C%5B319%2C60%2C9%2C1%5D%2C%5B319%2C70%2C9%2C1%5D%2C%5B328%2C61%2C1%2C5%5D%2C%5B328%2C71%2C1%2C21%5D%2C%5B336%2C1%2C1%2C86%5D%2C%5B337%2C0%2C64%2C1%5D%2C%5B351%2C105%2C47%2C1%5D%2C%5B351%2C86%2C14%2C1%5D%2C%5B368%2C86%2C21%2C1%5D%2C%5B389%2C16%2C12%2C1%5D%2C%5B395%2C63%2C15%2C1%5D%2C%5B395%2C86%2C15%2C1%5D%2C%5B398%2C91%2C6%2C1%5D%2C%5B408%2C0%2C41%2C1%5D%2C%5B408%2C16%2C8%2C1%5D%2C%5B408%2C22%2C8%2C1%5D%2C%5B408%2C27%2C15%2C1%5D%2C%5B58%2C49%2C9%2C1%5D%2C%5B72%2C33%2C1%2C16%5D%2C%5B80%2C59%2C8%2C1%5D%2C%5B88%2C66%2C24%2C1%5D%5D%7D%2CD%3A%5B%5B3%2C52%2C43%5D%2C%5B4%2C112%2C49%2C8%2C3%2C0%2C100%5D%2C%5B4%2C139%2C65%2C5%2C7%2C0%2C120%5D%2C%5B4%2C144%2C64%2C5%2C7%2C0%2C120%5D%2C%5B4%2C%0A149%2C63%2C5%2C7%2C0%2C120%5D%2C%5B4%2C154%2C62%2C5%2C7%2C0%2C120%5D%2C%5B4%2C159%2C61%2C5%2C7%2C0%2C120%5D%2C%5B4%2C164%2C60%2C5%2C7%2C0%2C120%5D%2C%5B4%2C175%2C64%2C14%2C10%2C0%2C100%5D%2C%5B4%2C215%2C66%2C4%2C4%2C100%2C0%5D%2C%5B4%2C351%2C92%2C14%2C5%2C0%2C100%5D%2C%5B4%2C368%2C92%2C30%2C5%2C0%2C100%5D%2C%5B4%2C400%2C55%2C5%2C6%2C0%2C-200%5D%2C%5B4%2C404%2C92%2C19%2C5%2C0%2C100%5D%2C%5B4%2C419%2C77%2C4%2C4%2C-120%2C0%5D%2C%5B4%2C58%2C44%2C5%2C5%2C60%2C0%5D%2C%5B4%2C72%2C49%2C5%2C5%2C60%2C0%5D%2C%5B4%2C89%2C60%2C7%2C3%2C60%2C0%5D%2C%5B5%2C421%2C19%5D%2C%5B7%2C123%2C65%5D%2C%5B7%2C208%2C65%5D%2C%5B7%2C339%2C91%5D%2C%5B8%2C222%2C66%2C4%2C4%5D%5D%7D%2C%7Bga%3A%7B1%3A%5B%5B0%2C0%2C26%2C105%5D%2C%5B0%2C0%2C41%2C67%5D%2C%5B110%2C44%2C16%2C17%5D%2C%5B134%2C0%2C95%2C56%5D%2C%5B134%2C56%2C15%2C7%5D%2C%5B134%2C70%2C8%2C19%5D%2C%5B142%2C81%2C43%2C8%5D%2C%5B149%2C0%2C26%2C66%5D%2C%5B185%2C70%2C17%2C19%5D%2C%5B208%2C0%2C8%2C70%5D%2C%5B216%2C%0A0%2C13%2C59%5D%2C%5B224%2C69%2C5%2C6%5D%2C%5B239%2C61%2C5%2C7%5D%2C%5B257%2C61%2C13%2C7%5D%2C%5B283%2C69%2C5%2C6%5D%2C%5B294%2C0%2C8%2C72%5D%2C%5B308%2C70%2C18%2C4%5D%2C%5B31%2C79%2C15%2C4%5D%2C%5B31%2C88%2C7%2C17%5D%2C%5B38%2C73%2C24%2C5%5D%2C%5B38%2C78%2C8%2C5%5D%2C%5B38%2C97%2C32%2C8%5D%2C%5B41%2C61%2C6%2C6%5D%2C%5B47%2C0%2C33%2C43%5D%2C%5B47%2C43%2C15%2C12%5D%2C%5B54%2C55%2C8%2C23%5D%2C%5B54%2C84%2C4%2C6%5D%2C%5B69%2C60%2C5%2C11%5D%2C%5B69%2C76%2C12%2C12%5D%5D%2C2%3A%5B%5B134%2C63%2C15%2C1%5D%2C%5B134%2C69%2C8%2C1%5D%2C%5B142%2C80%2C43%2C1%5D%2C%5B185%2C69%2C9%2C1%5D%2C%5B223%2C69%2C1%2C6%5D%2C%5B224%2C68%2C5%2C1%5D%2C%5B224%2C75%2C5%2C1%5D%2C%5B229%2C69%2C1%2C6%5D%2C%5B238%2C61%2C1%2C7%5D%2C%5B239%2C60%2C5%2C1%5D%2C%5B239%2C68%2C5%2C1%5D%2C%5B244%2C61%2C1%2C7%5D%2C%5B256%2C61%2C1%2C7%5D%2C%5B257%2C60%2C13%2C1%5D%2C%5B257%2C68%2C13%2C1%5D%2C%5B26%2C67%2C1%2C38%5D%2C%5B27%2C67%2C20%2C1%5D%2C%5B270%2C61%2C1%2C7%5D%2C%5B282%2C69%2C1%2C6%5D%2C%5B283%2C%0A68%2C5%2C1%5D%2C%5B283%2C75%2C5%2C1%5D%2C%5B288%2C69%2C1%2C6%5D%2C%5B31%2C78%2C7%2C1%5D%2C%5B31%2C83%2C15%2C1%5D%2C%5B38%2C72%2C16%2C1%5D%2C%5B46%2C96%2C24%2C1%5D%2C%5B47%2C55%2C7%2C1%5D%2C%5B53%2C84%2C1%2C6%5D%2C%5B54%2C83%2C4%2C1%5D%2C%5B54%2C90%2C4%2C1%5D%2C%5B58%2C84%2C1%2C6%5D%2C%5B62%2C43%2C18%2C1%5D%2C%5B68%2C76%2C1%2C12%5D%2C%5B69%2C59%2C5%2C1%5D%2C%5B69%2C71%2C5%2C1%5D%2C%5B69%2C75%2C12%2C1%5D%2C%5B69%2C88%2C12%2C1%5D%2C%5B81%2C76%2C1%2C12%5D%5D%7D%2CD%3A%5B%5B3%2C43%2C60%5D%2C%5B4%2C149%2C66%2C3%2C4%2C60%2C0%5D%2C%5B4%2C172%2C66%2C3%2C4%2C60%2C0%5D%2C%5B4%2C255%2C69%2C7%2C4%2C-80%2C0%5D%2C%5B5%2C322%2C67%5D%2C%5B7%2C112%2C43%5D%2C%5B7%2C197%2C69%5D%2C%5B7%2C41%2C96%5D%2C%5B8%2C126%2C57%2C8%2C4%5D%2C%5B8%2C142%2C70%2C3%2C3%5D%2C%5B8%2C152%2C70%2C3%2C3%5D%2C%5B8%2C162%2C70%2C3%2C3%5D%2C%5B8%2C172%2C70%2C3%2C3%5D%2C%5B8%2C182%2C70%2C3%2C3%5D%2C%5B8%2C202%2C76%2C100%2C4%5D%2C%5B8%2C31%2C73%2C7%2C5%5D%2C%5B8%2C47%2C61%2C7%2C3%5D%2C%5B8%2C47%2C92%2C3%2C3%5D%2C%0A%5B8%2C62%2C89%2C3%2C3%5D%2C%5B8%2C64%2C58%2C3%2C3%5D%2C%5B8%2C77%2C47%2C3%2C3%5D%2C%5B8%2C77%2C68%2C3%2C3%5D%2C%5B8%2C78%2C96%2C3%2C3%5D%2C%5B8%2C88%2C83%2C3%2C3%5D%2C%5B8%2C94%2C42%2C3%2C3%5D%5D%7D%2C%7Bga%3A%7B1%3A%5B%5B0%2C0%2C46%2C45%5D%2C%5B103%2C65%2C14%2C10%5D%2C%5B118%2C52%2C10%2C8%5D%2C%5B128%2C44%2C11%2C16%5D%2C%5B131%2C57%2C20%2C12%5D%2C%5B46%2C31%2C19%2C14%5D%2C%5B47%2C69%2C14%2C11%5D%2C%5B61%2C61%2C20%2C12%5D%2C%5B70%2C71%2C34%2C15%5D%2C%5B93%2C49%2C14%2C9%5D%5D%2C2%3A%5B%5D%7D%2CD%3A%5B%5B3%2C90%2C70%5D%2C%5B6%2C84%2C64%2C%22THANKS%20FOR%20PLAYING%5B%22%5D%5D%7D%5D%3B%0Aclass%20Vb%7Bconstructor()%7Bthis.text%3Dnew%20Tb(0%2C0%2C%22OFFLINE%20PARADISE%22)%7DU()%7Bthis.text.x%3Dl.x-48%3Bthis.text.y%3Dl.y-30%3Breturn%20this.text.U()%7Df()%7B%7Dc()%7BS.globalAlpha%3D1-(1-m.ca)*(1-m.ca)%3BX(n%2Cm.x-300%2Cm.y-300%2C600%2C600)%3Bthis.text.c()%3BV()%7D%7Dlet%20Wb%3Bclass%20Xb%20extends%20Z%7BU()%7Bthis.kc%3Dthis.lb%3Bthis.lc%3Dthis.Pa%3Blet%20a%3Dthis.lb%2Cb%3Dthis.Pa%2Cc%3Dthis.Pa%3Bfor(%3B-10%3C%3Db%26%26!k.o.u(a%2Cb-1)%3B)b--%3Bthis.y%3D8*b%3Bthis.height%3D8*(c-b%2B1)%7Df()%7BWb!%3D%3Dthis%26%26G(this%2Cl.v)%26%26(Wb%3Dthis%2Ck.xb%3Dthis.kc%2Ck.yb%3Dthis.lc)%7D%7D%0Aclass%20Yb%20extends%20Z%7Bconstructor(a%2Cb%2Cc%2Cd)%7Bsuper(a%2Cb%2Cc%2Cd)%3Bthis.reset()%7Dreset()%7Bthis.T%3D!0%3Bthis.%24a%3D!1%3Bthis.S%3D0%7Dasync%20U()%7Bthis.C%3Dawait%20J(this.width%2Cthis.height%2C(a)%3D%3E%7BI(0%2C0%2Cthis.width%2F8-1%2Cthis.height%2F8-1%2C(b%2Cc)%3D%3E%7Ba.fillStyle%3DEa(q%2C.94-.01%2B.02*Math.random())%3Ba.fillRect(8*b%2C8*c%2C8%2C8)%7D)%3Blet%20b%3Da.getImageData(0%2C0%2Cthis.width%2Cthis.height)%3Bfor(var%20c%3D2%3Bc%3Cthis.width-2%3Bc%2B%2B)b.data%5B4*(c%2B1*this.width)%2B3%5D%3D0%2Cb.data%5B4*(c%2B(this.height-2)*this.width)%2B3%5D%3D0%3Bfor(c%3D2%3Bc%3Cthis.height-2%3Bc%2B%2B)b.data%5B4*(1%2Bc*this.width)%2B3%5D%3D0%2Cb.data%5B4*(this.width-%0A2%2Bc*this.width)%2B3%5D%3D0%3Ba.putImageData(b%2C0%2C0)%7D)%7Df()%7Bif(!this.T)if(this.S%2B%3Dg%2C15%3C%3Dthis.S)this.reset()%3Belse%20return%3Bif(G(this%2Cl.v))l.ba()%3Belse%7Bvar%20a%3Dl.ub(this)%3Ba%26%26!this.%24a%3Fthis.%24a%3D!0%3A!a%26%26this.%24a%26%26(this.T%3D!1)%7D%7Dc()%7Blet%20a%3Bif(.2%3Ethis.S)a%3D1-this.S%2F.2%3Belse%20if(14.8%3Cthis.S)a%3D1-(15-this.S)%2F.2%3Belse%20return%3Blet%20b%3D1*this.width%2Cc%3Dthis.height*a%2Cd%3Dthis.x%2B(this.width-b)%2F2%2Ce%3Dthis.y%2B(this.height-c)%2F2%3BS.globalAlpha%3D(a%2B1)%2F2%3BW(this.C%2Cd%2Ce%2Cb%2Cc)%3BV()%7D%7D%0Aclass%20Zb%20extends%20Ib%7Bconstructor(a)%7Bsuper()%3Bthis.oa%3Da%7DVb()%7Blet%20%7Bga%3Aa%2CD%3Ab%7D%3DUb%5Bthis.oa%5D%3Bda(this.oa)%3Bfor(let%20b%20in%20a)%7Blet%20c%3D%7B%5B1%5D%3AKb%2C%5B2%5D%3ALb%7D%5Bb%5D%3Ba%5Bb%5D.forEach((%5Ba%2Cb%2Cd%2Cr%5D)%3D%3E%7BI(a%2Cb%2Ca%2Bd-1%2Cb%2Br-1%2C(a%2Cb)%3D%3Ek.Ka(new%20c(a%2Cb)))%7D)%7Db.forEach((a)%3D%3E%7Blet%20b%3Da.slice(1)%3Bswitch(a%5B0%5D)%7Bcase%203%3Ak.pc(new%20Bb(...b))%3Bbreak%3Bcase%204%3Ak.ib(new%20Mb(...b))%3Bbreak%3Bcase%208%3Ak.ib(new%20Yb(...b))%3Bbreak%3Bcase%205%3Ak.L(new%20Qb(...b))%3Bbreak%3Bcase%206%3Ak.L(new%20Tb(...b)%2C120)%3Bbreak%3Bcase%207%3Ak.L(new%20Xb(...b))%7D%7D)%3B0%3D%3D%3Dthis.oa%26%26k.L(new%20Vb%2C50)%3Bthis.oa%3D%3D%3DUb.length-1%26%26k.L(new%20vb(!0))%3B%0Ak.vc()%7D%7Dclass%20%24b%7Bconstructor()%7B%7Df()%7Bthis.za%26%26(this.Xa%3D!0%2Cthis.wb(this.za)%2Cthis.za%3Dnull)%3Breturn%20this.Xa%7Dac()%7Bthis.za%7C%7C(this.za%3Dnew%20Zb(this.Rb.oa%2B1))%7Dasync%20wb(a)%7Bthis.Rb%3Da%3Bthis.Xa%3D!0%3Bawait%20a.load()%3Bthis.Xa%3D!1%7D%7Dfunction%20ac()%7BrequestAnimationFrame(ac)%3Bh.f()%7C%7C(k.f()%2Cca%2B%2B%2Cfa()%2Ck.c())%7D(async%20function(a)%7Bawait%20gb()%3Bh%3Dnew%20%24b%3Bawait%20a()%3Bac()%7D)(async()%3D%3E%7Bcb.play()%3Bawait%20h.wb(new%20Zb(0))%7D)%3B%7D)()%3B"
        >Offline paradise.SPG</a
      >
    </fieldset>
  </body>
</html>

<style>
  body {
    text-align: center;
    background-color: black;
    color: white;
  }

  iframe {
    background-color: white;
  }
</style>
